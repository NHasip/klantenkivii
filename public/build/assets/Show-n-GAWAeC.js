import{u as j,r as N,j as e,H as Ce,L as C,a as S}from"./app-DTu8xGDR.js";import"./app-Da9Q4cYH.js";function v(s){try{return new Intl.NumberFormat("nl-NL",{style:"currency",currency:"EUR"}).format(s??0)}catch{return`EUR ${Number(s??0).toFixed(2)}`.replace(".",",")}}function k(s){if(!s)return"—";try{return new Intl.DateTimeFormat("nl-NL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(s))}catch{return String(s)}}function Ae(s){if(!s)return"—";try{return new Intl.DateTimeFormat("nl-NL",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(s))}catch{return String(s)}}function H(s){const x=Number(String(s).replace(",","."));return Number.isFinite(x)?x:0}function te(...s){return s.filter(Boolean).join(" ")}function Ee({links:s}){return!s||s.length<=1?null:e.jsx("div",{className:"mt-6 flex flex-wrap gap-2",children:s.map((x,_)=>e.jsx(C,{href:x.url||"#",className:te("rounded-md border px-3 py-1.5 text-sm",x.active?"border-indigo-600 bg-indigo-600 text-white":"border-zinc-200 text-zinc-700 hover:bg-zinc-50",!x.url&&"cursor-not-allowed opacity-50"),preserveScroll:!0,dangerouslySetInnerHTML:{__html:x.label}},`${x.label}-${_}`))})}const Me=[{key:"overzicht",label:"Overzicht"},{key:"klantpersonen",label:"Contactpersonen"},{key:"demo_status",label:"Demo & status"},{key:"incasso",label:"Incasso"},{key:"modules",label:"Modules & prijzen"},{key:"gebruikers",label:"Gebruikers"},{key:"timeline",label:"Notities & timeline"},{key:"taken_afspraken",label:"Taken & afspraken"}];function Oe({garageCompany:s,tab:x,statusOptions:_,sourceOptions:A,moduleRows:se,moduleTotals:Te,persons:W,seats:K,mandates:J,activities:P,tasks:U,appointments:Y,reminderChannels:E,hasActiveMandate:Z,statusErrors:I,urls:c}){const b=x||"overzicht",a=j({bedrijfsnaam:s.bedrijfsnaam||"",kvk_nummer:s.kvk_nummer||"",btw_nummer:s.btw_nummer||"",adres_straat_nummer:s.adres_straat_nummer||"",postcode:s.postcode||"",plaats:s.plaats||"",land:s.land||"Nederland",website:s.website||"",hoofd_email:s.hoofd_email||"",hoofd_telefoon:s.hoofd_telefoon||"",status:s.status||(_==null?void 0:_[0]),bron:s.bron||(A==null?void 0:A[0]),tags:s.tags||"",demo_aangevraagd_op:s.demo_aangevraagd_op||"",demo_gepland_op:s.demo_gepland_op||"",proefperiode_start:s.proefperiode_start||"",actief_vanaf:s.actief_vanaf||"",opgezegd_op:s.opgezegd_op||"",opzegreden:s.opzegreden||"",verloren_op:s.verloren_op||"",verloren_reden:s.verloren_reden||""}),ae=t=>{a.setData("status",t),t==="demo_aangevraagd"&&!a.data.demo_aangevraagd_op&&a.setData("demo_aangevraagd_op",new Date().toISOString().slice(0,16)),t==="actief"&&!a.data.actief_vanaf&&a.setData("actief_vanaf",new Date().toISOString().slice(0,16))},ne=t=>{t.preventDefault(),!(["opgezegd","verloren"].includes(a.data.status)&&!confirm("Weet je het zeker? Dit wordt gelogd in de timeline."))&&a.patch(c.update_overview,{preserveScroll:!0})},[de,O]=N.useState(!1),[F,B]=N.useState(null),d=j({voornaam:"",achternaam:"",rol:"",email:"",telefoon:"",is_primary:!1,active:!0}),le=()=>{B(null),O(!0),d.setData({voornaam:"",achternaam:"",rol:"",email:"",telefoon:"",is_primary:!1,active:!0}),d.clearErrors()},re=t=>{B(t.id),O(!0),d.setData({voornaam:t.voornaam||"",achternaam:t.achternaam||"",rol:t.rol||"",email:t.email||"",telefoon:t.telefoon||"",is_primary:!!t.is_primary,active:!!t.active}),d.clearErrors()},ie=()=>{B(null),O(!1),d.clearErrors()},ce=t=>{if(t.preventDefault(),F){const l=c.update_person.replace("__PERSON__",F);d.patch(l,{preserveScroll:!0})}else d.post(c.store_person,{preserveScroll:!0})},oe=t=>{if(!confirm("Verwijderen?"))return;const l=c.delete_person.replace("__PERSON__",t);S.delete(l,{preserveScroll:!0})},m=j({rows:se||[]}),f=N.useMemo(()=>{let t=0,l=0,z=0;return m.data.rows.forEach(p=>{if(!p.actief)return;const g=H(p.prijs_maand_excl),y=Math.max(1,Number(p.aantal||1));t+=g*y,l+=g*y*(H(p.btw_percentage)/100),z+=1}),{totaleModules:m.data.rows.length,actieveModules:z,totaalExcl:t,btw:l,totaalIncl:t+l}},[m.data.rows]),w=(t,l,z)=>{m.setData("rows",m.data.rows.map((p,g)=>g===t?{...p,[l]:z}:p))},me=t=>{const l=m.data.rows[t];w(t,"actief",!l.actief),!l.actief&&Number(l.aantal||0)<1&&w(t,"aantal",1)},xe=()=>{m.patch(c.update_modules,{preserveScroll:!0})},[ue,R]=N.useState(!1),[$,V]=N.useState(null),r=j({naam:"",email:"",rol_in_kivii:"",actief:!0,aangemaakt_op:""}),he=()=>{V(null),R(!0),r.setData({naam:"",email:"",rol_in_kivii:"",actief:!0,aangemaakt_op:""}),r.clearErrors()},be=t=>{V(t.id),R(!0),r.setData({naam:t.naam||"",email:t.email||"",rol_in_kivii:t.rol_in_kivii||"",actief:!!t.actief,aangemaakt_op:t.aangemaakt_op||""}),r.clearErrors()},pe=()=>{V(null),R(!1),r.clearErrors()},je=t=>{t.preventDefault(),$?r.patch(c.update_seat.replace("__SEAT__",$),{preserveScroll:!0}):r.post(c.store_seat,{preserveScroll:!0})},ve=t=>{confirm("Verwijderen?")&&S.delete(c.delete_seat.replace("__SEAT__",t),{preserveScroll:!0})},o=j({demo_aangevraagd_op:s.demo_aangevraagd_op||"",demo_gepland_op:s.demo_gepland_op||"",demo_duur_dagen:s.demo_duur_dagen||"",proefperiode_start:s.proefperiode_start||"",actief_vanaf:s.actief_vanaf||""}),fe=N.useMemo(()=>{if(o.data.demo_aangevraagd_op&&o.data.demo_duur_dagen){const t=new Date(o.data.demo_aangevraagd_op);if(!Number.isNaN(t.getTime()))return t.setDate(t.getDate()+Number(o.data.demo_duur_dagen)),t.toISOString().slice(0,16)}return s.demo_eind_op||""},[o.data.demo_aangevraagd_op,o.data.demo_duur_dagen,s.demo_eind_op]),Ne=t=>{t.preventDefault(),o.patch(c.save_demo_dates,{preserveScroll:!0})},u=j({demo_verleng_dagen:"",demo_verleng_notitie:""}),ge=t=>{t.preventDefault(),u.post(c.extend_demo,{preserveScroll:!0,onSuccess:()=>u.reset()})},M=t=>{S.patch(c.set_demo_status,{status:t},{preserveScroll:!0})},[_e,T]=N.useState(!1),[ze,L]=N.useState(null),q=()=>{const t=s.primary_person?`${s.primary_person.voornaam} ${s.primary_person.achternaam}`.trim():"";return{mandate_id:null,bedrijfsnaam:s.bedrijfsnaam||"",voor_en_achternaam:t||s.bedrijfsnaam||"",straatnaam_en_nummer:s.adres_straat_nummer||"",postcode:s.postcode||"",plaats:s.plaats||"",land:s.land||"Nederland",iban:"",bic:"",email:s.hoofd_email||"",telefoonnummer:s.hoofd_telefoon||"",plaats_van_tekenen:s.plaats||"",datum_van_tekenen:new Date().toISOString().slice(0,10),ondertekenaar_naam:"",akkoord_checkbox:!1,akkoord_op:"",status:"pending",ontvangen_op:new Date().toISOString().slice(0,16)}},n=j(q()),ke=()=>{L(null),T(!0),n.setData(q()),n.clearErrors()},we=t=>{L(t.id),T(!0),n.setData({mandate_id:t.id,bedrijfsnaam:t.bedrijfsnaam||"",voor_en_achternaam:t.voor_en_achternaam||"",straatnaam_en_nummer:t.straatnaam_en_nummer||"",postcode:t.postcode||"",plaats:t.plaats||"",land:t.land||"Nederland",iban:t.iban||"",bic:t.bic||"",email:t.email||"",telefoonnummer:t.telefoonnummer||"",plaats_van_tekenen:t.plaats_van_tekenen||"",datum_van_tekenen:t.datum_van_tekenen||"",ondertekenaar_naam:t.ondertekenaar_naam||"",akkoord_checkbox:!!t.akkoord_checkbox,akkoord_op:t.akkoord_op||"",status:t.status||"pending",ontvangen_op:t.ontvangen_op||""}),n.clearErrors()},Q=()=>{L(null),T(!1),n.clearErrors()},ye=t=>{t.preventDefault(),n.post(c.save_mandate,{preserveScroll:!0,onSuccess:()=>T(!1)})},G=(t,l)=>{S.patch(c.set_mandate_status.replace("__MANDATE__",t),{status:l},{preserveScroll:!0})},h=j({titel:"Notitie",inhoud:""}),De=t=>{t.preventDefault(),h.post(c.add_note,{preserveScroll:!0,onSuccess:()=>h.reset("inhoud")})},i=j({type:"taak",titel:"",inhoud:"",due_at:"",createReminder:!1,remind_at:"",channel:(E==null?void 0:E[0])||"popup"}),Se=t=>{t.preventDefault(),i.post(c.add_task,{preserveScroll:!0,onSuccess:()=>i.reset("titel","inhoud","due_at","createReminder","remind_at")})},X=t=>{S.patch(c.mark_task_done.replace("__ACTIVITY__",t),{},{preserveScroll:!0})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ce,{title:s.bedrijfsnaam}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-zinc-900",children:s.bedrijfsnaam}),e.jsx("p",{className:"mt-1 text-sm text-zinc-500",children:"Klantdossier en modules"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{href:c.index,className:"rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold hover:bg-zinc-50",children:"Terug naar overzicht"}),e.jsx(C,{href:c.old_show,className:"rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold text-zinc-500 hover:bg-zinc-50",children:"Klant (old)"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Me.map(t=>e.jsx(C,{href:`${c.show}?tab=${t.key}`,className:te("rounded-md border px-3 py-2 text-sm font-semibold",b===t.key?"border-zinc-900 bg-zinc-900 text-white":"border-zinc-200 text-zinc-700 hover:bg-zinc-50"),children:t.label},t.key))}),b==="overzicht"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-4",children:[e.jsx("div",{className:"text-xs font-medium text-zinc-500",children:"Maandelijks terugkerende omzet (excl. btw)"}),e.jsx("div",{className:"mt-1 text-xl font-semibold",children:v(s.active_mrr_excl)}),e.jsx("div",{className:"mt-2 text-xs text-zinc-500",children:"Actieve modules, vandaag."})]}),e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-4",children:[e.jsx("div",{className:"text-xs font-medium text-zinc-500",children:"Maandelijks terugkerende omzet (incl. btw)"}),e.jsx("div",{className:"mt-1 text-xl font-semibold",children:v(s.active_mrr_incl)}),e.jsx("div",{className:"mt-2 text-xs text-zinc-500",children:"BTW standaard 21% (instelbaar per module)."})]}),e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-4",children:[e.jsx("div",{className:"text-xs font-medium text-zinc-500",children:"SEPA mandaat"}),e.jsx("div",{className:"mt-1 text-xl font-semibold",children:Z?"Actief":"Niet actief"}),e.jsx("div",{className:"mt-2 text-xs text-zinc-500",children:"Zie tab Incasso voor historie."})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(C,{href:`${c.show}?tab=modules`,className:"rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold hover:bg-zinc-50",children:"Modules & prijzen wijzigen"})}),I&&I.length>0&&e.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-900",children:[e.jsx("div",{className:"font-semibold",children:"Let op"}),e.jsx("ul",{className:"mt-2 list-disc pl-5",children:I.map((t,l)=>e.jsx("li",{children:t},l))})]}),e.jsxs("form",{onSubmit:ne,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Bedrijfsnaam *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.bedrijfsnaam,onChange:t=>a.setData("bedrijfsnaam",t.target.value)}),a.errors.bedrijfsnaam&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:a.errors.bedrijfsnaam})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Status"}),e.jsx("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.status,onChange:t=>ae(t.target.value),children:_.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Bron"}),e.jsx("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.bron,onChange:t=>a.setData("bron",t.target.value),children:A.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Hoofd e-mail *"}),e.jsx("input",{type:"email",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.hoofd_email,onChange:t=>a.setData("hoofd_email",t.target.value)}),a.errors.hoofd_email&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:a.errors.hoofd_email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Hoofd telefoon *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.hoofd_telefoon,onChange:t=>a.setData("hoofd_telefoon",t.target.value)}),a.errors.hoofd_telefoon&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:a.errors.hoofd_telefoon})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Adres"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.adres_straat_nummer,onChange:t=>a.setData("adres_straat_nummer",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Postcode"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.postcode,onChange:t=>a.setData("postcode",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Plaats *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.plaats,onChange:t=>a.setData("plaats",t.target.value)}),a.errors.plaats&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:a.errors.plaats})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Land"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.land,onChange:t=>a.setData("land",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Website"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.website,onChange:t=>a.setData("website",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Demo aangevraagd op"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.demo_aangevraagd_op,onChange:t=>a.setData("demo_aangevraagd_op",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Demo gepland op"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.demo_gepland_op,onChange:t=>a.setData("demo_gepland_op",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Proefperiode start"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.proefperiode_start,onChange:t=>a.setData("proefperiode_start",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Actief vanaf"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.actief_vanaf,onChange:t=>a.setData("actief_vanaf",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Opgezegd op"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.opgezegd_op,onChange:t=>a.setData("opgezegd_op",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Verloren op"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.verloren_op,onChange:t=>a.setData("verloren_op",t.target.value)})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Opzegreden"}),e.jsx("textarea",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",rows:2,value:a.data.opzegreden,onChange:t=>a.setData("opzegreden",t.target.value)})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Verloren reden"}),e.jsx("textarea",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",rows:2,value:a.data.verloren_reden,onChange:t=>a.setData("verloren_reden",t.target.value)})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Tags"}),e.jsx("textarea",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",rows:2,value:a.data.tags,onChange:t=>a.setData("tags",t.target.value)})]})]}),e.jsx("div",{className:"flex items-center justify-end gap-2",children:e.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700",disabled:a.processing,children:a.processing?"Opslaan...":"Opslaan"})})]})]}),b==="klantpersonen"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Contactpersonen"}),e.jsx("div",{className:"text-xs text-zinc-500",children:"Meerdere contactpersonen per klant."})]}),e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold hover:bg-zinc-50",onClick:le,children:"Nieuwe contactpersoon"})]}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-zinc-200 bg-white",children:e.jsxs("table",{className:"min-w-full divide-y divide-zinc-100",children:[e.jsx("thead",{className:"bg-zinc-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Naam"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Rol"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Contact"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Actief"}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsxs("tbody",{className:"divide-y divide-zinc-100",children:[W.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-10 text-center text-sm text-zinc-600",children:"Nog geen contactpersonen."})}),W.map(t=>e.jsxs("tr",{className:"hover:bg-zinc-50",children:[e.jsxs("td",{className:"px-4 py-3 text-sm",children:[e.jsxs("div",{className:"font-semibold",children:[t.voornaam," ",t.achternaam]}),t.is_primary&&e.jsx("div",{className:"mt-0.5 inline-flex rounded-full bg-indigo-50 px-2 py-0.5 text-xs font-semibold text-indigo-700",children:"Primair"})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-zinc-600",children:t.rol||"-"}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[e.jsx("div",{children:t.email}),e.jsx("div",{className:"text-xs text-zinc-500",children:t.telefoon||"-"})]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:t.active?"Ja":"Nee"}),e.jsxs("td",{className:"px-4 py-3 text-right text-sm",children:[e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-2 py-1 text-xs hover:bg-zinc-50",onClick:()=>re(t),children:"Bewerken"}),e.jsx("button",{type:"button",className:"ml-2 rounded-md border border-rose-200 px-2 py-1 text-xs text-rose-700 hover:bg-rose-50",onClick:()=>oe(t.id),children:"Verwijderen"})]})]},t.id))]})]})}),de&&e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm font-semibold",children:F?"Contactpersoon bewerken":"Contactpersoon toevoegen"}),e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold hover:bg-zinc-50",onClick:ie,children:"Annuleren"})]}),e.jsxs("form",{onSubmit:ce,className:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Voornaam *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:d.data.voornaam,onChange:t=>d.setData("voornaam",t.target.value)}),d.errors.voornaam&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:d.errors.voornaam})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Achternaam *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:d.data.achternaam,onChange:t=>d.setData("achternaam",t.target.value)}),d.errors.achternaam&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:d.errors.achternaam})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"E-mail *"}),e.jsx("input",{type:"email",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:d.data.email,onChange:t=>d.setData("email",t.target.value)}),d.errors.email&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:d.errors.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Telefoon"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:d.data.telefoon,onChange:t=>d.setData("telefoon",t.target.value)})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Rol"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:d.data.rol,onChange:t=>d.setData("rol",t.target.value),placeholder:"bijv. eigenaar, administratie, monteur"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300",checked:d.data.is_primary,onChange:t=>d.setData("is_primary",t.target.checked)}),e.jsx("span",{className:"text-sm",children:"Primair"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300",checked:d.data.active,onChange:t=>d.setData("active",t.target.checked)}),e.jsx("span",{className:"text-sm",children:"Actief"})]}),e.jsx("div",{className:"sm:col-span-2 flex justify-end",children:e.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700",disabled:d.processing,children:d.processing?"Opslaan...":"Opslaan"})})]})]})]}),b==="demo_status"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Demo & status"}),e.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:"Beheer statusflow en bijbehorende datums."})]}),e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-zinc-500",children:"Huidige status"}),e.jsx("div",{className:"mt-1 text-lg font-semibold",children:s.status})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm font-semibold hover:bg-zinc-50",onClick:()=>M("demo_aangevraagd"),children:"Naar demo aangevraagd"}),e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm font-semibold hover:bg-zinc-50",onClick:()=>M("demo_gepland"),children:"Naar demo gepland"}),e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm font-semibold hover:bg-zinc-50",onClick:()=>M("proefperiode"),children:"Naar proefperiode"}),e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm font-semibold hover:bg-zinc-50",onClick:()=>M("actief"),children:"Actief"})]})]}),!Z&&e.jsx("div",{className:"mt-3 text-xs text-amber-800",children:"Let op: geen actief SEPA mandaat gekoppeld."})]}),e.jsxs("form",{onSubmit:Ne,className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Demo aangevraagd op"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:o.data.demo_aangevraagd_op,onChange:t=>o.setData("demo_aangevraagd_op",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Demo gepland op"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:o.data.demo_gepland_op,onChange:t=>o.setData("demo_gepland_op",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Demo duur (dagen)"}),e.jsx("input",{type:"number",min:"1",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:o.data.demo_duur_dagen,onChange:t=>o.setData("demo_duur_dagen",t.target.value)}),e.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:"Einddatum wordt automatisch berekend."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Demo einddatum"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-200 bg-zinc-50 text-sm",value:fe,disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Proefperiode start"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:o.data.proefperiode_start,onChange:t=>o.setData("proefperiode_start",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Actief vanaf"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:o.data.actief_vanaf,onChange:t=>o.setData("actief_vanaf",t.target.value)})]}),e.jsx("div",{className:"sm:col-span-2 flex justify-end",children:e.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700",disabled:o.processing,children:o.processing?"Opslaan...":"Datums opslaan"})})]}),e.jsxs("form",{onSubmit:ge,className:"rounded-xl border border-zinc-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold",children:"Demo verlengen"}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Verleng met (dagen)"}),e.jsx("input",{type:"number",min:"1",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:u.data.demo_verleng_dagen,onChange:t=>u.setData("demo_verleng_dagen",t.target.value)}),u.errors.demo_verleng_dagen&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:u.errors.demo_verleng_dagen})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Notitie (optioneel)"}),e.jsx("input",{type:"text",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:u.data.demo_verleng_notitie,onChange:t=>u.setData("demo_verleng_notitie",t.target.value)})]})]}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsx("button",{type:"submit",className:"rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm font-semibold hover:bg-zinc-50",disabled:u.processing,children:u.processing?"Bezig...":"Verleng demo"})})]})]}),b==="incasso"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Incasso (SEPA mandaten)"}),e.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:"0 of 1 actief mandaat per klant, historie blijft behouden."})]}),e.jsx("button",{type:"button",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700",onClick:ke,children:"Nieuw mandaat"})]}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-zinc-200 bg-white",children:e.jsxs("table",{className:"min-w-full divide-y divide-zinc-100",children:[e.jsx("thead",{className:"bg-zinc-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Mandaat"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"IBAN"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Ontvangen"}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsxs("tbody",{className:"divide-y divide-zinc-100",children:[J.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-10 text-center text-sm text-zinc-600",children:"Nog geen mandaten."})}),J.map(t=>e.jsxs("tr",{className:"hover:bg-zinc-50",children:[e.jsxs("td",{className:"px-4 py-3 text-sm",children:[e.jsx("div",{className:"font-semibold",children:t.mandaat_id}),e.jsx("div",{className:"text-xs text-zinc-500",children:t.bedrijfsnaam})]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:t.iban}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:"inline-flex items-center rounded-full bg-zinc-100 px-2 py-0.5 text-xs font-semibold text-zinc-700",children:t.status})}),e.jsx("td",{className:"px-4 py-3 text-sm text-zinc-600",children:t.ontvangen_op?k(t.ontvangen_op):"—"}),e.jsxs("td",{className:"px-4 py-3 text-right text-sm",children:[e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-2 py-1 text-xs hover:bg-zinc-50",onClick:()=>we(t),children:"Bewerken"}),e.jsxs("div",{className:"mt-2 flex justify-end gap-2",children:[e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-2 py-1 text-xs hover:bg-zinc-50",onClick:()=>G(t.id,"pending"),children:"Pending"}),e.jsx("button",{type:"button",className:"rounded-md border border-emerald-200 px-2 py-1 text-xs text-emerald-700 hover:bg-emerald-50",onClick:()=>G(t.id,"actief"),children:"Actief"}),e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-2 py-1 text-xs hover:bg-zinc-50",onClick:()=>G(t.id,"ingetrokken"),children:"Ingetrokken"})]})]})]},t.id))]})]})}),_e&&e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm font-semibold",children:ze?"Mandaat bewerken":"Nieuw mandaat"}),e.jsx("button",{type:"button",className:"text-sm font-semibold text-zinc-600 hover:text-zinc-900",onClick:Q,children:"Sluiten"})]}),e.jsxs("form",{onSubmit:ye,className:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsx("input",{type:"hidden",value:n.data.mandate_id||""}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Bedrijfsnaam *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.bedrijfsnaam,onChange:t=>n.setData("bedrijfsnaam",t.target.value)}),n.errors.bedrijfsnaam&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:n.errors.bedrijfsnaam})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Voor- en achternaam *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.voor_en_achternaam,onChange:t=>n.setData("voor_en_achternaam",t.target.value)})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Straat + nummer *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.straatnaam_en_nummer,onChange:t=>n.setData("straatnaam_en_nummer",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Postcode *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.postcode,onChange:t=>n.setData("postcode",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Plaats *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.plaats,onChange:t=>n.setData("plaats",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Land"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.land,onChange:t=>n.setData("land",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"IBAN *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.iban,onChange:t=>n.setData("iban",t.target.value)}),n.errors.iban&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:n.errors.iban})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"BIC"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.bic,onChange:t=>n.setData("bic",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"E-mail *"}),e.jsx("input",{type:"email",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.email,onChange:t=>n.setData("email",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Telefoon *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.telefoonnummer,onChange:t=>n.setData("telefoonnummer",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Plaats van tekenen *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.plaats_van_tekenen,onChange:t=>n.setData("plaats_van_tekenen",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Datum van tekenen *"}),e.jsx("input",{type:"date",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.datum_van_tekenen,onChange:t=>n.setData("datum_van_tekenen",t.target.value)})]}),e.jsx("div",{className:"sm:col-span-2",children:e.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Ondertekening (typed naam)"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Ondertekenaar naam"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.ondertekenaar_naam,onChange:t=>n.setData("ondertekenaar_naam",t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300",checked:n.data.akkoord_checkbox,onChange:t=>n.setData("akkoord_checkbox",t.target.checked)}),e.jsx("span",{className:"text-sm",children:"Akkoord"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Akkoord op"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.akkoord_op,onChange:t=>n.setData("akkoord_op",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Ontvangen op"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.ontvangen_op,onChange:t=>n.setData("ontvangen_op",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Status"}),e.jsx("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.status,onChange:t=>n.setData("status",t.target.value),children:["pending","actief","ingetrokken"].map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"sm:col-span-2 flex justify-end gap-2",children:[e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold hover:bg-zinc-50",onClick:Q,children:"Annuleren"}),e.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700",disabled:n.processing,children:n.processing?"Opslaan...":"Opslaan"})]})]})]})]}),b==="modules"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Modules & prijzen"}),e.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:"Aantallen, prijzen en btw per module."})]}),e.jsx("button",{type:"button",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700",onClick:xe,disabled:m.processing,children:m.processing?"Opslaan...":"Opslaan"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-4",children:[e.jsx("div",{className:"text-xs font-medium text-zinc-500",children:"Actieve modules"}),e.jsxs("div",{className:"mt-1 text-xl font-semibold",children:[f.actieveModules," / ",f.totaleModules]})]}),e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-4",children:[e.jsx("div",{className:"text-xs font-medium text-zinc-500",children:"Totaal excl. btw"}),e.jsx("div",{className:"mt-1 text-xl font-semibold",children:v(f.totaalExcl)})]}),e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-4",children:[e.jsx("div",{className:"text-xs font-medium text-zinc-500",children:"BTW"}),e.jsx("div",{className:"mt-1 text-xl font-semibold",children:v(f.btw)})]}),e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-4",children:[e.jsx("div",{className:"text-xs font-medium text-zinc-500",children:"Totaal incl. btw"}),e.jsx("div",{className:"mt-1 text-xl font-semibold",children:v(f.totaalIncl)})]})]}),e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-4 text-sm text-zinc-600",children:["Totaal: ",v(f.totaalExcl)," excl. btw · BTW ",v(f.btw)," ·"," ",v(f.totaalIncl)," incl. btw"]}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-zinc-200 bg-white",children:e.jsxs("table",{className:"min-w-full divide-y divide-zinc-100",children:[e.jsx("thead",{className:"bg-zinc-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Actief"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Module"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Aantal"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Prijs (excl. btw)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"BTW %"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Subtotaal"})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-100",children:m.data.rows.map((t,l)=>{const z=Math.max(1,Number(t.aantal||1)),p=H(t.prijs_maand_excl)*z,g=m.errors[`rows.${l}.aantal`],y=m.errors[`rows.${l}.prijs_maand_excl`],ee=m.errors[`rows.${l}.btw_percentage`];return e.jsxs("tr",{className:t.actief?"":"bg-zinc-50/60",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300",checked:!!t.actief,onChange:()=>me(l)})}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-zinc-900",children:t.naam}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("input",{type:"number",min:"0",className:"w-24 rounded-md border-zinc-300 text-sm",value:t.aantal,onChange:D=>w(l,"aantal",D.target.value)}),g&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:g})]}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-28 rounded-md border-zinc-300 text-sm",value:t.prijs_maand_excl,onChange:D=>w(l,"prijs_maand_excl",D.target.value)}),y&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:y})]}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",className:"w-20 rounded-md border-zinc-300 text-sm",value:t.btw_percentage,onChange:D=>w(l,"btw_percentage",D.target.value)}),ee&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:ee})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-zinc-700",children:t.actief?v(p):"—"})]},t.module_id)})})]})})]}),b==="gebruikers"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Gebruikers"}),e.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:"Accounts binnen deze garage."})]}),e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold hover:bg-zinc-50",onClick:he,children:"Nieuwe gebruiker"})]}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-zinc-200 bg-white",children:e.jsxs("table",{className:"min-w-full divide-y divide-zinc-100",children:[e.jsx("thead",{className:"bg-zinc-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Naam"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"E-mail"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Rol"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Actief"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Aangemaakt"}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsxs("tbody",{className:"divide-y divide-zinc-100",children:[K.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-sm text-zinc-600",children:"Nog geen gebruikers."})}),K.map(t=>e.jsxs("tr",{className:"hover:bg-zinc-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-zinc-900",children:t.naam}),e.jsx("td",{className:"px-4 py-3 text-sm text-zinc-600",children:t.email}),e.jsx("td",{className:"px-4 py-3 text-sm text-zinc-600",children:t.rol_in_kivii||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:t.actief?"Ja":"Nee"}),e.jsx("td",{className:"px-4 py-3 text-sm text-zinc-600",children:Ae(t.aangemaakt_op)}),e.jsxs("td",{className:"px-4 py-3 text-right text-sm",children:[e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-2 py-1 text-xs hover:bg-zinc-50",onClick:()=>be(t),children:"Bewerken"}),e.jsx("button",{type:"button",className:"ml-2 rounded-md border border-rose-200 px-2 py-1 text-xs text-rose-700 hover:bg-rose-50",onClick:()=>ve(t.id),children:"Verwijderen"})]})]},t.id))]})]})}),ue&&e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm font-semibold",children:$?"Gebruiker bewerken":"Gebruiker toevoegen"}),e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold hover:bg-zinc-50",onClick:pe,children:"Annuleren"})]}),e.jsxs("form",{onSubmit:je,className:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Naam *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:r.data.naam,onChange:t=>r.setData("naam",t.target.value)}),r.errors.naam&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:r.errors.naam})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"E-mail *"}),e.jsx("input",{type:"email",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:r.data.email,onChange:t=>r.setData("email",t.target.value)}),r.errors.email&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:r.errors.email})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Rol"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:r.data.rol_in_kivii,onChange:t=>r.setData("rol_in_kivii",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Aangemaakt op"}),e.jsx("input",{type:"date",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:r.data.aangemaakt_op,onChange:t=>r.setData("aangemaakt_op",t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300",checked:r.data.actief,onChange:t=>r.setData("actief",t.target.checked)}),e.jsx("span",{className:"text-sm",children:"Actief"})]}),e.jsx("div",{className:"sm:col-span-2 flex justify-end",children:e.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700",disabled:r.processing,children:r.processing?"Opslaan...":"Opslaan"})})]})]})]}),b==="timeline"&&e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-5",children:[e.jsx("div",{className:"text-sm font-semibold",children:"Nieuwe notitie"}),e.jsxs("form",{onSubmit:De,className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Titel"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:h.data.titel,onChange:t=>h.setData("titel",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Notitie"}),e.jsx("textarea",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",rows:4,value:h.data.inhoud,onChange:t=>h.setData("inhoud",t.target.value)}),h.errors.inhoud&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:h.errors.inhoud})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700",disabled:h.processing,children:h.processing?"Opslaan...":"Notitie toevoegen"})})]})]})}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"space-y-4",children:[P.data.length===0&&e.jsx("div",{className:"rounded-xl border border-dashed border-zinc-200 bg-white p-8 text-center text-sm text-zinc-600",children:"Nog geen activiteiten."}),P.data.map(t=>e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:t.titel}),e.jsxs("div",{className:"mt-1 text-xs text-zinc-500",children:[t.type?t.type.replace("_"," "):"Activiteit"," ·"," ",k(t.created_at)]})]}),t.creator&&e.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:t.creator.name})]}),t.inhoud&&e.jsx("div",{className:"mt-3 text-sm text-zinc-700",children:t.inhoud}),(t.due_at||t.done_at)&&e.jsxs("div",{className:"mt-3 text-xs text-zinc-500",children:[t.due_at&&`Gepland: ${k(t.due_at)}`,t.done_at&&` · Afgerond: ${k(t.done_at)}`]})]},t.id))]}),e.jsx(Ee,{links:P.links})]})]}),b==="taken_afspraken"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-5",children:[e.jsx("div",{className:"text-sm font-semibold",children:"Nieuwe taak / afspraak"}),e.jsxs("form",{onSubmit:Se,className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Type"}),e.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:i.data.type,onChange:t=>i.setData("type",t.target.value),children:[e.jsx("option",{value:"taak",children:"Taak"}),e.jsx("option",{value:"afspraak",children:"Afspraak"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Titel"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:i.data.titel,onChange:t=>i.setData("titel",t.target.value)}),i.errors.titel&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:i.errors.titel})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Omschrijving"}),e.jsx("textarea",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",rows:3,value:i.data.inhoud,onChange:t=>i.setData("inhoud",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Planning"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:i.data.due_at,onChange:t=>i.setData("due_at",t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300",checked:i.data.createReminder,onChange:t=>i.setData("createReminder",t.target.checked)}),e.jsx("span",{className:"text-sm",children:"Reminder instellen"})]}),i.data.createReminder&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Reminder tijd"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:i.data.remind_at,onChange:t=>i.setData("remind_at",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Kanaal"}),e.jsx("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:i.data.channel,onChange:t=>i.setData("channel",t.target.value),children:E.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700",disabled:i.processing,children:i.processing?"Opslaan...":"Opslaan"})})]})]})}),e.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Open taken"}),e.jsxs("div",{className:"mt-3 space-y-3",children:[U.length===0&&e.jsx("div",{className:"rounded-xl border border-dashed border-zinc-200 bg-white p-6 text-center text-sm text-zinc-600",children:"Geen open taken."}),U.map(t=>e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:t.titel}),t.inhoud&&e.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:t.inhoud})]}),e.jsx("button",{type:"button",className:"rounded-md border border-emerald-200 px-2 py-1 text-xs text-emerald-700 hover:bg-emerald-50",onClick:()=>X(t.id),children:"Afgerond"})]}),t.due_at&&e.jsxs("div",{className:"mt-2 text-xs text-zinc-500",children:["Planning: ",k(t.due_at)]})]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Open afspraken"}),e.jsxs("div",{className:"mt-3 space-y-3",children:[Y.length===0&&e.jsx("div",{className:"rounded-xl border border-dashed border-zinc-200 bg-white p-6 text-center text-sm text-zinc-600",children:"Geen open afspraken."}),Y.map(t=>e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:t.titel}),t.inhoud&&e.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:t.inhoud})]}),e.jsx("button",{type:"button",className:"rounded-md border border-emerald-200 px-2 py-1 text-xs text-emerald-700 hover:bg-emerald-50",onClick:()=>X(t.id),children:"Afgerond"})]}),t.due_at&&e.jsxs("div",{className:"mt-2 text-xs text-zinc-500",children:["Planning: ",k(t.due_at)]})]},t.id))]})]})]})]})})]})}export{Oe as default};
