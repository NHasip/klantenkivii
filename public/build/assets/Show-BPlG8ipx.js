import{u as j,r as N,j as e,H as Pe,L as A,a as z}from"./app-ClWtXTc0.js";import"./app-Da9Q4cYH.js";function f(s){try{return new Intl.NumberFormat("nl-NL",{style:"currency",currency:"EUR"}).format(s??0)}catch{return`EUR ${Number(s??0).toFixed(2)}`.replace(".",",")}}function k(s){if(!s)return"—";try{return new Intl.DateTimeFormat("nl-NL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(s))}catch{return String(s)}}function Ie(s){if(!s)return"—";try{return new Intl.DateTimeFormat("nl-NL",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(s))}catch{return String(s)}}function H(s){const u=Number(String(s).replace(",","."));return Number.isFinite(u)?u:0}function ae(...s){return s.filter(Boolean).join(" ")}function Oe({links:s}){return!s||s.length<=1?null:e.jsx("div",{className:"mt-6 flex flex-wrap gap-2",children:s.map((u,y)=>e.jsx(A,{href:u.url||"#",className:ae("rounded-md border px-3 py-1.5 text-sm",u.active?"border-indigo-600 bg-indigo-600 text-white":"border-zinc-200 text-zinc-700 hover:bg-zinc-50",!u.url&&"cursor-not-allowed opacity-50"),preserveScroll:!0,dangerouslySetInnerHTML:{__html:u.label}},`${u.label}-${y}`))})}const Fe=[{key:"overzicht",label:"Overzicht"},{key:"klantpersonen",label:"Contactpersonen"},{key:"demo_status",label:"Demo & status"},{key:"incasso",label:"Incasso"},{key:"modules",label:"Modules & prijzen"},{key:"gebruikers",label:"Gebruikers"},{key:"timeline",label:"Notities & timeline"},{key:"taken_afspraken",label:"Taken & afspraken"}];function Le({garageCompany:s,tab:u,statusOptions:y,sourceOptions:M,moduleRows:ne,moduleTotals:Be,persons:K,seats:J,mandates:U,activities:O,tasks:Y,appointments:Z,reminderChannels:T,hasActiveMandate:q,statusErrors:F,welcomeEmail:c,smtpConfigured:Q,urls:i}){const p=u||"overzicht",a=j({bedrijfsnaam:s.bedrijfsnaam||"",kvk_nummer:s.kvk_nummer||"",btw_nummer:s.btw_nummer||"",adres_straat_nummer:s.adres_straat_nummer||"",postcode:s.postcode||"",plaats:s.plaats||"",land:s.land||"Nederland",website:s.website||"",hoofd_email:s.hoofd_email||"",hoofd_telefoon:s.hoofd_telefoon||"",login_email:s.login_email||"",login_password:s.login_password||"",status:s.status||(y==null?void 0:y[0]),bron:s.bron||(M==null?void 0:M[0]),tags:s.tags||"",demo_aangevraagd_op:s.demo_aangevraagd_op||"",demo_gepland_op:s.demo_gepland_op||"",proefperiode_start:s.proefperiode_start||"",actief_vanaf:s.actief_vanaf||"",opgezegd_op:s.opgezegd_op||"",opzegreden:s.opzegreden||"",verloren_op:s.verloren_op||"",verloren_reden:s.verloren_reden||""}),de=t=>{a.setData("status",t),t==="demo_aangevraagd"&&!a.data.demo_aangevraagd_op&&a.setData("demo_aangevraagd_op",new Date().toISOString().slice(0,16)),t==="actief"&&!a.data.actief_vanaf&&a.setData("actief_vanaf",new Date().toISOString().slice(0,16))},le=t=>{t.preventDefault(),!(["opgezegd","verloren"].includes(a.data.status)&&!confirm("Weet je het zeker? Dit wordt gelogd in de timeline."))&&a.patch(i.update_overview,{preserveScroll:!0})},[re,B]=N.useState(!1),[R,V]=N.useState(null),d=j({voornaam:"",achternaam:"",rol:"",email:"",telefoon:"",is_primary:!1,active:!0}),ie=()=>{V(null),B(!0),d.setData({voornaam:"",achternaam:"",rol:"",email:"",telefoon:"",is_primary:!1,active:!0}),d.clearErrors()},ce=t=>{V(t.id),B(!0),d.setData({voornaam:t.voornaam||"",achternaam:t.achternaam||"",rol:t.rol||"",email:t.email||"",telefoon:t.telefoon||"",is_primary:!!t.is_primary,active:!!t.active}),d.clearErrors()},oe=()=>{V(null),B(!1),d.clearErrors()},me=t=>{if(t.preventDefault(),R){const l=i.update_person.replace("__PERSON__",R);d.patch(l,{preserveScroll:!0})}else d.post(i.store_person,{preserveScroll:!0})},xe=t=>{if(!confirm("Verwijderen?"))return;const l=i.delete_person.replace("__PERSON__",t);z.delete(l,{preserveScroll:!0})},x=j({rows:ne||[]}),g=N.useMemo(()=>{let t=0,l=0,w=0;return x.data.rows.forEach(v=>{if(!v.actief)return;const _=H(v.prijs_maand_excl),S=Math.max(1,Number(v.aantal||1));t+=_*S,l+=_*S*(H(v.btw_percentage)/100),w+=1}),{totaleModules:x.data.rows.length,actieveModules:w,totaalExcl:t,btw:l,totaalIncl:t+l}},[x.data.rows]),D=(t,l,w)=>{x.setData("rows",x.data.rows.map((v,_)=>_===t?{...v,[l]:w}:v))},ue=t=>{const l=x.data.rows[t];D(t,"actief",!l.actief),!l.actief&&Number(l.aantal||0)<1&&D(t,"aantal",1)},he=()=>{x.patch(i.update_modules,{preserveScroll:!0})},[be,L]=N.useState(!1),[$,W]=N.useState(null),r=j({naam:"",email:"",rol_in_kivii:"",actief:!0,aangemaakt_op:""}),pe=()=>{W(null),L(!0),r.setData({naam:"",email:"",rol_in_kivii:"",actief:!0,aangemaakt_op:""}),r.clearErrors()},ve=t=>{W(t.id),L(!0),r.setData({naam:t.naam||"",email:t.email||"",rol_in_kivii:t.rol_in_kivii||"",actief:!!t.actief,aangemaakt_op:t.aangemaakt_op||""}),r.clearErrors()},je=()=>{W(null),L(!1),r.clearErrors()},fe=t=>{t.preventDefault(),$?r.patch(i.update_seat.replace("__SEAT__",$),{preserveScroll:!0}):r.post(i.store_seat,{preserveScroll:!0})},ge=t=>{confirm("Verwijderen?")&&z.delete(i.delete_seat.replace("__SEAT__",t),{preserveScroll:!0})},m=j({demo_aangevraagd_op:s.demo_aangevraagd_op||"",demo_gepland_op:s.demo_gepland_op||"",demo_duur_dagen:s.demo_duur_dagen||"",proefperiode_start:s.proefperiode_start||"",actief_vanaf:s.actief_vanaf||""}),Ne=N.useMemo(()=>{if(m.data.demo_aangevraagd_op&&m.data.demo_duur_dagen){const t=new Date(m.data.demo_aangevraagd_op);if(!Number.isNaN(t.getTime()))return t.setDate(t.getDate()+Number(m.data.demo_duur_dagen)),t.toISOString().slice(0,16)}return s.demo_eind_op||""},[m.data.demo_aangevraagd_op,m.data.demo_duur_dagen,s.demo_eind_op]),_e=t=>{t.preventDefault(),m.patch(i.save_demo_dates,{preserveScroll:!0})},h=j({demo_verleng_dagen:"",demo_verleng_notitie:""}),ze=t=>{t.preventDefault(),h.post(i.extend_demo,{preserveScroll:!0,onSuccess:()=>h.reset()})},P=t=>{z.patch(i.set_demo_status,{status:t},{preserveScroll:!0})},[ke,I]=N.useState(!1),[ye,E]=N.useState(null),X=()=>{const t=s.primary_person?`${s.primary_person.voornaam} ${s.primary_person.achternaam}`.trim():"";return{mandate_id:null,bedrijfsnaam:s.bedrijfsnaam||"",voor_en_achternaam:t||s.bedrijfsnaam||"",straatnaam_en_nummer:s.adres_straat_nummer||"",postcode:s.postcode||"",plaats:s.plaats||"",land:s.land||"Nederland",iban:"",bic:"",email:s.hoofd_email||"",telefoonnummer:s.hoofd_telefoon||"",plaats_van_tekenen:s.plaats||"",datum_van_tekenen:new Date().toISOString().slice(0,10),ondertekenaar_naam:"",akkoord_checkbox:!1,akkoord_op:"",status:"pending",ontvangen_op:new Date().toISOString().slice(0,16)}},n=j(X()),we=()=>{E(null),I(!0),n.setData(X()),n.clearErrors()},De=t=>{E(t.id),I(!0),n.setData({mandate_id:t.id,bedrijfsnaam:t.bedrijfsnaam||"",voor_en_achternaam:t.voor_en_achternaam||"",straatnaam_en_nummer:t.straatnaam_en_nummer||"",postcode:t.postcode||"",plaats:t.plaats||"",land:t.land||"Nederland",iban:t.iban||"",bic:t.bic||"",email:t.email||"",telefoonnummer:t.telefoonnummer||"",plaats_van_tekenen:t.plaats_van_tekenen||"",datum_van_tekenen:t.datum_van_tekenen||"",ondertekenaar_naam:t.ondertekenaar_naam||"",akkoord_checkbox:!!t.akkoord_checkbox,akkoord_op:t.akkoord_op||"",status:t.status||"pending",ontvangen_op:t.ontvangen_op||""}),n.clearErrors()},ee=()=>{E(null),I(!1),n.clearErrors()},Se=t=>{t.preventDefault(),n.post(i.save_mandate,{preserveScroll:!0,onSuccess:()=>I(!1)})},G=(t,l)=>{z.patch(i.set_mandate_status.replace("__MANDATE__",t),{status:l},{preserveScroll:!0})},b=j({titel:"Notitie",inhoud:""}),Ce=t=>{t.preventDefault(),b.post(i.add_note,{preserveScroll:!0,onSuccess:()=>b.reset("inhoud")})},o=j({type:"taak",titel:"",inhoud:"",due_at:"",createReminder:!1,remind_at:"",channel:(T==null?void 0:T[0])||"popup"}),Ae=t=>{t.preventDefault(),o.post(i.add_task,{preserveScroll:!0,onSuccess:()=>o.reset("titel","inhoud","due_at","createReminder","remind_at")})},te=t=>{z.patch(i.mark_task_done.replace("__ACTIVITY__",t),{},{preserveScroll:!0})},Me=()=>{z.post(i.refresh_welcome_email,{},{preserveScroll:!0})},Te=()=>{if(!Q){alert("SMTP instellingen ontbreken. Voeg deze toe via profiel > systeem-instellingen.");return}confirm("Welkomstmail versturen?")&&z.post(i.send_welcome_email,{},{preserveScroll:!0})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Pe,{title:s.bedrijfsnaam}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-zinc-900",children:s.bedrijfsnaam}),e.jsx("p",{className:"mt-1 text-sm text-zinc-500",children:"Klantdossier en modules"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{href:i.index,className:"rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold hover:bg-zinc-50",children:"Terug naar overzicht"}),e.jsx(A,{href:i.old_show,className:"rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold text-zinc-500 hover:bg-zinc-50",children:"Klant (old)"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Fe.map(t=>e.jsx(A,{href:`${i.show}?tab=${t.key}`,className:ae("rounded-md border px-3 py-2 text-sm font-semibold",p===t.key?"border-zinc-900 bg-zinc-900 text-white":"border-zinc-200 text-zinc-700 hover:bg-zinc-50"),children:t.label},t.key))}),p==="overzicht"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-4",children:[e.jsx("div",{className:"text-xs font-medium text-zinc-500",children:"Maandelijks terugkerende omzet (excl. btw)"}),e.jsx("div",{className:"mt-1 text-xl font-semibold",children:f(s.active_mrr_excl)}),e.jsx("div",{className:"mt-2 text-xs text-zinc-500",children:"Actieve modules, vandaag."})]}),e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-4",children:[e.jsx("div",{className:"text-xs font-medium text-zinc-500",children:"Maandelijks terugkerende omzet (incl. btw)"}),e.jsx("div",{className:"mt-1 text-xl font-semibold",children:f(s.active_mrr_incl)}),e.jsx("div",{className:"mt-2 text-xs text-zinc-500",children:"BTW standaard 21% (instelbaar per module)."})]}),e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-4",children:[e.jsx("div",{className:"text-xs font-medium text-zinc-500",children:"SEPA mandaat"}),e.jsx("div",{className:"mt-1 text-xl font-semibold",children:q?"Actief":"Niet actief"}),e.jsx("div",{className:"mt-2 text-xs text-zinc-500",children:"Zie tab Incasso voor historie."})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(A,{href:`${i.show}?tab=modules`,className:"rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold hover:bg-zinc-50",children:"Modules & prijzen wijzigen"})}),F&&F.length>0&&e.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-900",children:[e.jsx("div",{className:"font-semibold",children:"Let op"}),e.jsx("ul",{className:"mt-2 list-disc pl-5",children:F.map((t,l)=>e.jsx("li",{children:t},l))})]}),e.jsxs("form",{onSubmit:le,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Bedrijfsnaam *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.bedrijfsnaam,onChange:t=>a.setData("bedrijfsnaam",t.target.value)}),a.errors.bedrijfsnaam&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:a.errors.bedrijfsnaam})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Status"}),e.jsx("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.status,onChange:t=>de(t.target.value),children:y.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Bron"}),e.jsx("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.bron,onChange:t=>a.setData("bron",t.target.value),children:M.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Hoofd e-mail *"}),e.jsx("input",{type:"email",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.hoofd_email,onChange:t=>a.setData("hoofd_email",t.target.value)}),a.errors.hoofd_email&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:a.errors.hoofd_email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Hoofd telefoon *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.hoofd_telefoon,onChange:t=>a.setData("hoofd_telefoon",t.target.value)}),a.errors.hoofd_telefoon&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:a.errors.hoofd_telefoon})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Login e-mail"}),e.jsx("input",{type:"email",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.login_email,onChange:t=>a.setData("login_email",t.target.value)}),a.errors.login_email&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:a.errors.login_email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Login wachtwoord"}),e.jsx("input",{type:"password",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.login_password,onChange:t=>a.setData("login_password",t.target.value)}),a.errors.login_password&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:a.errors.login_password})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Adres"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.adres_straat_nummer,onChange:t=>a.setData("adres_straat_nummer",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Postcode"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.postcode,onChange:t=>a.setData("postcode",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Plaats *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.plaats,onChange:t=>a.setData("plaats",t.target.value)}),a.errors.plaats&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:a.errors.plaats})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Land"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.land,onChange:t=>a.setData("land",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Website"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.website,onChange:t=>a.setData("website",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Demo aangevraagd op"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.demo_aangevraagd_op,onChange:t=>a.setData("demo_aangevraagd_op",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Demo gepland op"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.demo_gepland_op,onChange:t=>a.setData("demo_gepland_op",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Proefperiode start"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.proefperiode_start,onChange:t=>a.setData("proefperiode_start",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Actief vanaf"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.actief_vanaf,onChange:t=>a.setData("actief_vanaf",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Opgezegd op"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.opgezegd_op,onChange:t=>a.setData("opgezegd_op",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Verloren op"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:a.data.verloren_op,onChange:t=>a.setData("verloren_op",t.target.value)})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Opzegreden"}),e.jsx("textarea",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",rows:2,value:a.data.opzegreden,onChange:t=>a.setData("opzegreden",t.target.value)})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Verloren reden"}),e.jsx("textarea",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",rows:2,value:a.data.verloren_reden,onChange:t=>a.setData("verloren_reden",t.target.value)})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Tags"}),e.jsx("textarea",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",rows:2,value:a.data.tags,onChange:t=>a.setData("tags",t.target.value)})]})]}),e.jsx("div",{className:"flex items-center justify-end gap-2",children:e.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700",disabled:a.processing,children:a.processing?"Opslaan...":"Opslaan"})})]}),e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-5",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Welkomstmail"}),e.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:"Concept op basis van template. Controleer en verstuur handmatig."})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-3 py-1.5 text-sm font-semibold hover:bg-zinc-50",onClick:Me,children:"Concept vernieuwen"}),e.jsx("button",{type:"button",className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm font-semibold text-white hover:bg-emerald-700",onClick:Te,children:"Verstuur welkomstmail"})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-lg border border-zinc-200 bg-zinc-50 p-4",children:[e.jsx("div",{className:"text-xs font-medium text-zinc-500",children:"Status"}),e.jsx("div",{className:"mt-1 text-sm font-semibold",children:(c==null?void 0:c.status)||"concept"}),(c==null?void 0:c.sent_at)&&e.jsxs("div",{className:"mt-1 text-xs text-zinc-500",children:["Verstuurd op ",k(c.sent_at)]})]}),e.jsxs("div",{className:"rounded-lg border border-zinc-200 bg-zinc-50 p-4 lg:col-span-2",children:[e.jsx("div",{className:"text-xs font-medium text-zinc-500",children:"Onderwerp"}),e.jsx("div",{className:"mt-1 text-sm font-semibold",children:(c==null?void 0:c.subject)||"—"}),e.jsxs("div",{className:"mt-2 text-xs text-zinc-500",children:["Naar: ",(c==null?void 0:c.to_email)||"—"]})]})]}),e.jsxs("div",{className:"mt-4 rounded-lg border border-zinc-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Preview"}),c!=null&&c.body_html?e.jsx("div",{className:"prose prose-sm mt-3 max-w-none text-zinc-700",dangerouslySetInnerHTML:{__html:c.body_html}}):c!=null&&c.body_text?e.jsx("pre",{className:"mt-3 whitespace-pre-wrap text-sm text-zinc-700",children:c.body_text}):e.jsx("div",{className:"mt-3 text-sm text-zinc-600",children:"Geen preview beschikbaar. Vul eerst login gegevens en vernieuw het concept."})]}),!Q&&e.jsx("div",{className:"mt-3 rounded-lg border border-amber-200 bg-amber-50 px-4 py-2 text-xs text-amber-900",children:"SMTP instellingen ontbreken. Voeg deze toe via profiel > systeem-instellingen."})]})]}),p==="klantpersonen"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Contactpersonen"}),e.jsx("div",{className:"text-xs text-zinc-500",children:"Meerdere contactpersonen per klant."})]}),e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold hover:bg-zinc-50",onClick:ie,children:"Nieuwe contactpersoon"})]}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-zinc-200 bg-white",children:e.jsxs("table",{className:"min-w-full divide-y divide-zinc-100",children:[e.jsx("thead",{className:"bg-zinc-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Naam"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Rol"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Contact"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Actief"}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsxs("tbody",{className:"divide-y divide-zinc-100",children:[K.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-10 text-center text-sm text-zinc-600",children:"Nog geen contactpersonen."})}),K.map(t=>e.jsxs("tr",{className:"hover:bg-zinc-50",children:[e.jsxs("td",{className:"px-4 py-3 text-sm",children:[e.jsxs("div",{className:"font-semibold",children:[t.voornaam," ",t.achternaam]}),t.is_primary&&e.jsx("div",{className:"mt-0.5 inline-flex rounded-full bg-indigo-50 px-2 py-0.5 text-xs font-semibold text-indigo-700",children:"Primair"})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-zinc-600",children:t.rol||"-"}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[e.jsx("div",{children:t.email}),e.jsx("div",{className:"text-xs text-zinc-500",children:t.telefoon||"-"})]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:t.active?"Ja":"Nee"}),e.jsxs("td",{className:"px-4 py-3 text-right text-sm",children:[e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-2 py-1 text-xs hover:bg-zinc-50",onClick:()=>ce(t),children:"Bewerken"}),e.jsx("button",{type:"button",className:"ml-2 rounded-md border border-rose-200 px-2 py-1 text-xs text-rose-700 hover:bg-rose-50",onClick:()=>xe(t.id),children:"Verwijderen"})]})]},t.id))]})]})}),re&&e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm font-semibold",children:R?"Contactpersoon bewerken":"Contactpersoon toevoegen"}),e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold hover:bg-zinc-50",onClick:oe,children:"Annuleren"})]}),e.jsxs("form",{onSubmit:me,className:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Voornaam *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:d.data.voornaam,onChange:t=>d.setData("voornaam",t.target.value)}),d.errors.voornaam&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:d.errors.voornaam})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Achternaam *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:d.data.achternaam,onChange:t=>d.setData("achternaam",t.target.value)}),d.errors.achternaam&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:d.errors.achternaam})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"E-mail *"}),e.jsx("input",{type:"email",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:d.data.email,onChange:t=>d.setData("email",t.target.value)}),d.errors.email&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:d.errors.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Telefoon"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:d.data.telefoon,onChange:t=>d.setData("telefoon",t.target.value)})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Rol"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:d.data.rol,onChange:t=>d.setData("rol",t.target.value),placeholder:"bijv. eigenaar, administratie, monteur"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300",checked:d.data.is_primary,onChange:t=>d.setData("is_primary",t.target.checked)}),e.jsx("span",{className:"text-sm",children:"Primair"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300",checked:d.data.active,onChange:t=>d.setData("active",t.target.checked)}),e.jsx("span",{className:"text-sm",children:"Actief"})]}),e.jsx("div",{className:"sm:col-span-2 flex justify-end",children:e.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700",disabled:d.processing,children:d.processing?"Opslaan...":"Opslaan"})})]})]})]}),p==="demo_status"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Demo & status"}),e.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:"Beheer statusflow en bijbehorende datums."})]}),e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-zinc-500",children:"Huidige status"}),e.jsx("div",{className:"mt-1 text-lg font-semibold",children:s.status})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm font-semibold hover:bg-zinc-50",onClick:()=>P("demo_aangevraagd"),children:"Naar demo aangevraagd"}),e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm font-semibold hover:bg-zinc-50",onClick:()=>P("demo_gepland"),children:"Naar demo gepland"}),e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm font-semibold hover:bg-zinc-50",onClick:()=>P("proefperiode"),children:"Naar proefperiode"}),e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm font-semibold hover:bg-zinc-50",onClick:()=>P("actief"),children:"Actief"})]})]}),!q&&e.jsx("div",{className:"mt-3 text-xs text-amber-800",children:"Let op: geen actief SEPA mandaat gekoppeld."})]}),e.jsxs("form",{onSubmit:_e,className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Demo aangevraagd op"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:m.data.demo_aangevraagd_op,onChange:t=>m.setData("demo_aangevraagd_op",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Demo gepland op"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:m.data.demo_gepland_op,onChange:t=>m.setData("demo_gepland_op",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Demo duur (dagen)"}),e.jsx("input",{type:"number",min:"1",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:m.data.demo_duur_dagen,onChange:t=>m.setData("demo_duur_dagen",t.target.value)}),e.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:"Einddatum wordt automatisch berekend."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Demo einddatum"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-200 bg-zinc-50 text-sm",value:Ne,disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Proefperiode start"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:m.data.proefperiode_start,onChange:t=>m.setData("proefperiode_start",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Actief vanaf"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:m.data.actief_vanaf,onChange:t=>m.setData("actief_vanaf",t.target.value)})]}),e.jsx("div",{className:"sm:col-span-2 flex justify-end",children:e.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700",disabled:m.processing,children:m.processing?"Opslaan...":"Datums opslaan"})})]}),e.jsxs("form",{onSubmit:ze,className:"rounded-xl border border-zinc-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold",children:"Demo verlengen"}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Verleng met (dagen)"}),e.jsx("input",{type:"number",min:"1",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:h.data.demo_verleng_dagen,onChange:t=>h.setData("demo_verleng_dagen",t.target.value)}),h.errors.demo_verleng_dagen&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:h.errors.demo_verleng_dagen})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Notitie (optioneel)"}),e.jsx("input",{type:"text",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:h.data.demo_verleng_notitie,onChange:t=>h.setData("demo_verleng_notitie",t.target.value)})]})]}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsx("button",{type:"submit",className:"rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm font-semibold hover:bg-zinc-50",disabled:h.processing,children:h.processing?"Bezig...":"Verleng demo"})})]})]}),p==="incasso"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Incasso (SEPA mandaten)"}),e.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:"0 of 1 actief mandaat per klant, historie blijft behouden."})]}),e.jsx("button",{type:"button",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700",onClick:we,children:"Nieuw mandaat"})]}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-zinc-200 bg-white",children:e.jsxs("table",{className:"min-w-full divide-y divide-zinc-100",children:[e.jsx("thead",{className:"bg-zinc-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Mandaat"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"IBAN"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Ontvangen"}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsxs("tbody",{className:"divide-y divide-zinc-100",children:[U.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-10 text-center text-sm text-zinc-600",children:"Nog geen mandaten."})}),U.map(t=>e.jsxs("tr",{className:"hover:bg-zinc-50",children:[e.jsxs("td",{className:"px-4 py-3 text-sm",children:[e.jsx("div",{className:"font-semibold",children:t.mandaat_id}),e.jsx("div",{className:"text-xs text-zinc-500",children:t.bedrijfsnaam})]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:t.iban}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:"inline-flex items-center rounded-full bg-zinc-100 px-2 py-0.5 text-xs font-semibold text-zinc-700",children:t.status})}),e.jsx("td",{className:"px-4 py-3 text-sm text-zinc-600",children:t.ontvangen_op?k(t.ontvangen_op):"—"}),e.jsxs("td",{className:"px-4 py-3 text-right text-sm",children:[e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-2 py-1 text-xs hover:bg-zinc-50",onClick:()=>De(t),children:"Bewerken"}),e.jsxs("div",{className:"mt-2 flex justify-end gap-2",children:[e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-2 py-1 text-xs hover:bg-zinc-50",onClick:()=>G(t.id,"pending"),children:"Pending"}),e.jsx("button",{type:"button",className:"rounded-md border border-emerald-200 px-2 py-1 text-xs text-emerald-700 hover:bg-emerald-50",onClick:()=>G(t.id,"actief"),children:"Actief"}),e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-2 py-1 text-xs hover:bg-zinc-50",onClick:()=>G(t.id,"ingetrokken"),children:"Ingetrokken"})]})]})]},t.id))]})]})}),ke&&e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm font-semibold",children:ye?"Mandaat bewerken":"Nieuw mandaat"}),e.jsx("button",{type:"button",className:"text-sm font-semibold text-zinc-600 hover:text-zinc-900",onClick:ee,children:"Sluiten"})]}),e.jsxs("form",{onSubmit:Se,className:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsx("input",{type:"hidden",value:n.data.mandate_id||""}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Bedrijfsnaam *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.bedrijfsnaam,onChange:t=>n.setData("bedrijfsnaam",t.target.value)}),n.errors.bedrijfsnaam&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:n.errors.bedrijfsnaam})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Voor- en achternaam *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.voor_en_achternaam,onChange:t=>n.setData("voor_en_achternaam",t.target.value)})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Straat + nummer *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.straatnaam_en_nummer,onChange:t=>n.setData("straatnaam_en_nummer",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Postcode *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.postcode,onChange:t=>n.setData("postcode",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Plaats *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.plaats,onChange:t=>n.setData("plaats",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Land"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.land,onChange:t=>n.setData("land",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"IBAN *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.iban,onChange:t=>n.setData("iban",t.target.value)}),n.errors.iban&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:n.errors.iban})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"BIC"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.bic,onChange:t=>n.setData("bic",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"E-mail *"}),e.jsx("input",{type:"email",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.email,onChange:t=>n.setData("email",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Telefoon *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.telefoonnummer,onChange:t=>n.setData("telefoonnummer",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Plaats van tekenen *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.plaats_van_tekenen,onChange:t=>n.setData("plaats_van_tekenen",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Datum van tekenen *"}),e.jsx("input",{type:"date",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.datum_van_tekenen,onChange:t=>n.setData("datum_van_tekenen",t.target.value)})]}),e.jsx("div",{className:"sm:col-span-2",children:e.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Ondertekening (typed naam)"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Ondertekenaar naam"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.ondertekenaar_naam,onChange:t=>n.setData("ondertekenaar_naam",t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300",checked:n.data.akkoord_checkbox,onChange:t=>n.setData("akkoord_checkbox",t.target.checked)}),e.jsx("span",{className:"text-sm",children:"Akkoord"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Akkoord op"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.akkoord_op,onChange:t=>n.setData("akkoord_op",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Ontvangen op"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.ontvangen_op,onChange:t=>n.setData("ontvangen_op",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Status"}),e.jsx("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:n.data.status,onChange:t=>n.setData("status",t.target.value),children:["pending","actief","ingetrokken"].map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"sm:col-span-2 flex justify-end gap-2",children:[e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold hover:bg-zinc-50",onClick:ee,children:"Annuleren"}),e.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700",disabled:n.processing,children:n.processing?"Opslaan...":"Opslaan"})]})]})]})]}),p==="modules"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Modules & prijzen"}),e.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:"Aantallen, prijzen en btw per module."})]}),e.jsx("button",{type:"button",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700",onClick:he,disabled:x.processing,children:x.processing?"Opslaan...":"Opslaan"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-4",children:[e.jsx("div",{className:"text-xs font-medium text-zinc-500",children:"Actieve modules"}),e.jsxs("div",{className:"mt-1 text-xl font-semibold",children:[g.actieveModules," / ",g.totaleModules]})]}),e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-4",children:[e.jsx("div",{className:"text-xs font-medium text-zinc-500",children:"Totaal excl. btw"}),e.jsx("div",{className:"mt-1 text-xl font-semibold",children:f(g.totaalExcl)})]}),e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-4",children:[e.jsx("div",{className:"text-xs font-medium text-zinc-500",children:"BTW"}),e.jsx("div",{className:"mt-1 text-xl font-semibold",children:f(g.btw)})]}),e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-4",children:[e.jsx("div",{className:"text-xs font-medium text-zinc-500",children:"Totaal incl. btw"}),e.jsx("div",{className:"mt-1 text-xl font-semibold",children:f(g.totaalIncl)})]})]}),e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-4 text-sm text-zinc-600",children:["Totaal: ",f(g.totaalExcl)," excl. btw · BTW ",f(g.btw)," ·"," ",f(g.totaalIncl)," incl. btw"]}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-zinc-200 bg-white",children:e.jsxs("table",{className:"min-w-full divide-y divide-zinc-100",children:[e.jsx("thead",{className:"bg-zinc-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Actief"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Module"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Aantal"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Prijs (excl. btw)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"BTW %"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Subtotaal"})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-100",children:x.data.rows.map((t,l)=>{const w=Math.max(1,Number(t.aantal||1)),v=H(t.prijs_maand_excl)*w,_=x.errors[`rows.${l}.aantal`],S=x.errors[`rows.${l}.prijs_maand_excl`],se=x.errors[`rows.${l}.btw_percentage`];return e.jsxs("tr",{className:t.actief?"":"bg-zinc-50/60",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300",checked:!!t.actief,onChange:()=>ue(l)})}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-zinc-900",children:t.naam}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("input",{type:"number",min:"0",className:"w-24 rounded-md border-zinc-300 text-sm",value:t.aantal,onChange:C=>D(l,"aantal",C.target.value)}),_&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:_})]}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-28 rounded-md border-zinc-300 text-sm",value:t.prijs_maand_excl,onChange:C=>D(l,"prijs_maand_excl",C.target.value)}),S&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:S})]}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",className:"w-20 rounded-md border-zinc-300 text-sm",value:t.btw_percentage,onChange:C=>D(l,"btw_percentage",C.target.value)}),se&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:se})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-zinc-700",children:t.actief?f(v):"—"})]},t.module_id)})})]})})]}),p==="gebruikers"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Gebruikers"}),e.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:"Accounts binnen deze garage."})]}),e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold hover:bg-zinc-50",onClick:pe,children:"Nieuwe gebruiker"})]}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-zinc-200 bg-white",children:e.jsxs("table",{className:"min-w-full divide-y divide-zinc-100",children:[e.jsx("thead",{className:"bg-zinc-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Naam"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"E-mail"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Rol"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Actief"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Aangemaakt"}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsxs("tbody",{className:"divide-y divide-zinc-100",children:[J.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-sm text-zinc-600",children:"Nog geen gebruikers."})}),J.map(t=>e.jsxs("tr",{className:"hover:bg-zinc-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-zinc-900",children:t.naam}),e.jsx("td",{className:"px-4 py-3 text-sm text-zinc-600",children:t.email}),e.jsx("td",{className:"px-4 py-3 text-sm text-zinc-600",children:t.rol_in_kivii||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:t.actief?"Ja":"Nee"}),e.jsx("td",{className:"px-4 py-3 text-sm text-zinc-600",children:Ie(t.aangemaakt_op)}),e.jsxs("td",{className:"px-4 py-3 text-right text-sm",children:[e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-2 py-1 text-xs hover:bg-zinc-50",onClick:()=>ve(t),children:"Bewerken"}),e.jsx("button",{type:"button",className:"ml-2 rounded-md border border-rose-200 px-2 py-1 text-xs text-rose-700 hover:bg-rose-50",onClick:()=>ge(t.id),children:"Verwijderen"})]})]},t.id))]})]})}),be&&e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm font-semibold",children:$?"Gebruiker bewerken":"Gebruiker toevoegen"}),e.jsx("button",{type:"button",className:"rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold hover:bg-zinc-50",onClick:je,children:"Annuleren"})]}),e.jsxs("form",{onSubmit:fe,className:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Naam *"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:r.data.naam,onChange:t=>r.setData("naam",t.target.value)}),r.errors.naam&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:r.errors.naam})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"E-mail *"}),e.jsx("input",{type:"email",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:r.data.email,onChange:t=>r.setData("email",t.target.value)}),r.errors.email&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:r.errors.email})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Rol"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:r.data.rol_in_kivii,onChange:t=>r.setData("rol_in_kivii",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Aangemaakt op"}),e.jsx("input",{type:"date",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:r.data.aangemaakt_op,onChange:t=>r.setData("aangemaakt_op",t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300",checked:r.data.actief,onChange:t=>r.setData("actief",t.target.checked)}),e.jsx("span",{className:"text-sm",children:"Actief"})]}),e.jsx("div",{className:"sm:col-span-2 flex justify-end",children:e.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700",disabled:r.processing,children:r.processing?"Opslaan...":"Opslaan"})})]})]})]}),p==="timeline"&&e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-5",children:[e.jsx("div",{className:"text-sm font-semibold",children:"Nieuwe notitie"}),e.jsxs("form",{onSubmit:Ce,className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Titel"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:b.data.titel,onChange:t=>b.setData("titel",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Notitie"}),e.jsx("textarea",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",rows:4,value:b.data.inhoud,onChange:t=>b.setData("inhoud",t.target.value)}),b.errors.inhoud&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:b.errors.inhoud})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700",disabled:b.processing,children:b.processing?"Opslaan...":"Notitie toevoegen"})})]})]})}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"space-y-4",children:[O.data.length===0&&e.jsx("div",{className:"rounded-xl border border-dashed border-zinc-200 bg-white p-8 text-center text-sm text-zinc-600",children:"Nog geen activiteiten."}),O.data.map(t=>e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:t.titel}),e.jsxs("div",{className:"mt-1 text-xs text-zinc-500",children:[t.type?t.type.replace("_"," "):"Activiteit"," ·"," ",k(t.created_at)]})]}),t.creator&&e.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:t.creator.name})]}),t.inhoud&&e.jsx("div",{className:"mt-3 text-sm text-zinc-700",children:t.inhoud}),(t.due_at||t.done_at)&&e.jsxs("div",{className:"mt-3 text-xs text-zinc-500",children:[t.due_at&&`Gepland: ${k(t.due_at)}`,t.done_at&&` · Afgerond: ${k(t.done_at)}`]})]},t.id))]}),e.jsx(Oe,{links:O.links})]})]}),p==="taken_afspraken"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-5",children:[e.jsx("div",{className:"text-sm font-semibold",children:"Nieuwe taak / afspraak"}),e.jsxs("form",{onSubmit:Ae,className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Type"}),e.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:o.data.type,onChange:t=>o.setData("type",t.target.value),children:[e.jsx("option",{value:"taak",children:"Taak"}),e.jsx("option",{value:"afspraak",children:"Afspraak"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Titel"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:o.data.titel,onChange:t=>o.setData("titel",t.target.value)}),o.errors.titel&&e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:o.errors.titel})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Omschrijving"}),e.jsx("textarea",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",rows:3,value:o.data.inhoud,onChange:t=>o.setData("inhoud",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Planning"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:o.data.due_at,onChange:t=>o.setData("due_at",t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300",checked:o.data.createReminder,onChange:t=>o.setData("createReminder",t.target.checked)}),e.jsx("span",{className:"text-sm",children:"Reminder instellen"})]}),o.data.createReminder&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Reminder tijd"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:o.data.remind_at,onChange:t=>o.setData("remind_at",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Kanaal"}),e.jsx("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:o.data.channel,onChange:t=>o.setData("channel",t.target.value),children:T.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700",disabled:o.processing,children:o.processing?"Opslaan...":"Opslaan"})})]})]})}),e.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Open taken"}),e.jsxs("div",{className:"mt-3 space-y-3",children:[Y.length===0&&e.jsx("div",{className:"rounded-xl border border-dashed border-zinc-200 bg-white p-6 text-center text-sm text-zinc-600",children:"Geen open taken."}),Y.map(t=>e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:t.titel}),t.inhoud&&e.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:t.inhoud})]}),e.jsx("button",{type:"button",className:"rounded-md border border-emerald-200 px-2 py-1 text-xs text-emerald-700 hover:bg-emerald-50",onClick:()=>te(t.id),children:"Afgerond"})]}),t.due_at&&e.jsxs("div",{className:"mt-2 text-xs text-zinc-500",children:["Planning: ",k(t.due_at)]})]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Open afspraken"}),e.jsxs("div",{className:"mt-3 space-y-3",children:[Z.length===0&&e.jsx("div",{className:"rounded-xl border border-dashed border-zinc-200 bg-white p-6 text-center text-sm text-zinc-600",children:"Geen open afspraken."}),Z.map(t=>e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:t.titel}),t.inhoud&&e.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:t.inhoud})]}),e.jsx("button",{type:"button",className:"rounded-md border border-emerald-200 px-2 py-1 text-xs text-emerald-700 hover:bg-emerald-50",onClick:()=>te(t.id),children:"Afgerond"})]}),t.due_at&&e.jsxs("div",{className:"mt-2 text-xs text-zinc-500",children:["Planning: ",k(t.due_at)]})]},t.id))]})]})]})]})})]})}export{Le as default};
