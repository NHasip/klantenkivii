import{u as h,a as u,j as e,H as j,L as n,b as c}from"./app-DGSx-slH.js";import"./module.esm-CDoHWUqT.js";function p(s){try{return new Intl.NumberFormat("nl-NL",{style:"currency",currency:"EUR"}).format(s??0)}catch{return`EUR ${Number(s??0).toFixed(2)}`.replace(".",",")}}function b(s){if(!s)return"—";try{return new Intl.DateTimeFormat("nl-NL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(s))}catch{return String(s)}}function f(...s){return s.filter(Boolean).join(" ")}function g({links:s}){return!s||s.length<=1?null:e.jsx("div",{className:"mt-6 flex flex-wrap gap-2",children:s.map((a,i)=>e.jsx(n,{href:a.url||"#",className:f("rounded-md border px-3 py-1.5 text-sm",a.active?"border-indigo-600 bg-indigo-600 text-white":"border-zinc-200 text-zinc-700 hover:bg-zinc-50",!a.url&&"cursor-not-allowed opacity-50"),dangerouslySetInnerHTML:{__html:a.label}},`${a.label}-${i}`))})}function y({companies:s,filters:a,statusOptions:i,sourceOptions:v,urls:d}){const x=h(),{data:r,setData:l}=u({search:a.search||"",status:a.status||"alle",tag:a.tag||"",sort:a.sort||"updated_desc",perPage:a.perPage||s.per_page||15}),o=async t=>{await x({title:"Klant verwijderen",message:`Weet je zeker dat je "${t.bedrijfsnaam}" wilt verwijderen?`,confirmText:"Verwijder",cancelText:"Annuleren",tone:"danger"})&&c.delete(t.delete_url,{preserveScroll:!0})},m=t=>{t.preventDefault(),c.get(d.index,r,{preserveState:!0,replace:!0})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(j,{title:"Klanten"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-zinc-900",children:"Klanten"}),e.jsx("p",{className:"mt-1 text-sm text-zinc-500",children:"Overzicht van garagebedrijven en hun status."})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(n,{href:d.create,className:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700",children:"Nieuwe klant"})})]}),e.jsx("form",{onSubmit:m,className:"rounded-xl border border-zinc-200 bg-white p-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Zoek"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:r.search,onChange:t=>l("search",t.target.value),placeholder:"Bedrijfsnaam, email, IBAN..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Status"}),e.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:r.status,onChange:t=>l("status",t.target.value),children:[e.jsx("option",{value:"alle",children:"Alle"}),i.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Tag"}),e.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:r.tag,onChange:t=>l("tag",t.target.value),placeholder:"bijv. premium"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Sortering"}),e.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:r.sort,onChange:t=>l("sort",t.target.value),children:[e.jsx("option",{value:"updated_desc",children:"Laatst bijgewerkt"}),e.jsx("option",{value:"actief_vanaf_desc",children:"Actief vanaf (nieuwste)"}),e.jsx("option",{value:"omzet_desc",children:"Omzet (hoog-laag)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-600",children:"Per pagina"}),e.jsx("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:r.perPage,onChange:t=>l("perPage",t.target.value),children:[10,15,25,50].map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"flex items-end justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-zinc-500",children:["Totaal: ",s.total," bedrijven"]}),e.jsx("button",{type:"submit",className:"rounded-md bg-zinc-900 px-3 py-2 text-sm font-semibold text-white hover:bg-zinc-800",children:"Filter"})]})]})}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-zinc-200 bg-white",children:e.jsxs("table",{className:"min-w-full divide-y divide-zinc-100",children:[e.jsx("thead",{className:"bg-zinc-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Bedrijf"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Contact"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Gebruikers"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Omzet excl."}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-600",children:"Laatst bijgewerkt"}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-100",children:s.data.map(t=>e.jsxs("tr",{className:"hover:bg-zinc-50",children:[e.jsxs("td",{className:"px-4 py-3 text-sm font-semibold",children:[e.jsx("div",{children:t.bedrijfsnaam}),e.jsx("div",{className:"text-xs text-zinc-500",children:t.plaats||"—"})]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:"inline-flex rounded-full bg-indigo-50 px-2 py-0.5 text-xs font-semibold text-indigo-700",children:t.status})}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[e.jsx("div",{children:t.hoofd_email}),e.jsx("div",{className:"text-xs text-zinc-500",children:t.hoofd_telefoon||"—"})]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:t.actieve_seats}),e.jsx("td",{className:"px-4 py-3 text-sm",children:p(t.omzet_excl)}),e.jsx("td",{className:"px-4 py-3 text-sm text-zinc-600",children:b(t.updated_at)}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(n,{href:t.show_url,className:"rounded-md border border-zinc-200 px-2 py-1 text-xs hover:bg-zinc-50",children:"Open"}),e.jsx("button",{type:"button",onClick:()=>o(t),className:"rounded-md border border-rose-200 px-2 py-1 text-xs text-rose-600 hover:bg-rose-50",children:"Verwijder"})]})})]},t.id))})]})}),e.jsx(g,{links:s.links})]})}export{y as default};
