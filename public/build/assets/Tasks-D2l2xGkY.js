import{r as l,R as F,d as bt,j as r,H as rs}from"./app-CX1JvnYO.js";import{a as Me}from"./module.esm-CDoHWUqT.js";function is(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo(()=>s=>{t.forEach(i=>i(s))},t)}const Wt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ut(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function cn(e){return"nodeType"in e}function oe(e){var t,n;return e?ut(e)?e:cn(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function dn(e){const{Document:t}=oe(e);return e instanceof t}function zt(e){return ut(e)?!1:e instanceof oe(e).HTMLElement}function Tn(e){return e instanceof oe(e).SVGElement}function ft(e){return e?ut(e)?e.document:cn(e)?dn(e)?e:zt(e)||Tn(e)?e.ownerDocument:document:document:document}const ke=Wt?l.useLayoutEffect:l.useEffect;function Vt(e){const t=l.useRef(e);return ke(()=>{t.current=e}),l.useCallback(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t.current==null?void 0:t.current(...s)},[])}function os(){const e=l.useRef(null),t=l.useCallback((s,i)=>{e.current=setInterval(s,i)},[]),n=l.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Ct(e,t){t===void 0&&(t=[e]);const n=l.useRef(e);return ke(()=>{n.current!==e&&(n.current=e)},t),n}function kt(e,t){const n=l.useRef();return l.useMemo(()=>{const s=e(n.current);return n.current=s,s},[...t])}function Xt(e){const t=Vt(e),n=l.useRef(null),s=l.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,s]}function Yt(e){const t=l.useRef();return l.useEffect(()=>{t.current=e},[e]),t.current}let tn={};function Rt(e,t){return l.useMemo(()=>{if(t)return t;const n=tn[e]==null?0:tn[e]+1;return tn[e]=n,e+"-"+n},[e,t])}function An(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return s.reduce((o,d)=>{const c=Object.entries(d);for(const[u,f]of c){const h=o[u];h!=null&&(o[u]=h+e*f)}return o},{...t})}}const dt=An(1),Ut=An(-1);function as(e){return"clientX"in e&&"clientY"in e}function qt(e){if(!e)return!1;const{KeyboardEvent:t}=oe(e.target);return t&&e instanceof t}function ls(e){if(!e)return!1;const{TouchEvent:t}=oe(e.target);return t&&e instanceof t}function Kt(e){if(ls(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return as(e)?{x:e.clientX,y:e.clientY}:null}const Ze=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ze.Translate.toString(e),Ze.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:s}=e;return t+" "+n+"ms "+s}}}),bn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function cs(e){return e.matches(bn)?e:e.querySelector(bn)}const ds={display:"none"};function us(e){let{id:t,value:n}=e;return F.createElement("div",{id:t,style:ds},n)}function fs(e){let{id:t,announcement:n,ariaLiveType:s="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return F.createElement("div",{id:t,style:i,role:"status","aria-live":s,"aria-atomic":!0},n)}function ms(){const[e,t]=l.useState("");return{announce:l.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const Mn=l.createContext(null);function hs(e){const t=l.useContext(Mn);l.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function gs(){const[e]=l.useState(()=>new Set),t=l.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[l.useCallback(s=>{let{type:i,event:o}=s;e.forEach(d=>{var c;return(c=d[i])==null?void 0:c.call(d,o)})},[e]),t]}const ps={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},xs={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function vs(e){let{announcements:t=xs,container:n,hiddenTextDescribedById:s,screenReaderInstructions:i=ps}=e;const{announce:o,announcement:d}=ms(),c=Rt("DndLiveRegion"),[u,f]=l.useState(!1);if(l.useEffect(()=>{f(!0)},[]),hs(l.useMemo(()=>({onDragStart(m){let{active:x}=m;o(t.onDragStart({active:x}))},onDragMove(m){let{active:x,over:p}=m;t.onDragMove&&o(t.onDragMove({active:x,over:p}))},onDragOver(m){let{active:x,over:p}=m;o(t.onDragOver({active:x,over:p}))},onDragEnd(m){let{active:x,over:p}=m;o(t.onDragEnd({active:x,over:p}))},onDragCancel(m){let{active:x,over:p}=m;o(t.onDragCancel({active:x,over:p}))}}),[o,t])),!u)return null;const h=F.createElement(F.Fragment,null,F.createElement(us,{id:s,value:i.draggable}),F.createElement(fs,{id:c,announcement:d}));return n?bt.createPortal(h,n):h}var K;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(K||(K={}));function Ht(){}function bs(e,t){return l.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function ys(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const Re=Object.freeze({x:0,y:0});function js(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ws(e,t){const n=Kt(e);if(!n)return"0 0";const s={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return s.x+"% "+s.y+"%"}function Ns(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return n-s}function Cs(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return s-n}function yn(e){let{left:t,top:n,height:s,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+s},{x:t+i,y:n+s}]}function Ss(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}const Ds=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const i=yn(t),o=[];for(const d of s){const{id:c}=d,u=n.get(c);if(u){const f=yn(u),h=i.reduce((x,p,C)=>x+js(f[C],p),0),m=Number((h/4).toFixed(4));o.push({id:c,data:{droppableContainer:d,value:m}})}}return o.sort(Ns)};function zs(e,t){const n=Math.max(t.top,e.top),s=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),d=i-s,c=o-n;if(s<i&&n<o){const u=t.width*t.height,f=e.width*e.height,h=d*c,m=h/(u+f-h);return Number(m.toFixed(4))}return 0}const ks=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const i=[];for(const o of s){const{id:d}=o,c=n.get(d);if(c){const u=zs(c,t);u>0&&i.push({id:d,data:{droppableContainer:o,value:u}})}}return i.sort(Cs)};function Rs(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Ln(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Re}function Es(e){return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];return i.reduce((d,c)=>({...d,top:d.top+e*c.y,bottom:d.bottom+e*c.y,left:d.left+e*c.x,right:d.right+e*c.x}),{...n})}}const Is=Es(1);function Pn(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Os(e,t,n){const s=Pn(t);if(!s)return e;const{scaleX:i,scaleY:o,x:d,y:c}=s,u=e.left-d-(1-i)*parseFloat(n),f=e.top-c-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?e.width/i:e.width,m=o?e.height/o:e.height;return{width:h,height:m,top:f,right:u+h,bottom:f+m,left:u}}const Ts={ignoreTransform:!1};function mt(e,t){t===void 0&&(t=Ts);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:h}=oe(e).getComputedStyle(e);f&&(n=Os(n,f,h))}const{top:s,left:i,width:o,height:d,bottom:c,right:u}=n;return{top:s,left:i,width:o,height:d,bottom:c,right:u}}function jn(e){return mt(e,{ignoreTransform:!0})}function As(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Ms(e,t){return t===void 0&&(t=oe(e).getComputedStyle(e)),t.position==="fixed"}function Ls(e,t){t===void 0&&(t=oe(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=t[i];return typeof o=="string"?n.test(o):!1})}function un(e,t){const n=[];function s(i){if(t!=null&&n.length>=t||!i)return n;if(dn(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!zt(i)||Tn(i)||n.includes(i))return n;const o=oe(e).getComputedStyle(i);return i!==e&&Ls(i,o)&&n.push(i),Ms(i,o)?n:s(i.parentNode)}return e?s(e):n}function Bn(e){const[t]=un(e,1);return t??null}function nn(e){return!Wt||!e?null:ut(e)?e:cn(e)?dn(e)||e===ft(e).scrollingElement?window:zt(e)?e:null:null}function _n(e){return ut(e)?e.scrollX:e.scrollLeft}function Fn(e){return ut(e)?e.scrollY:e.scrollTop}function on(e){return{x:_n(e),y:Fn(e)}}var W;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(W||(W={}));function $n(e){return!Wt||!e?!1:e===document.scrollingElement}function Xn(e){const t={x:0,y:0},n=$n(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,d=e.scrollTop>=s.y,c=e.scrollLeft>=s.x;return{isTop:i,isLeft:o,isBottom:d,isRight:c,maxScroll:s,minScroll:t}}const Ps={x:.2,y:.2};function Bs(e,t,n,s,i){let{top:o,left:d,right:c,bottom:u}=n;s===void 0&&(s=10),i===void 0&&(i=Ps);const{isTop:f,isBottom:h,isLeft:m,isRight:x}=Xn(e),p={x:0,y:0},C={x:0,y:0},b={height:t.height*i.y,width:t.width*i.x};return!f&&o<=t.top+b.height?(p.y=W.Backward,C.y=s*Math.abs((t.top+b.height-o)/b.height)):!h&&u>=t.bottom-b.height&&(p.y=W.Forward,C.y=s*Math.abs((t.bottom-b.height-u)/b.height)),!x&&c>=t.right-b.width?(p.x=W.Forward,C.x=s*Math.abs((t.right-b.width-c)/b.width)):!m&&d<=t.left+b.width&&(p.x=W.Backward,C.x=s*Math.abs((t.left+b.width-d)/b.width)),{direction:p,speed:C}}function _s(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:d}=window;return{top:0,left:0,right:o,bottom:d,width:o,height:d}}const{top:t,left:n,right:s,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:s,bottom:i,width:e.clientWidth,height:e.clientHeight}}function Yn(e){return e.reduce((t,n)=>dt(t,on(n)),Re)}function Fs(e){return e.reduce((t,n)=>t+_n(n),0)}function $s(e){return e.reduce((t,n)=>t+Fn(n),0)}function Un(e,t){if(t===void 0&&(t=mt),!e)return;const{top:n,left:s,bottom:i,right:o}=t(e);Bn(e)&&(i<=0||o<=0||n>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Xs=[["x",["left","right"],Fs],["y",["top","bottom"],$s]];class fn{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=un(n),i=Yn(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,d,c]of Xs)for(const u of d)Object.defineProperty(this,u,{get:()=>{const f=c(s),h=i[o]-f;return this.rect[u]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class jt{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=t}add(t,n,s){var i;(i=this.target)==null||i.addEventListener(t,n,s),this.listeners.push([t,n,s])}}function Ys(e){const{EventTarget:t}=oe(e);return e instanceof t?e:ft(e)}function sn(e,t){const n=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+s**2)>t:"x"in t&&"y"in t?n>t.x&&s>t.y:"x"in t?n>t.x:"y"in t?s>t.y:!1}var we;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(we||(we={}));function wn(e){e.preventDefault()}function Us(e){e.stopPropagation()}var T;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(T||(T={}));const Kn={start:[T.Space,T.Enter],cancel:[T.Esc],end:[T.Space,T.Enter,T.Tab]},Ks=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case T.Right:return{...n,x:n.x+25};case T.Left:return{...n,x:n.x-25};case T.Down:return{...n,y:n.y+25};case T.Up:return{...n,y:n.y-25}}};class Hn{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new jt(ft(n)),this.windowListeners=new jt(oe(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(we.Resize,this.handleCancel),this.windowListeners.add(we.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(we.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,s=t.node.current;s&&Un(s),n(Re)}handleKeyDown(t){if(qt(t)){const{active:n,context:s,options:i}=this.props,{keyboardCodes:o=Kn,coordinateGetter:d=Ks,scrollBehavior:c="smooth"}=i,{code:u}=t;if(o.end.includes(u)){this.handleEnd(t);return}if(o.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:f}=s.current,h=f?{x:f.left,y:f.top}:Re;this.referenceCoordinates||(this.referenceCoordinates=h);const m=d(t,{active:n,context:s.current,currentCoordinates:h});if(m){const x=Ut(m,h),p={x:0,y:0},{scrollableAncestors:C}=s.current;for(const b of C){const j=t.code,{isTop:S,isRight:z,isLeft:w,isBottom:E,maxScroll:R,minScroll:I}=Xn(b),D=_s(b),k={x:Math.min(j===T.Right?D.right-D.width/2:D.right,Math.max(j===T.Right?D.left:D.left+D.width/2,m.x)),y:Math.min(j===T.Down?D.bottom-D.height/2:D.bottom,Math.max(j===T.Down?D.top:D.top+D.height/2,m.y))},P=j===T.Right&&!z||j===T.Left&&!w,$=j===T.Down&&!E||j===T.Up&&!S;if(P&&k.x!==m.x){const A=b.scrollLeft+x.x,ue=j===T.Right&&A<=R.x||j===T.Left&&A>=I.x;if(ue&&!x.y){b.scrollTo({left:A,behavior:c});return}ue?p.x=b.scrollLeft-A:p.x=j===T.Right?b.scrollLeft-R.x:b.scrollLeft-I.x,p.x&&b.scrollBy({left:-p.x,behavior:c});break}else if($&&k.y!==m.y){const A=b.scrollTop+x.y,ue=j===T.Down&&A<=R.y||j===T.Up&&A>=I.y;if(ue&&!x.x){b.scrollTo({top:A,behavior:c});return}ue?p.y=b.scrollTop-A:p.y=j===T.Down?b.scrollTop-R.y:b.scrollTop-I.y,p.y&&b.scrollBy({top:-p.y,behavior:c});break}}this.handleMove(t,dt(Ut(m,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:s}=this.props;t.preventDefault(),s(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Hn.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:s=Kn,onActivation:i}=t,{active:o}=n;const{code:d}=e.nativeEvent;if(s.start.includes(d)){const c=o.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function Nn(e){return!!(e&&"distance"in e)}function Cn(e){return!!(e&&"delay"in e)}class mn{constructor(t,n,s){var i;s===void 0&&(s=Ys(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:d}=o;this.props=t,this.events=n,this.document=ft(d),this.documentListeners=new jt(this.document),this.listeners=new jt(s),this.windowListeners=new jt(oe(d)),this.initialCoordinates=(i=Kt(o))!=null?i:Re,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(we.Resize,this.handleCancel),this.windowListeners.add(we.DragStart,wn),this.windowListeners.add(we.VisibilityChange,this.handleCancel),this.windowListeners.add(we.ContextMenu,wn),this.documentListeners.add(we.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Cn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Nn(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:s,onPending:i}=this.props;i(s,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(we.Click,Us,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(we.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:s,initialCoordinates:i,props:o}=this,{onMove:d,options:{activationConstraint:c}}=o;if(!i)return;const u=(n=Kt(t))!=null?n:Re,f=Ut(i,u);if(!s&&c){if(Nn(c)){if(c.tolerance!=null&&sn(f,c.tolerance))return this.handleCancel();if(sn(f,c.distance))return this.handleStart()}if(Cn(c)&&sn(f,c.tolerance))return this.handleCancel();this.handlePending(c,f);return}t.cancelable&&t.preventDefault(),d(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===T.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Hs={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class hn extends mn{constructor(t){const{event:n}=t,s=ft(n.target);super(t,Hs,s)}}hn.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return!n.isPrimary||n.button!==0?!1:(s==null||s({event:n}),!0)}}];const Gs={move:{name:"mousemove"},end:{name:"mouseup"}};var an;(function(e){e[e.RightClick=2]="RightClick"})(an||(an={}));class Ws extends mn{constructor(t){super(t,Gs,ft(t.event.target))}}Ws.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return n.button===an.RightClick?!1:(s==null||s({event:n}),!0)}}];const rn={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Vs extends mn{constructor(t){super(t,rn)}static setup(){return window.addEventListener(rn.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(rn.move.name,t)};function t(){}}}Vs.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;const{touches:i}=n;return i.length>1?!1:(s==null||s({event:n}),!0)}}];var wt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(wt||(wt={}));var Gt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Gt||(Gt={}));function qs(e){let{acceleration:t,activator:n=wt.Pointer,canScroll:s,draggingRect:i,enabled:o,interval:d=5,order:c=Gt.TreeOrder,pointerCoordinates:u,scrollableAncestors:f,scrollableAncestorRects:h,delta:m,threshold:x}=e;const p=Qs({delta:m,disabled:!o}),[C,b]=os(),j=l.useRef({x:0,y:0}),S=l.useRef({x:0,y:0}),z=l.useMemo(()=>{switch(n){case wt.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case wt.DraggableRect:return i}},[n,i,u]),w=l.useRef(null),E=l.useCallback(()=>{const I=w.current;if(!I)return;const D=j.current.x*S.current.x,k=j.current.y*S.current.y;I.scrollBy(D,k)},[]),R=l.useMemo(()=>c===Gt.TreeOrder?[...f].reverse():f,[c,f]);l.useEffect(()=>{if(!o||!f.length||!z){b();return}for(const I of R){if((s==null?void 0:s(I))===!1)continue;const D=f.indexOf(I),k=h[D];if(!k)continue;const{direction:P,speed:$}=Bs(I,k,z,t,x);for(const A of["x","y"])p[A][P[A]]||($[A]=0,P[A]=0);if($.x>0||$.y>0){b(),w.current=I,C(E,d),j.current=$,S.current=P;return}}j.current={x:0,y:0},S.current={x:0,y:0},b()},[t,E,s,b,o,d,JSON.stringify(z),JSON.stringify(p),C,f,R,h,JSON.stringify(x)])}const Js={x:{[W.Backward]:!1,[W.Forward]:!1},y:{[W.Backward]:!1,[W.Forward]:!1}};function Qs(e){let{delta:t,disabled:n}=e;const s=Yt(t);return kt(i=>{if(n||!s||!i)return Js;const o={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[W.Backward]:i.x[W.Backward]||o.x===-1,[W.Forward]:i.x[W.Forward]||o.x===1},y:{[W.Backward]:i.y[W.Backward]||o.y===-1,[W.Forward]:i.y[W.Forward]||o.y===1}}},[n,t,s])}function Zs(e,t){const n=t!=null?e.get(t):void 0,s=n?n.node.current:null;return kt(i=>{var o;return t==null?null:(o=s??i)!=null?o:null},[s,t])}function er(e,t){return l.useMemo(()=>e.reduce((n,s)=>{const{sensor:i}=s,o=i.activators.map(d=>({eventName:d.eventName,handler:t(d.handler,s)}));return[...n,...o]},[]),[e,t])}var St;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(St||(St={}));var ln;(function(e){e.Optimized="optimized"})(ln||(ln={}));const Sn=new Map;function tr(e,t){let{dragging:n,dependencies:s,config:i}=t;const[o,d]=l.useState(null),{frequency:c,measure:u,strategy:f}=i,h=l.useRef(e),m=j(),x=Ct(m),p=l.useCallback(function(S){S===void 0&&(S=[]),!x.current&&d(z=>z===null?S:z.concat(S.filter(w=>!z.includes(w))))},[x]),C=l.useRef(null),b=kt(S=>{if(m&&!n)return Sn;if(!S||S===Sn||h.current!==e||o!=null){const z=new Map;for(let w of e){if(!w)continue;if(o&&o.length>0&&!o.includes(w.id)&&w.rect.current){z.set(w.id,w.rect.current);continue}const E=w.node.current,R=E?new fn(u(E),E):null;w.rect.current=R,R&&z.set(w.id,R)}return z}return S},[e,o,n,m,u]);return l.useEffect(()=>{h.current=e},[e]),l.useEffect(()=>{m||p()},[n,m]),l.useEffect(()=>{o&&o.length>0&&d(null)},[JSON.stringify(o)]),l.useEffect(()=>{m||typeof c!="number"||C.current!==null||(C.current=setTimeout(()=>{p(),C.current=null},c))},[c,m,p,...s]),{droppableRects:b,measureDroppableContainers:p,measuringScheduled:o!=null};function j(){switch(f){case St.Always:return!1;case St.BeforeDragging:return n;default:return!n}}}function gn(e,t){return kt(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function nr(e,t){return gn(e,t)}function sr(e){let{callback:t,disabled:n}=e;const s=Vt(t),i=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(s)},[s,n]);return l.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Jt(e){let{callback:t,disabled:n}=e;const s=Vt(t),i=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(s)},[n]);return l.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function rr(e){return new fn(mt(e),e)}function Dn(e,t,n){t===void 0&&(t=rr);const[s,i]=l.useState(null);function o(){i(u=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=u??n)!=null?f:null}const h=t(e);return JSON.stringify(u)===JSON.stringify(h)?u:h})}const d=sr({callback(u){if(e)for(const f of u){const{type:h,target:m}=f;if(h==="childList"&&m instanceof HTMLElement&&m.contains(e)){o();break}}}}),c=Jt({callback:o});return ke(()=>{o(),e?(c==null||c.observe(e),d==null||d.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),d==null||d.disconnect())},[e]),s}function ir(e){const t=gn(e);return Ln(e,t)}const zn=[];function or(e){const t=l.useRef(e),n=kt(s=>e?s&&s!==zn&&e&&t.current&&e.parentNode===t.current.parentNode?s:un(e):zn,[e]);return l.useEffect(()=>{t.current=e},[e]),n}function ar(e){const[t,n]=l.useState(null),s=l.useRef(e),i=l.useCallback(o=>{const d=nn(o.target);d&&n(c=>c?(c.set(d,on(d)),new Map(c)):null)},[]);return l.useEffect(()=>{const o=s.current;if(e!==o){d(o);const c=e.map(u=>{const f=nn(u);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,on(f)]):null}).filter(u=>u!=null);n(c.length?new Map(c):null),s.current=e}return()=>{d(e),d(o)};function d(c){c.forEach(u=>{const f=nn(u);f==null||f.removeEventListener("scroll",i)})}},[i,e]),l.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,d)=>dt(o,d),Re):Yn(e):Re,[e,t])}function kn(e,t){t===void 0&&(t=[]);const n=l.useRef(null);return l.useEffect(()=>{n.current=null},t),l.useEffect(()=>{const s=e!==Re;s&&!n.current&&(n.current=e),!s&&n.current&&(n.current=null)},[e]),n.current?Ut(e,n.current):Re}function lr(e){l.useEffect(()=>{if(!Wt)return;const t=e.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function cr(e,t){return l.useMemo(()=>e.reduce((n,s)=>{let{eventName:i,handler:o}=s;return n[i]=d=>{o(d,t)},n},{}),[e,t])}function Gn(e){return l.useMemo(()=>e?As(e):null,[e])}const Rn=[];function dr(e,t){t===void 0&&(t=mt);const[n]=e,s=Gn(n?oe(n):null),[i,o]=l.useState(Rn);function d(){o(()=>e.length?e.map(u=>$n(u)?s:new fn(t(u),u)):Rn)}const c=Jt({callback:d});return ke(()=>{c==null||c.disconnect(),d(),e.forEach(u=>c==null?void 0:c.observe(u))},[e]),i}function Wn(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return zt(t)?t:e}function ur(e){let{measure:t}=e;const[n,s]=l.useState(null),i=l.useCallback(f=>{for(const{target:h}of f)if(zt(h)){s(m=>{const x=t(h);return m?{...m,width:x.width,height:x.height}:x});break}},[t]),o=Jt({callback:i}),d=l.useCallback(f=>{const h=Wn(f);o==null||o.disconnect(),h&&(o==null||o.observe(h)),s(h?t(h):null)},[t,o]),[c,u]=Xt(d);return l.useMemo(()=>({nodeRef:c,rect:n,setRef:u}),[n,c,u])}const fr=[{sensor:hn,options:{}},{sensor:Hn,options:{}}],mr={current:{}},$t={draggable:{measure:jn},droppable:{measure:jn,strategy:St.WhileDragging,frequency:ln.Optimized},dragOverlay:{measure:mt}};class Nt extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,s;return(n=(s=this.get(t))==null?void 0:s.node.current)!=null?n:void 0}}const hr={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Nt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ht},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:$t,measureDroppableContainers:Ht,windowRect:null,measuringScheduled:!1},Vn={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ht,draggableNodes:new Map,over:null,measureDroppableContainers:Ht},Et=l.createContext(Vn),qn=l.createContext(hr);function gr(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Nt}}}function pr(e,t){switch(t.type){case K.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case K.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case K.DragEnd:case K.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case K.RegisterDroppable:{const{element:n}=t,{id:s}=n,i=new Nt(e.droppable.containers);return i.set(s,n),{...e,droppable:{...e.droppable,containers:i}}}case K.SetDroppableDisabled:{const{id:n,key:s,disabled:i}=t,o=e.droppable.containers.get(n);if(!o||s!==o.key)return e;const d=new Nt(e.droppable.containers);return d.set(n,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:d}}}case K.UnregisterDroppable:{const{id:n,key:s}=t,i=e.droppable.containers.get(n);if(!i||s!==i.key)return e;const o=new Nt(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function xr(e){let{disabled:t}=e;const{active:n,activatorEvent:s,draggableNodes:i}=l.useContext(Et),o=Yt(s),d=Yt(n==null?void 0:n.id);return l.useEffect(()=>{if(!t&&!s&&o&&d!=null){if(!qt(o)||document.activeElement===o.target)return;const c=i.get(d);if(!c)return;const{activatorNode:u,node:f}=c;if(!u.current&&!f.current)return;requestAnimationFrame(()=>{for(const h of[u.current,f.current]){if(!h)continue;const m=cs(h);if(m){m.focus();break}}})}},[s,t,i,d,o]),null}function Jn(e,t){let{transform:n,...s}=t;return e!=null&&e.length?e.reduce((i,o)=>o({transform:i,...s}),n):n}function vr(e){return l.useMemo(()=>({draggable:{...$t.draggable,...e==null?void 0:e.draggable},droppable:{...$t.droppable,...e==null?void 0:e.droppable},dragOverlay:{...$t.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function br(e){let{activeNode:t,measure:n,initialRect:s,config:i=!0}=e;const o=l.useRef(!1),{x:d,y:c}=typeof i=="boolean"?{x:i,y:i}:i;ke(()=>{if(!d&&!c||!t){o.current=!1;return}if(o.current||!s)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const h=n(f),m=Ln(h,s);if(d||(m.x=0),c||(m.y=0),o.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const x=Bn(f);x&&x.scrollBy({top:m.y,left:m.x})}},[t,d,c,s,n])}const Qt=l.createContext({...Re,scaleX:1,scaleY:1});var Qe;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Qe||(Qe={}));const yr=l.memo(function(t){var n,s,i,o;let{id:d,accessibility:c,autoScroll:u=!0,children:f,sensors:h=fr,collisionDetection:m=ks,measuring:x,modifiers:p,...C}=t;const b=l.useReducer(pr,void 0,gr),[j,S]=b,[z,w]=gs(),[E,R]=l.useState(Qe.Uninitialized),I=E===Qe.Initialized,{draggable:{active:D,nodes:k,translate:P},droppable:{containers:$}}=j,A=D!=null?k.get(D):null,ue=l.useRef({initial:null,translated:null}),fe=l.useMemo(()=>{var Y;return D!=null?{id:D,data:(Y=A==null?void 0:A.data)!=null?Y:mr,rect:ue}:null},[D,A]),me=l.useRef(null),[Pe,V]=l.useState(null),[re,Be]=l.useState(null),Z=Ct(C,Object.values(C)),Ne=Rt("DndDescribedBy",d),et=l.useMemo(()=>$.getEnabled(),[$]),q=vr(x),{droppableRects:ge,measureDroppableContainers:Ee,measuringScheduled:tt}=tr(et,{dragging:I,dependencies:[P.x,P.y],config:q.droppable}),J=Zs(k,D),_=l.useMemo(()=>re?Kt(re):null,[re]),H=Lt(),pe=nr(J,q.draggable.measure);br({activeNode:D!=null?k.get(D):null,config:H.layoutShiftCompensation,initialRect:pe,measure:q.draggable.measure});const O=Dn(J,q.draggable.measure,pe),He=Dn(J?J.parentElement:null),he=l.useRef({activatorEvent:null,active:null,activeNode:J,collisionRect:null,collisions:null,droppableRects:ge,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:$,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),_e=$.getNodeFor((n=he.current.over)==null?void 0:n.id),xe=ur({measure:q.dragOverlay.measure}),ee=(s=xe.nodeRef.current)!=null?s:J,Fe=I?(i=xe.rect)!=null?i:O:null,M=!!(xe.nodeRef.current&&xe.rect),te=ir(M?null:O),ht=Gn(ee?oe(ee):null),Ce=or(I?_e??J:null),nt=dr(Ce),st=Jn(p,{transform:{x:P.x-te.x,y:P.y-te.y,scaleX:1,scaleY:1},activatorEvent:re,active:fe,activeNodeRect:O,containerNodeRect:He,draggingNodeRect:Fe,over:he.current.over,overlayNodeRect:xe.rect,scrollableAncestors:Ce,scrollableAncestorRects:nt,windowRect:ht}),rt=_?dt(_,P):null,gt=ar(Ce),It=kn(gt),Ot=kn(gt,[O]),Ge=dt(st,It),$e=Fe?Is(Fe,st):null,Xe=fe&&$e?m({active:fe,collisionRect:$e,droppableRects:ge,droppableContainers:et,pointerCoordinates:rt}):null,pt=Ss(Xe,"id"),[Ie,Tt]=l.useState(null),Se=M?st:dt(st,Ot),We=Rs(Se,(o=Ie==null?void 0:Ie.rect)!=null?o:null,O),G=l.useRef(null),ve=l.useCallback((Y,ne)=>{let{sensor:ie,options:Oe}=ne;if(me.current==null)return;const ae=k.get(me.current);if(!ae)return;const Q=Y.nativeEvent,le=new ie({active:me.current,activeNode:ae,event:Q,options:Oe,context:he,onAbort(U){if(!k.get(U))return;const{onDragAbort:ye}=Z.current,je={id:U};ye==null||ye(je),z({type:"onDragAbort",event:je})},onPending(U,Te,ye,je){if(!k.get(U))return;const{onDragPending:qe}=Z.current,De={id:U,constraint:Te,initialCoordinates:ye,offset:je};qe==null||qe(De),z({type:"onDragPending",event:De})},onStart(U){const Te=me.current;if(Te==null)return;const ye=k.get(Te);if(!ye)return;const{onDragStart:je}=Z.current,it={activatorEvent:Q,active:{id:Te,data:ye.data,rect:ue}};bt.unstable_batchedUpdates(()=>{je==null||je(it),R(Qe.Initializing),S({type:K.DragStart,initialCoordinates:U,active:Te}),z({type:"onDragStart",event:it}),V(G.current),Be(Q)})},onMove(U){S({type:K.DragMove,coordinates:U})},onEnd:Ve(K.DragEnd),onCancel:Ve(K.DragCancel)});G.current=le;function Ve(U){return async function(){const{active:ye,collisions:je,over:it,scrollAdjustedTranslate:qe}=he.current;let De=null;if(ye&&qe){const{cancelDrop:Je}=Z.current;De={activatorEvent:Q,active:ye,collisions:je,delta:qe,over:it},U===K.DragEnd&&typeof Je=="function"&&await Promise.resolve(Je(De))&&(U=K.DragCancel)}me.current=null,bt.unstable_batchedUpdates(()=>{S({type:U}),R(Qe.Uninitialized),Tt(null),V(null),Be(null),G.current=null;const Je=U===K.DragEnd?"onDragEnd":"onDragCancel";if(De){const ct=Z.current[Je];ct==null||ct(De),z({type:Je,event:De})}})}}},[k]),be=l.useCallback((Y,ne)=>(ie,Oe)=>{const ae=ie.nativeEvent,Q=k.get(Oe);if(me.current!==null||!Q||ae.dndKit||ae.defaultPrevented)return;const le={active:Q};Y(ie,ne.options,le)===!0&&(ae.dndKit={capturedBy:ne.sensor},me.current=Oe,ve(ie,ne))},[k,ve]),lt=er(h,be);lr(h),ke(()=>{O&&E===Qe.Initializing&&R(Qe.Initialized)},[O,E]),l.useEffect(()=>{const{onDragMove:Y}=Z.current,{active:ne,activatorEvent:ie,collisions:Oe,over:ae}=he.current;if(!ne||!ie)return;const Q={active:ne,activatorEvent:ie,collisions:Oe,delta:{x:Ge.x,y:Ge.y},over:ae};bt.unstable_batchedUpdates(()=>{Y==null||Y(Q),z({type:"onDragMove",event:Q})})},[Ge.x,Ge.y]),l.useEffect(()=>{const{active:Y,activatorEvent:ne,collisions:ie,droppableContainers:Oe,scrollAdjustedTranslate:ae}=he.current;if(!Y||me.current==null||!ne||!ae)return;const{onDragOver:Q}=Z.current,le=Oe.get(pt),Ve=le&&le.rect.current?{id:le.id,rect:le.rect.current,data:le.data,disabled:le.disabled}:null,U={active:Y,activatorEvent:ne,collisions:ie,delta:{x:ae.x,y:ae.y},over:Ve};bt.unstable_batchedUpdates(()=>{Tt(Ve),Q==null||Q(U),z({type:"onDragOver",event:U})})},[pt]),ke(()=>{he.current={activatorEvent:re,active:fe,activeNode:J,collisionRect:$e,collisions:Xe,droppableRects:ge,draggableNodes:k,draggingNode:ee,draggingNodeRect:Fe,droppableContainers:$,over:Ie,scrollableAncestors:Ce,scrollAdjustedTranslate:Ge},ue.current={initial:Fe,translated:$e}},[fe,J,Xe,$e,k,ee,Fe,ge,$,Ie,Ce,Ge]),qs({...H,delta:P,draggingRect:$e,pointerCoordinates:rt,scrollableAncestors:Ce,scrollableAncestorRects:nt});const At=l.useMemo(()=>({active:fe,activeNode:J,activeNodeRect:O,activatorEvent:re,collisions:Xe,containerNodeRect:He,dragOverlay:xe,draggableNodes:k,droppableContainers:$,droppableRects:ge,over:Ie,measureDroppableContainers:Ee,scrollableAncestors:Ce,scrollableAncestorRects:nt,measuringConfiguration:q,measuringScheduled:tt,windowRect:ht}),[fe,J,O,re,Xe,He,xe,k,$,ge,Ie,Ee,Ce,nt,q,tt,ht]),Mt=l.useMemo(()=>({activatorEvent:re,activators:lt,active:fe,activeNodeRect:O,ariaDescribedById:{draggable:Ne},dispatch:S,draggableNodes:k,over:Ie,measureDroppableContainers:Ee}),[re,lt,fe,O,S,Ne,k,Ie,Ee]);return F.createElement(Mn.Provider,{value:w},F.createElement(Et.Provider,{value:Mt},F.createElement(qn.Provider,{value:At},F.createElement(Qt.Provider,{value:We},f)),F.createElement(xr,{disabled:(c==null?void 0:c.restoreFocus)===!1})),F.createElement(vs,{...c,hiddenTextDescribedById:Ne}));function Lt(){const Y=(Pe==null?void 0:Pe.autoScrollEnabled)===!1,ne=typeof u=="object"?u.enabled===!1:u===!1,ie=I&&!Y&&!ne;return typeof u=="object"?{...u,enabled:ie}:{enabled:ie}}}),jr=l.createContext(null),En="button",wr="Draggable";function Nr(e){let{id:t,data:n,disabled:s=!1,attributes:i}=e;const o=Rt(wr),{activators:d,activatorEvent:c,active:u,activeNodeRect:f,ariaDescribedById:h,draggableNodes:m,over:x}=l.useContext(Et),{role:p=En,roleDescription:C="draggable",tabIndex:b=0}=i??{},j=(u==null?void 0:u.id)===t,S=l.useContext(j?Qt:jr),[z,w]=Xt(),[E,R]=Xt(),I=cr(d,t),D=Ct(n);ke(()=>(m.set(t,{id:t,key:o,node:z,activatorNode:E,data:D}),()=>{const P=m.get(t);P&&P.key===o&&m.delete(t)}),[m,t]);const k=l.useMemo(()=>({role:p,tabIndex:b,"aria-disabled":s,"aria-pressed":j&&p===En?!0:void 0,"aria-roledescription":C,"aria-describedby":h.draggable}),[s,p,b,j,C,h.draggable]);return{active:u,activatorEvent:c,activeNodeRect:f,attributes:k,isDragging:j,listeners:s?void 0:I,node:z,over:x,setNodeRef:w,setActivatorNodeRef:R,transform:S}}function Qn(){return l.useContext(qn)}const Cr="Droppable",Sr={timeout:25};function Dr(e){let{data:t,disabled:n=!1,id:s,resizeObserverConfig:i}=e;const o=Rt(Cr),{active:d,dispatch:c,over:u,measureDroppableContainers:f}=l.useContext(Et),h=l.useRef({disabled:n}),m=l.useRef(!1),x=l.useRef(null),p=l.useRef(null),{disabled:C,updateMeasurementsFor:b,timeout:j}={...Sr,...i},S=Ct(b??s),z=l.useCallback(()=>{if(!m.current){m.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{f(Array.isArray(S.current)?S.current:[S.current]),p.current=null},j)},[j]),w=Jt({callback:z,disabled:C||!d}),E=l.useCallback((k,P)=>{w&&(P&&(w.unobserve(P),m.current=!1),k&&w.observe(k))},[w]),[R,I]=Xt(E),D=Ct(t);return l.useEffect(()=>{!w||!R.current||(w.disconnect(),m.current=!1,w.observe(R.current))},[R,w]),l.useEffect(()=>(c({type:K.RegisterDroppable,element:{id:s,key:o,disabled:n,node:R,rect:x,data:D}}),()=>c({type:K.UnregisterDroppable,key:o,id:s})),[s]),l.useEffect(()=>{n!==h.current.disabled&&(c({type:K.SetDroppableDisabled,id:s,key:o,disabled:n}),h.current.disabled=n)},[s,o,n,c]),{active:d,rect:x,isOver:(u==null?void 0:u.id)===s,node:R,over:u,setNodeRef:I}}function zr(e){let{animation:t,children:n}=e;const[s,i]=l.useState(null),[o,d]=l.useState(null),c=Yt(n);return!n&&!s&&c&&i(c),ke(()=>{if(!o)return;const u=s==null?void 0:s.key,f=s==null?void 0:s.props.id;if(u==null||f==null){i(null);return}Promise.resolve(t(f,o)).then(()=>{i(null)})},[t,s,o]),F.createElement(F.Fragment,null,n,s?l.cloneElement(s,{ref:d}):null)}const kr={x:0,y:0,scaleX:1,scaleY:1};function Rr(e){let{children:t}=e;return F.createElement(Et.Provider,{value:Vn},F.createElement(Qt.Provider,{value:kr},t))}const Er={position:"fixed",touchAction:"none"},Ir=e=>qt(e)?"transform 250ms ease":void 0,Or=l.forwardRef((e,t)=>{let{as:n,activatorEvent:s,adjustScale:i,children:o,className:d,rect:c,style:u,transform:f,transition:h=Ir}=e;if(!c)return null;const m=i?f:{...f,scaleX:1,scaleY:1},x={...Er,width:c.width,height:c.height,top:c.top,left:c.left,transform:Ze.Transform.toString(m),transformOrigin:i&&s?ws(s,c):void 0,transition:typeof h=="function"?h(s):h,...u};return F.createElement(n,{className:d,style:x,ref:t},o)}),Tr=e=>t=>{let{active:n,dragOverlay:s}=t;const i={},{styles:o,className:d}=e;if(o!=null&&o.active)for(const[c,u]of Object.entries(o.active))u!==void 0&&(i[c]=n.node.style.getPropertyValue(c),n.node.style.setProperty(c,u));if(o!=null&&o.dragOverlay)for(const[c,u]of Object.entries(o.dragOverlay))u!==void 0&&s.node.style.setProperty(c,u);return d!=null&&d.active&&n.node.classList.add(d.active),d!=null&&d.dragOverlay&&s.node.classList.add(d.dragOverlay),function(){for(const[u,f]of Object.entries(i))n.node.style.setProperty(u,f);d!=null&&d.active&&n.node.classList.remove(d.active)}},Ar=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Ze.Transform.toString(t)},{transform:Ze.Transform.toString(n)}]},Mr={duration:250,easing:"ease",keyframes:Ar,sideEffects:Tr({styles:{active:{opacity:"0"}}})};function Lr(e){let{config:t,draggableNodes:n,droppableContainers:s,measuringConfiguration:i}=e;return Vt((o,d)=>{if(t===null)return;const c=n.get(o);if(!c)return;const u=c.node.current;if(!u)return;const f=Wn(d);if(!f)return;const{transform:h}=oe(d).getComputedStyle(d),m=Pn(h);if(!m)return;const x=typeof t=="function"?t:Pr(t);return Un(u,i.draggable.measure),x({active:{id:o,data:c.data,node:u,rect:i.draggable.measure(u)},draggableNodes:n,dragOverlay:{node:d,rect:i.dragOverlay.measure(f)},droppableContainers:s,measuringConfiguration:i,transform:m})})}function Pr(e){const{duration:t,easing:n,sideEffects:s,keyframes:i}={...Mr,...e};return o=>{let{active:d,dragOverlay:c,transform:u,...f}=o;if(!t)return;const h={x:c.rect.left-d.rect.left,y:c.rect.top-d.rect.top},m={scaleX:u.scaleX!==1?d.rect.width*u.scaleX/c.rect.width:1,scaleY:u.scaleY!==1?d.rect.height*u.scaleY/c.rect.height:1},x={x:u.x-h.x,y:u.y-h.y,...m},p=i({...f,active:d,dragOverlay:c,transform:{initial:u,final:x}}),[C]=p,b=p[p.length-1];if(JSON.stringify(C)===JSON.stringify(b))return;const j=s==null?void 0:s({active:d,dragOverlay:c,...f}),S=c.node.animate(p,{duration:t,easing:n,fill:"forwards"});return new Promise(z=>{S.onfinish=()=>{j==null||j(),z()}})}}let In=0;function Br(e){return l.useMemo(()=>{if(e!=null)return In++,In},[e])}const _r=F.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:s,style:i,transition:o,modifiers:d,wrapperElement:c="div",className:u,zIndex:f=999}=e;const{activatorEvent:h,active:m,activeNodeRect:x,containerNodeRect:p,draggableNodes:C,droppableContainers:b,dragOverlay:j,over:S,measuringConfiguration:z,scrollableAncestors:w,scrollableAncestorRects:E,windowRect:R}=Qn(),I=l.useContext(Qt),D=Br(m==null?void 0:m.id),k=Jn(d,{activatorEvent:h,active:m,activeNodeRect:x,containerNodeRect:p,draggingNodeRect:j.rect,over:S,overlayNodeRect:j.rect,scrollableAncestors:w,scrollableAncestorRects:E,transform:I,windowRect:R}),P=gn(x),$=Lr({config:s,draggableNodes:C,droppableContainers:b,measuringConfiguration:z}),A=P?j.setRef:void 0;return F.createElement(Rr,null,F.createElement(zr,{animation:$},m&&D?F.createElement(Or,{key:D,id:m.id,ref:A,as:c,activatorEvent:h,adjustScale:t,className:u,transition:o,rect:P,style:{zIndex:f,...i},transform:k},n):null))});function pn(e,t,n){const s=e.slice();return s.splice(n<0?s.length+n:n,0,s.splice(t,1)[0]),s}function Fr(e,t){return e.reduce((n,s,i)=>{const o=t.get(s);return o&&(n[i]=o),n},Array(e.length))}function Bt(e){return e!==null&&e>=0}function $r(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Xr(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Zn=e=>{let{rects:t,activeIndex:n,overIndex:s,index:i}=e;const o=pn(t,s,n),d=t[i],c=o[i];return!c||!d?null:{x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height}},_t={scaleX:1,scaleY:1},Yr=e=>{var t;let{activeIndex:n,activeNodeRect:s,index:i,rects:o,overIndex:d}=e;const c=(t=o[n])!=null?t:s;if(!c)return null;if(i===n){const f=o[d];return f?{x:0,y:n<d?f.top+f.height-(c.top+c.height):f.top-c.top,..._t}:null}const u=Ur(o,i,n);return i>n&&i<=d?{x:0,y:-c.height-u,..._t}:i<n&&i>=d?{x:0,y:c.height+u,..._t}:{x:0,y:0,..._t}};function Ur(e,t,n){const s=e[t],i=e[t-1],o=e[t+1];return s?n<t?i?s.top-(i.top+i.height):o?o.top-(s.top+s.height):0:o?o.top-(s.top+s.height):i?s.top-(i.top+i.height):0:0}const es="Sortable",ts=F.createContext({activeIndex:-1,containerId:es,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Zn,disabled:{draggable:!1,droppable:!1}});function Kr(e){let{children:t,id:n,items:s,strategy:i=Zn,disabled:o=!1}=e;const{active:d,dragOverlay:c,droppableRects:u,over:f,measureDroppableContainers:h}=Qn(),m=Rt(es,n),x=c.rect!==null,p=l.useMemo(()=>s.map(I=>typeof I=="object"&&"id"in I?I.id:I),[s]),C=d!=null,b=d?p.indexOf(d.id):-1,j=f?p.indexOf(f.id):-1,S=l.useRef(p),z=!$r(p,S.current),w=j!==-1&&b===-1||z,E=Xr(o);ke(()=>{z&&C&&h(p)},[z,p,C,h]),l.useEffect(()=>{S.current=p},[p]);const R=l.useMemo(()=>({activeIndex:b,containerId:m,disabled:E,disableTransforms:w,items:p,overIndex:j,useDragOverlay:x,sortedRects:Fr(p,u),strategy:i}),[b,m,E.draggable,E.droppable,w,p,j,u,x,i]);return F.createElement(ts.Provider,{value:R},t)}const Hr=e=>{let{id:t,items:n,activeIndex:s,overIndex:i}=e;return pn(n,s,i).indexOf(t)},Gr=e=>{let{containerId:t,isSorting:n,wasDragging:s,index:i,items:o,newIndex:d,previousItems:c,previousContainerId:u,transition:f}=e;return!f||!s||c!==o&&i===d?!1:n?!0:d!==i&&t===u},Wr={duration:200,easing:"ease"},ns="transform",Vr=Ze.Transition.toString({property:ns,duration:0,easing:"linear"}),qr={roleDescription:"sortable"};function Jr(e){let{disabled:t,index:n,node:s,rect:i}=e;const[o,d]=l.useState(null),c=l.useRef(n);return ke(()=>{if(!t&&n!==c.current&&s.current){const u=i.current;if(u){const f=mt(s.current,{ignoreTransform:!0}),h={x:u.left-f.left,y:u.top-f.top,scaleX:u.width/f.width,scaleY:u.height/f.height};(h.x||h.y)&&d(h)}}n!==c.current&&(c.current=n)},[t,n,s,i]),l.useEffect(()=>{o&&d(null)},[o]),o}function Qr(e){let{animateLayoutChanges:t=Gr,attributes:n,disabled:s,data:i,getNewIndex:o=Hr,id:d,strategy:c,resizeObserverConfig:u,transition:f=Wr}=e;const{items:h,containerId:m,activeIndex:x,disabled:p,disableTransforms:C,sortedRects:b,overIndex:j,useDragOverlay:S,strategy:z}=l.useContext(ts),w=Zr(s,p),E=h.indexOf(d),R=l.useMemo(()=>({sortable:{containerId:m,index:E,items:h},...i}),[m,i,E,h]),I=l.useMemo(()=>h.slice(h.indexOf(d)),[h,d]),{rect:D,node:k,isOver:P,setNodeRef:$}=Dr({id:d,data:R,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:I,...u}}),{active:A,activatorEvent:ue,activeNodeRect:fe,attributes:me,setNodeRef:Pe,listeners:V,isDragging:re,over:Be,setActivatorNodeRef:Z,transform:Ne}=Nr({id:d,data:R,attributes:{...qr,...n},disabled:w.draggable}),et=is($,Pe),q=!!A,ge=q&&!C&&Bt(x)&&Bt(j),Ee=!S&&re,tt=Ee&&ge?Ne:null,_=ge?tt??(c??z)({rects:b,activeNodeRect:fe,activeIndex:x,overIndex:j,index:E}):null,H=Bt(x)&&Bt(j)?o({id:d,items:h,activeIndex:x,overIndex:j}):E,pe=A==null?void 0:A.id,O=l.useRef({activeId:pe,items:h,newIndex:H,containerId:m}),He=h!==O.current.items,he=t({active:A,containerId:m,isDragging:re,isSorting:q,id:d,index:E,items:h,newIndex:O.current.newIndex,previousItems:O.current.items,previousContainerId:O.current.containerId,transition:f,wasDragging:O.current.activeId!=null}),_e=Jr({disabled:!he,index:E,node:k,rect:D});return l.useEffect(()=>{q&&O.current.newIndex!==H&&(O.current.newIndex=H),m!==O.current.containerId&&(O.current.containerId=m),h!==O.current.items&&(O.current.items=h)},[q,H,m,h]),l.useEffect(()=>{if(pe===O.current.activeId)return;if(pe!=null&&O.current.activeId==null){O.current.activeId=pe;return}const ee=setTimeout(()=>{O.current.activeId=pe},50);return()=>clearTimeout(ee)},[pe]),{active:A,activeIndex:x,attributes:me,data:R,rect:D,index:E,newIndex:H,items:h,isOver:P,isSorting:q,isDragging:re,listeners:V,node:k,overIndex:j,over:Be,setNodeRef:et,setActivatorNodeRef:Z,setDroppableNodeRef:$,setDraggableNodeRef:Pe,transform:_e??_,transition:xe()};function xe(){if(_e||He&&O.current.newIndex===E)return Vr;if(!(Ee&&!qt(ue)||!f)&&(q||he))return Ze.Transition.toString({...f,property:ns})}}function Zr(e,t){var n,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(s=e==null?void 0:e.droppable)!=null?s:t.droppable}}T.Down,T.Right,T.Up,T.Left;function Dt(e){if(!e)return null;try{return new Intl.DateTimeFormat("nl-NL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}catch{return String(e)}}function yt(e){return e?String(e).replace(/_/g," "):""}function Ue(e){switch(e){case"kritiek":return{label:"Kritiek",className:"bg-rose-600 text-white"};case"hoog":return{label:"Hoog",className:"bg-amber-500 text-white"};case"laag":return{label:"Laag",className:"bg-zinc-200 text-zinc-800"};default:return{label:"Normaal",className:"bg-indigo-50 text-indigo-700"}}}function ei(e){return String(e||"").trim().split(" ").filter(Boolean).map(t=>t.slice(0,1)).join("").slice(0,2).toUpperCase()}function Le(...e){return e.filter(Boolean).join(" ")}function at(e){const t=Number(String(e).replace(/[^\d]/g,""));return Number.isFinite(t)?t:null}function ti(e){if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=s=>String(s).padStart(2,"0");return`${t.getFullYear()}-${n(t.getMonth()+1)}-${n(t.getDate())}T${n(t.getHours())}:${n(t.getMinutes())}`}function de({tone:e="primary",className:t="",...n}){const s="inline-flex items-center justify-center rounded-md px-3 py-2 text-sm font-semibold transition",i={primary:"bg-zinc-900 text-white hover:bg-zinc-800",secondary:"bg-white text-zinc-900 ring-1 ring-zinc-200 hover:bg-zinc-50",ghost:"bg-transparent text-zinc-700 hover:bg-zinc-100",danger:"bg-rose-600 text-white hover:bg-rose-500"};return r.jsx("button",{className:Le(s,i[e],t),...n})}function Ke({children:e,className:t=""}){return r.jsx("span",{className:Le("inline-flex items-center rounded-full bg-zinc-100 px-2 py-0.5 text-xs font-semibold text-zinc-700",t),children:e})}function ni({task:e,onOpen:t}){var h,m,x,p,C;const n=`task-${e.id}`,{attributes:s,listeners:i,setNodeRef:o,transform:d,transition:c,isDragging:u}=Qr({id:n}),f={transform:Ze.Transform.toString(d),transition:c};return r.jsx("div",{ref:o,style:f,className:Le("rounded-xl border bg-white p-3 shadow-sm",u?"opacity-60":"opacity-100"),...s,...i,children:r.jsxs("button",{type:"button",className:"w-full text-left",onClick:()=>t(e.id),children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"truncate text-sm font-semibold text-zinc-900",children:e.titel}),(h=e.project)!=null&&h.naam?r.jsx("div",{className:"mt-1 truncate text-xs text-zinc-500",children:e.project.naam}):null]}),r.jsx("span",{className:Le("shrink-0 rounded-full px-2 py-0.5 text-[11px] font-semibold",Ue(e.prioriteit).className),children:Ue(e.prioriteit).label})]}),r.jsxs("div",{className:"mt-3 flex items-center justify-between gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[e.deadline?r.jsx(Ke,{children:Dt(e.deadline)}):r.jsx(Ke,{className:"text-zinc-400",children:"Geen deadline"}),(m=e.counts)!=null&&m.comments?r.jsxs(Ke,{children:[e.counts.comments," reacties"]}):null,(x=e.counts)!=null&&x.attachments?r.jsxs(Ke,{children:[e.counts.attachments," bijlagen"]}):null]}),r.jsxs("div",{className:"flex items-center gap-1",children:[(p=e.assignees)==null?void 0:p.slice(0,2).map(b=>r.jsx("span",{className:"grid h-7 w-7 place-items-center rounded-full bg-zinc-100 text-xs font-bold text-zinc-700",title:b.name,children:ei(b.name)||"--"},b.id)),((C=e.assignees)==null?void 0:C.length)>2?r.jsxs("span",{className:"grid h-7 w-7 place-items-center rounded-full bg-zinc-100 text-xs font-bold text-zinc-700",title:"Meer",children:["+",e.assignees.length-2]}):null]})]})]})})}function si({title:e,subtitle:t,count:n,children:s,footer:i}){return r.jsxs("div",{className:"flex w-[340px] flex-col rounded-2xl border border-zinc-200 bg-zinc-50/60",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-zinc-200 px-4 py-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"truncate text-sm font-semibold text-zinc-900",children:e}),t?r.jsx("div",{className:"mt-0.5 truncate text-xs text-zinc-500",children:t}):null]}),r.jsx("span",{className:"shrink-0 rounded-full bg-zinc-200 px-2 py-0.5 text-xs font-semibold text-zinc-700",children:n})]}),r.jsx("div",{className:"flex-1 space-y-3 overflow-y-auto px-4 py-3",children:s}),i?r.jsx("div",{className:"border-t border-zinc-200 px-4 py-3",children:i}):null]})}function ri({task:e}){return e?r.jsxs("div",{className:"w-[330px] rounded-xl border bg-white p-3 shadow-lg",children:[r.jsx("div",{className:"truncate text-sm font-semibold text-zinc-900",children:e.titel}),r.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[r.jsx("span",{className:Le("rounded-full px-2 py-0.5 text-[11px] font-semibold",Ue(e.prioriteit).className),children:Ue(e.prioriteit).label}),e.deadline?r.jsx(Ke,{children:Dt(e.deadline)}):r.jsx(Ke,{className:"text-zinc-400",children:"Geen deadline"})]})]}):null}function ii({view:e,groupBoardBy:t,projects:n,users:s,statusOptions:i}){const o=[],d=e==="team"?"assignee":t;return d==="project"?(o.push({id:"col-project-inbox",title:"Inbox",subtitle:"Geen project",projectId:null}),n.forEach(c=>{o.push({id:`col-project-${c.id}`,title:c.naam,subtitle:c.deadline?`Deadline: ${Dt(c.deadline)}`:null,projectId:c.id})})):d==="status"?i.forEach(c=>o.push({id:`col-status-${c}`,title:yt(c),subtitle:null,status:c})):(o.push({id:"col-assignee-unassigned",title:"Niet toegewezen",subtitle:null,assigneeId:null}),s.forEach(c=>o.push({id:`col-assignee-${c.id}`,title:c.name,subtitle:null,assigneeId:c.id}))),{group:d,columns:o}}function oi(e){var n,s;return((s=(n=e.assignees)==null?void 0:n[0])==null?void 0:s.id)??null}function ai(e,t){if(t==="project")return e.task_project_id?`col-project-${e.task_project_id}`:"col-project-inbox";if(t==="status")return`col-status-${e.status}`;const n=oi(e);return n?`col-assignee-${n}`:"col-assignee-unassigned"}function On(e,t,n){const s=Object.fromEntries(t.map(i=>[i.id,[]]));return e.forEach(i=>{const o=ai(i,n);s[o]||(s[o]=[]),s[o].push(`task-${i.id}`)}),Object.keys(s).forEach(i=>{s[i]=s[i].map(o=>({id:o,taskId:at(o)})).filter(o=>o.taskId).sort((o,d)=>{const c=e.find(m=>m.id===o.taskId),u=e.find(m=>m.id===d.taskId),f=(c==null?void 0:c.sort_order)??0,h=(u==null?void 0:u.sort_order)??0;return f!==h?f-h:o.taskId-d.taskId}).map(o=>o.id)}),s}function Ft(e,t){return t?Object.prototype.hasOwnProperty.call(e,t)?t:Object.keys(e).find(n=>e[n].includes(t))??null:null}function di({initial:e,filters:t,urls:n}){var De,Je,ct,xn,vn;const[s,i]=l.useState((e==null?void 0:e.tasks)??[]),[o,d]=l.useState((e==null?void 0:e.projects)??[]),[c,u]=l.useState((e==null?void 0:e.users)??[]),[f,h]=l.useState((e==null?void 0:e.statusOptions)??[]),[m,x]=l.useState((e==null?void 0:e.priorityOptions)??[]),[p,C]=l.useState("board"),[b,j]=l.useState("project"),[S,z]=l.useState((t==null?void 0:t.sort)??"deadline"),[w,E]=l.useState((t==null?void 0:t.project)??""),[R,I]=l.useState((t==null?void 0:t.assignee)??""),[D,k]=l.useState((t==null?void 0:t.status)??""),[P,$]=l.useState((t==null?void 0:t.priority)??""),[A,ue]=l.useState((t==null?void 0:t.search)??""),[fe,me]=l.useState(!1),[Pe,V]=l.useState(null),[re,Be]=l.useState(!1),[Z,Ne]=l.useState({naam:"",omschrijving:"",deadline:"",kleur:""}),[et,q]=l.useState({}),[ge,Ee]=l.useState(!1),[tt,J]=l.useState(!1),[_,H]=l.useState({titel:"",omschrijving:"",task_project_id:"",status:"open",prioriteit:"normaal",deadline:"",labels:"",assignees:[]}),[pe,O]=l.useState([]),[He,he]=l.useState({}),[_e,xe]=l.useState(!1),[ee,Fe]=l.useState(null),[M,te]=l.useState(null),[ht,Ce]=l.useState(!1),[nt,st]=l.useState(!1),[rt,gt]=l.useState(""),[It,Ot]=l.useState(!1),[Ge,$e]=l.useState(!1),[Xe,pt]=l.useState({}),Ie=l.useRef(null),Tt=ys(bs(hn,{activationConstraint:{distance:6}})),Se=l.useCallback(async()=>{me(!0);try{const a=await Me.get("/taken/data",{params:{project:w||void 0,assignee:R||void 0,status:D||void 0,priority:P||void 0,search:A||void 0,sort:S||void 0}});i(a.data.tasks??[]),d(a.data.projects??[]),u(a.data.users??[]),h(a.data.statusOptions??[]),x(a.data.priorityOptions??[])}catch{V({tone:"error",text:"Taken laden mislukt. Probeer opnieuw."})}finally{me(!1)}},[w,R,D,P,A,S]);l.useEffect(()=>{const a=setTimeout(()=>Se(),250);return()=>clearTimeout(a)},[Se]);const We=l.useMemo(()=>Object.fromEntries(s.map(a=>[a.id,a])),[s]),{group:G,columns:ve}=l.useMemo(()=>ii({view:p,groupBoardBy:b,projects:o,users:c,statusOptions:f}),[p,b,o,c,f]),[be,lt]=l.useState(()=>On(s,ve,G)),[At,Mt]=l.useState(null);l.useEffect(()=>{lt(On(s,ve,G))},[s,ve,G]);const Lt=l.useMemo(()=>{const a=at(At);return a?We[a]:null},[At,We]),Y=l.useCallback(async a=>{Fe(a),te(null),Ce(!0);try{const g=await Me.get(`/taken/${a}`);te(g.data.task??null)}catch{V({tone:"error",text:"Taak laden mislukt."})}finally{Ce(!1)}},[]),ne=l.useCallback(()=>{Fe(null),te(null)},[]),ie=l.useCallback(async a=>{if(a.preventDefault(),!!M){st(!0);try{const y=(await Me.patch(`/taken/tasks/${M.id}`,{titel:M.titel,omschrijving:M.omschrijving??null,labels:M.labels??null,prioriteit:M.prioriteit??"normaal",task_project_id:M.task_project_id??null,deadline:M.deadline??null,status:M.status??"open",assignees:(M.assignees??[]).map(v=>v.id)})).data.task;i(v=>v.map(N=>N.id===y.id?{...N,...y}:N)),V({tone:"success",text:"Taak opgeslagen."})}catch{V({tone:"error",text:"Opslaan mislukt."})}finally{st(!1)}}},[M]),Oe=l.useCallback(async a=>{if(a.preventDefault(),!(!ee||!rt.trim())){Ot(!0);try{const g=await Me.post(`/taken/tasks/${ee}/comments`,{body:rt.trim()});te(y=>y&&{...y,comments:[...y.comments??[],g.data.comment]}),gt(""),i(y=>y.map(v=>{var N;return v.id===ee?{...v,counts:{...v.counts??{},comments:(((N=v.counts)==null?void 0:N.comments)??0)+1}}:v}))}catch{V({tone:"error",text:"Reactie plaatsen mislukt."})}finally{Ot(!1)}}},[rt,ee]),ae=l.useCallback(async a=>{if(!(!ee||!a||a.length===0)){$e(!0);try{for(const g of a){const y=new FormData;y.append("file",g);const v=await Me.post(`/taken/tasks/${ee}/attachments`,y,{headers:{"Content-Type":"multipart/form-data"}});te(N=>N&&{...N,attachments:[...N.attachments??[],v.data.attachment]}),i(N=>N.map(L=>{var B;return L.id===ee?{...L,counts:{...L.counts??{},attachments:(((B=L.counts)==null?void 0:B.attachments)??0)+1}}:L}))}}catch{V({tone:"error",text:"Bijlage uploaden mislukt."})}finally{$e(!1)}}},[ee]),Q=l.useCallback(async a=>{if(!(!a||a.length===0))try{await Me.patch("/taken/tasks/reorder",{changes:a})}catch{V({tone:"error",text:"Opslaan van volgorde mislukt. Pagina vernieuwen helpt meestal."}),Se()}},[Se]),le=l.useCallback(({nextItems:a,movedTaskIdForTeam:g=null,movedToAssigneeId:y=null})=>{lt(a),i(v=>{const N=v.map(B=>({...B})),L=Object.fromEntries(N.map(B=>[B.id,B]));return ve.forEach(B=>{(a[B.id]??[]).forEach((Ae,ot)=>{var se;const ce=at(Ae);if(!(!ce||!L[ce])){if(L[ce].sort_order=(ot+1)*10,G==="project")L[ce].task_project_id=B.projectId??null,L[ce].project=B.projectId?{id:B.projectId,naam:B.title,kleur:((se=o.find(X=>X.id===B.projectId))==null?void 0:se.kleur)??null}:null;else if(G==="status")L[ce].status=B.status??L[ce].status;else if(G==="assignee"&&g&&y!==null&&ce===g){const X=c.find(Ye=>Ye.id===y);L[ce].assignees=X?[{id:X.id,name:X.name}]:[]}}})}),N})},[ve,G,o,c]),Ve=l.useCallback(({active:a})=>Mt((a==null?void 0:a.id)??null),[]),U=l.useCallback(({active:a,over:g})=>{const y=a==null?void 0:a.id,v=g==null?void 0:g.id;if(!y||!v)return;const N=Ft(be,y),L=Ft(be,v);!N||!L||N!==L&&lt(B=>{const ze={...B},Ae=[...ze[N]??[]],ot=[...ze[L]??[]],ce=Ae.indexOf(y);if(ce===-1)return B;Ae.splice(ce,1);const se=ot.indexOf(v),X=se===-1?ot.length:se;return ot.splice(X,0,y),ze[N]=Ae,ze[L]=ot,ze})},[be]),Te=l.useCallback(async({active:a,over:g})=>{const y=a==null?void 0:a.id,v=g==null?void 0:g.id;if(Mt(null),!y||!v)return;const N=Ft(be,y),L=Ft(be,v);if(!N||!L)return;if(N===L){const se=be[N]??[],X=se.indexOf(y),Ye=se.indexOf(v);if(X===-1||Ye===-1||X===Ye)return;const Pt={...be,[N]:pn(se,X,Ye)};le({nextItems:Pt});const xt=(Pt[N]??[]).map((vt,ss)=>{const Zt=at(vt);if(!Zt)return null;const en=We[Zt];return en?{id:Zt,task_project_id:en.task_project_id??null,status:en.status??null,sort_order:(ss+1)*10}:null}).filter(Boolean);await Q(xt);return}const B=be;let ze=null,Ae=null;if(G==="assignee"){ze=at(y);const se=ve.find(X=>X.id===L);if(Ae=(se==null?void 0:se.assigneeId)??null,ze!==null)try{await Me.patch(`/taken/tasks/${ze}`,{assignees:Ae?[Ae]:[]})}catch{V({tone:"error",text:"Toewijzen mislukt. Probeer opnieuw."}),Se();return}}le({nextItems:B,movedTaskIdForTeam:ze,movedToAssigneeId:Ae});const ce=Array.from(new Set([N,L])).flatMap(se=>{const X=ve.find(Ye=>Ye.id===se);return(B[se]??[]).map((Ye,Pt)=>{const xt=at(Ye);if(!xt)return null;const vt=We[xt]??{};return{id:xt,task_project_id:G==="project"?(X==null?void 0:X.projectId)??null:vt.task_project_id??null,status:G==="status"?(X==null?void 0:X.status)??vt.status??null:vt.status??null,sort_order:(Pt+1)*10}}).filter(Boolean)}).filter(Boolean);await Q(ce)},[le,ve,Se,G,be,Q,We]),ye=l.useCallback(async a=>{var g,y;a.preventDefault(),Ee(!0),q({});try{const v=await Me.post("/taken/projects",Z);d(N=>[...N,v.data.project].sort((L,B)=>String(L.naam).localeCompare(String(B.naam)))),Ne({naam:"",omschrijving:"",deadline:"",kleur:""}),Be(!1),V({tone:"success",text:"Project toegevoegd."})}catch(v){q(((y=(g=v==null?void 0:v.response)==null?void 0:g.data)==null?void 0:y.errors)??{})}finally{Ee(!1)}},[Z]),je=l.useCallback(async({column:a,title:g})=>{const y=String(g||"").trim();if(y)try{const v={titel:y,omschrijving:null,task_project_id:G==="project"?a.projectId:w?Number(w):null,status:G==="status"?a.status:"open",prioriteit:"normaal",deadline:null,labels:null,assignees:p==="team"?a.assigneeId?[a.assigneeId]:[]:[]},L=(await Me.post("/taken/tasks",v)).data.task;i(B=>[L,...B]),pt(B=>({...B,[a.id]:""}))}catch{V({tone:"error",text:"Taak aanmaken mislukt."})}},[w,G,p]),it=l.useCallback(async a=>{var g,y;a.preventDefault(),xe(!0),he({});try{const v=new FormData;v.append("titel",_.titel),_.omschrijving&&v.append("omschrijving",_.omschrijving),_.task_project_id&&v.append("task_project_id",_.task_project_id),v.append("status",_.status),v.append("prioriteit",_.prioriteit),_.deadline&&v.append("deadline",_.deadline),_.labels&&v.append("labels",_.labels),_.assignees.forEach(N=>v.append("assignees[]",N)),pe.forEach(N=>v.append("attachments[]",N)),await Me.post("/taken/tasks",v),H({titel:"",omschrijving:"",task_project_id:"",status:"open",prioriteit:"normaal",deadline:"",labels:"",assignees:[]}),O([]),J(!1),V({tone:"success",text:"Taak toegevoegd."}),Se()}catch(v){he(((y=(g=v==null?void 0:v.response)==null?void 0:g.data)==null?void 0:y.errors)??{})}finally{xe(!1)}},[_,pe,Se]),qe=l.useMemo(()=>[...s].sort((a,g)=>(a.deadline??"").localeCompare(g.deadline??"")),[s]);return r.jsxs(r.Fragment,{children:[r.jsx(rs,{title:"Taken"}),r.jsxs("div",{className:"mx-auto max-w-7xl px-4 pb-16 pt-10 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-zinc-900",children:"Taken"}),r.jsx("p",{className:"mt-1 text-sm text-zinc-500",children:"Overzicht per taak, project en team."})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsxs("div",{className:"flex items-center rounded-lg bg-white p-1 ring-1 ring-zinc-200",children:[r.jsx("button",{type:"button",className:Le("rounded-md px-3 py-2 text-sm font-semibold",p==="list"?"bg-zinc-900 text-white":"text-zinc-700"),onClick:()=>C("list"),children:"Lijst"}),r.jsx("button",{type:"button",className:Le("rounded-md px-3 py-2 text-sm font-semibold",p==="board"?"bg-zinc-900 text-white":"text-zinc-700"),onClick:()=>C("board"),children:"Board"}),r.jsx("button",{type:"button",className:Le("rounded-md px-3 py-2 text-sm font-semibold",p==="team"?"bg-zinc-900 text-white":"text-zinc-700"),onClick:()=>C("team"),children:"Team"})]}),r.jsx(de,{onClick:()=>J(!0),children:"Nieuwe taak"}),r.jsx(de,{tone:"secondary",onClick:()=>Be(!0),children:"Nieuw project"})]})]}),Pe?r.jsx("div",{className:Le("mt-6 rounded-xl border p-4 text-sm",Pe.tone==="error"?"border-rose-200 bg-rose-50 text-rose-900":"border-emerald-200 bg-emerald-50 text-emerald-900"),children:r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsx("div",{children:Pe.text}),r.jsx("button",{type:"button",className:"text-xs font-semibold",onClick:()=>V(null),children:"Sluiten"})]})}):null,r.jsxs("div",{className:"mt-6 rounded-2xl border border-zinc-200 bg-white p-4",children:[r.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Zoeken"}),r.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:A,onChange:a=>ue(a.target.value),placeholder:"Zoek op titel, omschrijving, labels"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Project"}),r.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:w,onChange:a=>E(a.target.value),children:[r.jsx("option",{value:"",children:"Alle projecten"}),o.map(a=>r.jsx("option",{value:a.id,children:a.naam},a.id))]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Status"}),r.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:D,onChange:a=>k(a.target.value),children:[r.jsx("option",{value:"",children:"Alle statussen"}),f.map(a=>r.jsx("option",{value:a,children:yt(a)},a))]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Prioriteit"}),r.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:P,onChange:a=>$(a.target.value),children:[r.jsx("option",{value:"",children:"Alle prioriteiten"}),m.map(a=>r.jsx("option",{value:a,children:Ue(a).label},a))]})]}),r.jsxs("div",{className:"md:col-span-2 lg:col-span-2",children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Assignee"}),r.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:R,onChange:a=>I(a.target.value),children:[r.jsx("option",{value:"",children:"Iedereen"}),c.map(a=>r.jsx("option",{value:a.id,children:a.name},a.id))]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Sorteren"}),r.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:S,onChange:a=>z(a.target.value),children:[r.jsx("option",{value:"deadline",children:"Deadline"}),r.jsx("option",{value:"prioriteit",children:"Prioriteit"}),r.jsx("option",{value:"nieuwste",children:"Nieuwste"})]})]}),p==="board"?r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Groepeer"}),r.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:b,onChange:a=>j(a.target.value),children:[r.jsx("option",{value:"project",children:"Project"}),r.jsx("option",{value:"status",children:"Status"})]})]}):null]}),r.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-zinc-500",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[fe?r.jsx("span",{className:"font-semibold text-zinc-700",children:"Laden..."}):null,r.jsxs("span",{children:[s.length," taken"]})]}),r.jsx(de,{tone:"ghost",onClick:()=>Se(),children:"Ververs"})]})]}),p==="list"?r.jsx("div",{className:"mt-6 overflow-hidden rounded-2xl border border-zinc-200 bg-white",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-zinc-200 text-sm",children:[r.jsx("thead",{className:"bg-zinc-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Taak"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Project"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Prioriteit"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Deadline"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Assignees"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Info"})]})}),r.jsx("tbody",{className:"divide-y divide-zinc-200",children:qe.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"px-4 py-10 text-center text-sm text-zinc-500",children:"Geen taken gevonden."})}):qe.map(a=>{var g,y,v,N;return r.jsxs("tr",{className:"hover:bg-zinc-50",children:[r.jsx("td",{className:"px-4 py-3",children:r.jsx("button",{type:"button",className:"font-semibold text-zinc-900 hover:underline",onClick:()=>Y(a.id),children:a.titel})}),r.jsx("td",{className:"px-4 py-3 text-zinc-600",children:((g=a.project)==null?void 0:g.naam)??"-"}),r.jsx("td",{className:"px-4 py-3 text-zinc-600",children:yt(a.status)}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:Le("rounded-full px-2 py-0.5 text-xs font-semibold",Ue(a.prioriteit).className),children:Ue(a.prioriteit).label})}),r.jsx("td",{className:"px-4 py-3 text-zinc-600",children:a.deadline?Dt(a.deadline):"-"}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("div",{className:"flex flex-wrap gap-2",children:(y=a.assignees)!=null&&y.length?a.assignees.map(L=>r.jsx(Ke,{children:L.name},L.id)):r.jsx("span",{className:"text-zinc-400",children:"-"})})}),r.jsx("td",{className:"px-4 py-3 text-zinc-600",children:r.jsxs("div",{className:"flex items-center gap-2",children:[(v=a.counts)!=null&&v.comments?r.jsxs(Ke,{children:[a.counts.comments," reacties"]}):null,(N=a.counts)!=null&&N.attachments?r.jsxs(Ke,{children:[a.counts.attachments," bijlagen"]}):null]})})]},a.id)})})]})})}):r.jsx("div",{className:"mt-6",children:r.jsxs(yr,{sensors:Tt,collisionDetection:Ds,onDragStart:Ve,onDragOver:U,onDragEnd:Te,children:[r.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:ve.map(a=>{const g=be[a.id]??[];return r.jsx("div",{className:"shrink-0",children:r.jsx(si,{title:a.title,subtitle:a.subtitle,count:g.length,footer:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{ref:Ie,className:"w-full rounded-md border-zinc-300 bg-white text-sm",placeholder:"Taak toevoegen...",value:Xe[a.id]??"",onChange:y=>pt(v=>({...v,[a.id]:y.target.value})),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),je({column:a,title:Xe[a.id]??""}))}}),r.jsx(de,{tone:"secondary",onClick:()=>je({column:a,title:Xe[a.id]??""}),children:"+"})]}),children:r.jsxs(Kr,{items:g,strategy:Yr,children:[g.length===0?r.jsx("div",{className:"rounded-lg border border-dashed border-zinc-200 bg-white px-4 py-6 text-center text-sm text-zinc-500",children:"Geen taken."}):null,g.map(y=>{const v=at(y),N=v?We[v]:null;return N?r.jsx(ni,{task:N,onOpen:Y},y):null})]})})},a.id)})}),r.jsx(_r,{children:Lt?r.jsx(ri,{task:Lt}):null})]})})]}),re?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-zinc-900/40 p-4",role:"dialog","aria-modal":"true",children:r.jsxs("div",{className:"w-full max-w-xl rounded-2xl bg-white p-6 shadow-xl",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-bold text-zinc-900",children:"Nieuw project"}),r.jsx("div",{className:"mt-1 text-sm text-zinc-500",children:"Maak een nieuwe projectkolom voor je board."})]}),r.jsx(de,{tone:"ghost",type:"button",onClick:()=>Be(!1),children:"Sluiten"})]}),r.jsxs("form",{className:"mt-6 space-y-4",onSubmit:ye,children:[r.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Naam"}),r.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:Z.naam,onChange:a=>Ne(g=>({...g,naam:a.target.value}))}),et.naam?r.jsx("div",{className:"mt-1 text-xs text-rose-600",children:(De=et.naam)==null?void 0:De[0]}):null]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Omschrijving"}),r.jsx("textarea",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",rows:3,value:Z.omschrijving,onChange:a=>Ne(g=>({...g,omschrijving:a.target.value}))})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Deadline"}),r.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:Z.deadline,onChange:a=>Ne(g=>({...g,deadline:a.target.value}))})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Kleur (optioneel)"}),r.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",placeholder:"#aabbcc",value:Z.kleur,onChange:a=>Ne(g=>({...g,kleur:a.target.value}))})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(de,{tone:"secondary",type:"button",onClick:()=>Be(!1),children:"Annuleren"}),r.jsx(de,{type:"submit",disabled:ge,children:ge?"Opslaan...":"Opslaan"})]})]})]})}):null,tt?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-zinc-900/40 p-4",role:"dialog","aria-modal":"true",children:r.jsxs("div",{className:"w-full max-w-2xl rounded-2xl bg-white p-6 shadow-xl",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-bold text-zinc-900",children:"Nieuwe taak"}),r.jsx("div",{className:"mt-1 text-sm text-zinc-500",children:"Maak snel een taak aan en koppel deze aan een project."})]}),r.jsx(de,{tone:"ghost",type:"button",onClick:()=>J(!1),children:"Sluiten"})]}),r.jsxs("form",{className:"mt-6 space-y-4",onSubmit:it,children:[r.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Titel"}),r.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:_.titel,onChange:a=>H(g=>({...g,titel:a.target.value}))}),He.titel?r.jsx("div",{className:"mt-1 text-xs text-rose-600",children:(Je=He.titel)==null?void 0:Je[0]}):null]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Omschrijving"}),r.jsx("textarea",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",rows:3,value:_.omschrijving,onChange:a=>H(g=>({...g,omschrijving:a.target.value}))})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Project"}),r.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:_.task_project_id,onChange:a=>H(g=>({...g,task_project_id:a.target.value})),children:[r.jsx("option",{value:"",children:"Geen"}),o.map(a=>r.jsx("option",{value:a.id,children:a.naam},a.id))]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Status"}),r.jsx("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:_.status,onChange:a=>H(g=>({...g,status:a.target.value})),children:f.map(a=>r.jsx("option",{value:a,children:yt(a)},a))})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Prioriteit"}),r.jsx("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:_.prioriteit,onChange:a=>H(g=>({...g,prioriteit:a.target.value})),children:m.map(a=>r.jsx("option",{value:a,children:Ue(a).label},a))})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Deadline"}),r.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:_.deadline,onChange:a=>H(g=>({...g,deadline:a.target.value}))})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Labels"}),r.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",placeholder:"bijv. lead, demo, urgent",value:_.labels,onChange:a=>H(g=>({...g,labels:a.target.value}))})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Assignees"}),r.jsx("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",multiple:!0,value:_.assignees.map(String),onChange:a=>{const g=Array.from(a.target.selectedOptions).map(y=>Number(y.value));H(y=>({...y,assignees:g}))},children:c.map(a=>r.jsx("option",{value:a.id,children:a.name},a.id))})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Bijlagen"}),r.jsx("input",{type:"file",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",multiple:!0,onChange:a=>O(Array.from(a.target.files??[]))})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(de,{tone:"secondary",type:"button",onClick:()=>J(!1),children:"Annuleren"}),r.jsx(de,{type:"submit",disabled:_e,children:_e?"Opslaan...":"Taak toevoegen"})]})]})]})}):null,ee?r.jsx("div",{className:"fixed inset-0 z-50 flex justify-end bg-zinc-900/40",role:"dialog","aria-modal":"true",children:r.jsxs("div",{className:"h-full w-full max-w-xl overflow-y-auto bg-white shadow-2xl",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4 border-b border-zinc-200 p-6",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-bold text-zinc-900",children:"Taak"}),r.jsx("div",{className:"mt-1 text-sm text-zinc-500",children:((ct=M==null?void 0:M.project)==null?void 0:ct.naam)??"Geen project"})]}),r.jsx(de,{tone:"ghost",onClick:ne,children:"Sluiten"})]}),ht?r.jsx("div",{className:"p-6 text-sm text-zinc-600",children:"Laden..."}):M?r.jsxs("div",{className:"p-6",children:[r.jsxs("form",{className:"space-y-6",onSubmit:ie,children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Titel"}),r.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:M.titel??"",onChange:a=>te(g=>({...g,titel:a.target.value}))})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Omschrijving"}),r.jsx("textarea",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",rows:4,value:M.omschrijving??"",onChange:a=>te(g=>({...g,omschrijving:a.target.value}))})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Project"}),r.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:M.task_project_id??"",onChange:a=>te(g=>({...g,task_project_id:a.target.value?Number(a.target.value):null})),children:[r.jsx("option",{value:"",children:"Geen"}),o.map(a=>r.jsx("option",{value:a.id,children:a.naam},a.id))]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Status"}),r.jsx("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:M.status??"open",onChange:a=>te(g=>({...g,status:a.target.value})),children:f.map(a=>r.jsx("option",{value:a,children:yt(a)},a))})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Prioriteit"}),r.jsx("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:M.prioriteit??"normaal",onChange:a=>te(g=>({...g,prioriteit:a.target.value})),children:m.map(a=>r.jsx("option",{value:a,children:Ue(a).label},a))})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Deadline"}),r.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:ti(M.deadline),onChange:a=>te(g=>({...g,deadline:a.target.value||null}))})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Labels"}),r.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",placeholder:"bijv. lead, demo, urgent",value:M.labels??"",onChange:a=>te(g=>({...g,labels:a.target.value}))})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Assignees"}),r.jsx("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",multiple:!0,value:(M.assignees??[]).map(a=>String(a.id)),onChange:a=>{const g=Array.from(a.target.selectedOptions).map(v=>Number(v.value)),y=c.filter(v=>g.includes(v.id)).map(v=>({id:v.id,name:v.name}));te(v=>({...v,assignees:y}))},children:c.map(a=>r.jsx("option",{value:a.id,children:a.name},a.id))}),r.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:"Tip: houd Ctrl ingedrukt om meerdere te kiezen."})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(de,{tone:"secondary",type:"button",onClick:ne,children:"Sluiten"}),r.jsx(de,{type:"submit",disabled:nt,children:nt?"Opslaan...":"Opslaan"})]})]}),r.jsxs("div",{className:"mt-10 border-t border-zinc-200 pt-6",children:[r.jsx("div",{className:"text-sm font-bold text-zinc-900",children:"Reacties"}),r.jsx("ul",{className:"mt-4 space-y-3",children:(xn=M.comments)!=null&&xn.length?M.comments.map(a=>{var g;return r.jsxs("li",{className:"rounded-xl border border-zinc-200 bg-white p-4",children:[r.jsxs("div",{className:"text-xs font-semibold text-zinc-500",children:[((g=a.author)==null?void 0:g.name)??"Onbekend","  ",a.created_at?Dt(a.created_at):"-"]}),r.jsx("div",{className:"mt-2 whitespace-pre-wrap text-sm text-zinc-700",children:a.body})]},a.id)}):r.jsx("li",{className:"text-sm text-zinc-500",children:"Nog geen reacties."})}),r.jsxs("form",{className:"mt-4 space-y-2",onSubmit:Oe,children:[r.jsx("textarea",{className:"w-full rounded-md border-zinc-300 text-sm",rows:3,value:rt,onChange:a=>gt(a.target.value),placeholder:"Schrijf een reactie en tag met @naam"}),r.jsx("div",{className:"flex justify-end",children:r.jsx(de,{type:"submit",disabled:It,children:It?"Plaatsen...":"Plaatsen"})})]})]}),r.jsxs("div",{className:"mt-10 border-t border-zinc-200 pt-6",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("div",{className:"text-sm font-bold text-zinc-900",children:"Bijlagen"}),r.jsxs("label",{className:"inline-flex cursor-pointer items-center gap-2 rounded-md bg-white px-3 py-2 text-sm font-semibold text-zinc-700 ring-1 ring-zinc-200 hover:bg-zinc-50",children:[r.jsx("input",{type:"file",className:"hidden",multiple:!0,onChange:a=>{const g=Array.from(a.target.files??[]);a.target.value="",ae(g)}}),Ge?"Uploaden...":"Upload"]})]}),(vn=M.attachments)!=null&&vn.length?r.jsx("ul",{className:"mt-4 space-y-2",children:M.attachments.map(a=>r.jsxs("li",{className:"flex items-center justify-between gap-3 rounded-xl border border-zinc-200 bg-white px-4 py-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"truncate text-sm font-semibold text-zinc-900",children:a.original_name}),r.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:a.mime??"bestand"})]}),r.jsx("a",{className:"text-sm font-semibold text-indigo-700 hover:text-indigo-900",href:a.url,target:"_blank",rel:"noopener",children:"Open"})]},a.id))}):r.jsx("div",{className:"mt-4 text-sm text-zinc-500",children:"Nog geen bijlagen."})]})]}):r.jsx("div",{className:"p-6 text-sm text-zinc-600",children:"Taak niet gevonden."})]})}):null]})}export{di as default};
