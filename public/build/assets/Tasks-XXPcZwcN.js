import{r as c,R as $,d as lt,j as i,H as Hn}from"./app-Clptx6nZ.js";import{a as Be}from"./module.esm-CDoHWUqT.js";function Wn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const At=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Qe(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Qt(e){return"nodeType"in e}function ae(e){var t,n;return e?Qe(e)?e:Qt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Zt(e){const{Document:t}=ae(e);return e instanceof t}function gt(e){return Qe(e)?!1:e instanceof ae(e).HTMLElement}function wn(e){return e instanceof ae(e).SVGElement}function Ze(e){return e?Qe(e)?e.document:Qt(e)?Zt(e)?e:gt(e)||wn(e)?e.ownerDocument:document:document:document}const Se=At?c.useLayoutEffect:c.useEffect;function Mt(e){const t=c.useRef(e);return Se(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function Gn(){const e=c.useRef(null),t=c.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function ft(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return Se(()=>{n.current!==e&&(n.current=e)},t),n}function pt(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function zt(e){const t=Mt(e),n=c.useRef(null),r=c.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function Et(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let Kt={};function xt(e,t){return c.useMemo(()=>{if(t)return t;const n=Kt[e]==null?0:Kt[e]+1;return Kt[e]=n,e+"-"+n},[e,t])}function jn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,d)=>{const a=Object.entries(d);for(const[u,f]of a){const h=o[u];h!=null&&(o[u]=h+e*f)}return o},{...t})}}const Je=jn(1),kt=jn(-1);function Vn(e){return"clientX"in e&&"clientY"in e}function Lt(e){if(!e)return!1;const{KeyboardEvent:t}=ae(e.target);return t&&e instanceof t}function qn(e){if(!e)return!1;const{TouchEvent:t}=ae(e.target);return t&&e instanceof t}function It(e){if(qn(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Vn(e)?{x:e.clientX,y:e.clientY}:null}const Ue=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ue.Translate.toString(e),Ue.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),an="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Jn(e){return e.matches(an)?e:e.querySelector(an)}const Qn={display:"none"};function Zn(e){let{id:t,value:n}=e;return $.createElement("div",{id:t,style:Qn},n)}function er(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return $.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function tr(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Nn=c.createContext(null);function nr(e){const t=c.useContext(Nn);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function rr(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:s,event:o}=r;e.forEach(d=>{var a;return(a=d[s])==null?void 0:a.call(d,o)})},[e]),t]}const sr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ir={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function or(e){let{announcements:t=ir,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=sr}=e;const{announce:o,announcement:d}=tr(),a=xt("DndLiveRegion"),[u,f]=c.useState(!1);if(c.useEffect(()=>{f(!0)},[]),nr(c.useMemo(()=>({onDragStart(m){let{active:x}=m;o(t.onDragStart({active:x}))},onDragMove(m){let{active:x,over:p}=m;t.onDragMove&&o(t.onDragMove({active:x,over:p}))},onDragOver(m){let{active:x,over:p}=m;o(t.onDragOver({active:x,over:p}))},onDragEnd(m){let{active:x,over:p}=m;o(t.onDragEnd({active:x,over:p}))},onDragCancel(m){let{active:x,over:p}=m;o(t.onDragCancel({active:x,over:p}))}}),[o,t])),!u)return null;const h=$.createElement($.Fragment,null,$.createElement(Zn,{id:r,value:s.draggable}),$.createElement(er,{id:a,announcement:d}));return n?lt.createPortal(h,n):h}var U;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(U||(U={}));function Ot(){}function ar(e,t){return c.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function lr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const De=Object.freeze({x:0,y:0});function cr(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function dr(e,t){const n=It(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function ur(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function fr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function ln(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function hr(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}const mr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=ln(t),o=[];for(const d of r){const{id:a}=d,u=n.get(a);if(u){const f=ln(u),h=s.reduce((x,p,C)=>x+cr(f[C],p),0),m=Number((h/4).toFixed(4));o.push({id:a,data:{droppableContainer:d,value:m}})}}return o.sort(ur)};function gr(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),d=s-r,a=o-n;if(r<s&&n<o){const u=t.width*t.height,f=e.width*e.height,h=d*a,m=h/(u+f-h);return Number(m.toFixed(4))}return 0}const pr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const o of r){const{id:d}=o,a=n.get(d);if(a){const u=gr(a,t);u>0&&s.push({id:d,data:{droppableContainer:o,value:u}})}}return s.sort(fr)};function xr(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Cn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:De}function vr(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((d,a)=>({...d,top:d.top+e*a.y,bottom:d.bottom+e*a.y,left:d.left+e*a.x,right:d.right+e*a.x}),{...n})}}const br=vr(1);function Sn(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function yr(e,t,n){const r=Sn(t);if(!r)return e;const{scaleX:s,scaleY:o,x:d,y:a}=r,u=e.left-d-(1-s)*parseFloat(n),f=e.top-a-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?e.width/s:e.width,m=o?e.height/o:e.height;return{width:h,height:m,top:f,right:u+h,bottom:f+m,left:u}}const wr={ignoreTransform:!1};function et(e,t){t===void 0&&(t=wr);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:h}=ae(e).getComputedStyle(e);f&&(n=yr(n,f,h))}const{top:r,left:s,width:o,height:d,bottom:a,right:u}=n;return{top:r,left:s,width:o,height:d,bottom:a,right:u}}function cn(e){return et(e,{ignoreTransform:!0})}function jr(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Nr(e,t){return t===void 0&&(t=ae(e).getComputedStyle(e)),t.position==="fixed"}function Cr(e,t){t===void 0&&(t=ae(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=t[s];return typeof o=="string"?n.test(o):!1})}function en(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(Zt(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!gt(s)||wn(s)||n.includes(s))return n;const o=ae(e).getComputedStyle(s);return s!==e&&Cr(s,o)&&n.push(s),Nr(s,o)?n:r(s.parentNode)}return e?r(e):n}function Dn(e){const[t]=en(e,1);return t??null}function Ht(e){return!At||!e?null:Qe(e)?e:Qt(e)?Zt(e)||e===Ze(e).scrollingElement?window:gt(e)?e:null:null}function Rn(e){return Qe(e)?e.scrollX:e.scrollLeft}function zn(e){return Qe(e)?e.scrollY:e.scrollTop}function Vt(e){return{x:Rn(e),y:zn(e)}}var H;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(H||(H={}));function En(e){return!At||!e?!1:e===document.scrollingElement}function kn(e){const t={x:0,y:0},n=En(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,d=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:d,isRight:a,maxScroll:r,minScroll:t}}const Sr={x:.2,y:.2};function Dr(e,t,n,r,s){let{top:o,left:d,right:a,bottom:u}=n;r===void 0&&(r=10),s===void 0&&(s=Sr);const{isTop:f,isBottom:h,isLeft:m,isRight:x}=kn(e),p={x:0,y:0},C={x:0,y:0},v={height:t.height*s.y,width:t.width*s.x};return!f&&o<=t.top+v.height?(p.y=H.Backward,C.y=r*Math.abs((t.top+v.height-o)/v.height)):!h&&u>=t.bottom-v.height&&(p.y=H.Forward,C.y=r*Math.abs((t.bottom-v.height-u)/v.height)),!x&&a>=t.right-v.width?(p.x=H.Forward,C.x=r*Math.abs((t.right-v.width-a)/v.width)):!m&&d<=t.left+v.width&&(p.x=H.Backward,C.x=r*Math.abs((t.left+v.width-d)/v.width)),{direction:p,speed:C}}function Rr(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:d}=window;return{top:0,left:0,right:o,bottom:d,width:o,height:d}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function In(e){return e.reduce((t,n)=>Je(t,Vt(n)),De)}function zr(e){return e.reduce((t,n)=>t+Rn(n),0)}function Er(e){return e.reduce((t,n)=>t+zn(n),0)}function On(e,t){if(t===void 0&&(t=et),!e)return;const{top:n,left:r,bottom:s,right:o}=t(e);Dn(e)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const kr=[["x",["left","right"],zr],["y",["top","bottom"],Er]];class tn{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=en(n),s=In(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,d,a]of kr)for(const u of d)Object.defineProperty(this,u,{get:()=>{const f=a(r),h=s[o]-f;return this.rect[u]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ct{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Ir(e){const{EventTarget:t}=ae(e);return e instanceof t?e:Ze(e)}function Wt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var pe;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(pe||(pe={}));function dn(e){e.preventDefault()}function Or(e){e.stopPropagation()}var L;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(L||(L={}));const Tn={start:[L.Space,L.Enter],cancel:[L.Esc],end:[L.Space,L.Enter,L.Tab]},Tr=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case L.Right:return{...n,x:n.x+25};case L.Left:return{...n,x:n.x-25};case L.Down:return{...n,y:n.y+25};case L.Up:return{...n,y:n.y-25}}};class An{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new ct(Ze(n)),this.windowListeners=new ct(ae(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(pe.Resize,this.handleCancel),this.windowListeners.add(pe.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(pe.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&On(r),n(De)}handleKeyDown(t){if(Lt(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=Tn,coordinateGetter:d=Tr,scrollBehavior:a="smooth"}=s,{code:u}=t;if(o.end.includes(u)){this.handleEnd(t);return}if(o.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:f}=r.current,h=f?{x:f.left,y:f.top}:De;this.referenceCoordinates||(this.referenceCoordinates=h);const m=d(t,{active:n,context:r.current,currentCoordinates:h});if(m){const x=kt(m,h),p={x:0,y:0},{scrollableAncestors:C}=r.current;for(const v of C){const w=t.code,{isTop:S,isRight:R,isLeft:N,isBottom:O,maxScroll:k,minScroll:A}=kn(v),D=Rr(v),z={x:Math.min(w===L.Right?D.right-D.width/2:D.right,Math.max(w===L.Right?D.left:D.left+D.width/2,m.x)),y:Math.min(w===L.Down?D.bottom-D.height/2:D.bottom,Math.max(w===L.Down?D.top:D.top+D.height/2,m.y))},B=w===L.Right&&!R||w===L.Left&&!N,F=w===L.Down&&!O||w===L.Up&&!S;if(B&&z.x!==m.x){const P=v.scrollLeft+x.x,ce=w===L.Right&&P<=k.x||w===L.Left&&P>=A.x;if(ce&&!x.y){v.scrollTo({left:P,behavior:a});return}ce?p.x=v.scrollLeft-P:p.x=w===L.Right?v.scrollLeft-k.x:v.scrollLeft-A.x,p.x&&v.scrollBy({left:-p.x,behavior:a});break}else if(F&&z.y!==m.y){const P=v.scrollTop+x.y,ce=w===L.Down&&P<=k.y||w===L.Up&&P>=A.y;if(ce&&!x.x){v.scrollTo({top:P,behavior:a});return}ce?p.y=v.scrollTop-P:p.y=w===L.Down?v.scrollTop-k.y:v.scrollTop-A.y,p.y&&v.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(t,Je(kt(m,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}An.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Tn,onActivation:s}=t,{active:o}=n;const{code:d}=e.nativeEvent;if(r.start.includes(d)){const a=o.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function un(e){return!!(e&&"distance"in e)}function fn(e){return!!(e&&"delay"in e)}class nn{constructor(t,n,r){var s;r===void 0&&(r=Ir(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:d}=o;this.props=t,this.events=n,this.document=Ze(d),this.documentListeners=new ct(this.document),this.listeners=new ct(r),this.windowListeners=new ct(ae(d)),this.initialCoordinates=(s=It(o))!=null?s:De,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(pe.Resize,this.handleCancel),this.windowListeners.add(pe.DragStart,dn),this.windowListeners.add(pe.VisibilityChange,this.handleCancel),this.windowListeners.add(pe.ContextMenu,dn),this.documentListeners.add(pe.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(fn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(un(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(pe.Click,Or,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(pe.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:d,options:{activationConstraint:a}}=o;if(!s)return;const u=(n=It(t))!=null?n:De,f=kt(s,u);if(!r&&a){if(un(a)){if(a.tolerance!=null&&Wt(f,a.tolerance))return this.handleCancel();if(Wt(f,a.distance))return this.handleStart()}if(fn(a)&&Wt(f,a.tolerance))return this.handleCancel();this.handlePending(a,f);return}t.cancelable&&t.preventDefault(),d(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===L.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Ar={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class rn extends nn{constructor(t){const{event:n}=t,r=Ze(n.target);super(t,Ar,r)}}rn.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Mr={move:{name:"mousemove"},end:{name:"mouseup"}};var qt;(function(e){e[e.RightClick=2]="RightClick"})(qt||(qt={}));class Lr extends nn{constructor(t){super(t,Mr,Ze(t.event.target))}}Lr.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===qt.RightClick?!1:(r==null||r({event:n}),!0)}}];const Gt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Pr extends nn{constructor(t){super(t,Gt)}static setup(){return window.addEventListener(Gt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Gt.move.name,t)};function t(){}}}Pr.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var dt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(dt||(dt={}));var Tt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Tt||(Tt={}));function Br(e){let{acceleration:t,activator:n=dt.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:d=5,order:a=Tt.TreeOrder,pointerCoordinates:u,scrollableAncestors:f,scrollableAncestorRects:h,delta:m,threshold:x}=e;const p=Fr({delta:m,disabled:!o}),[C,v]=Gn(),w=c.useRef({x:0,y:0}),S=c.useRef({x:0,y:0}),R=c.useMemo(()=>{switch(n){case dt.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case dt.DraggableRect:return s}},[n,s,u]),N=c.useRef(null),O=c.useCallback(()=>{const A=N.current;if(!A)return;const D=w.current.x*S.current.x,z=w.current.y*S.current.y;A.scrollBy(D,z)},[]),k=c.useMemo(()=>a===Tt.TreeOrder?[...f].reverse():f,[a,f]);c.useEffect(()=>{if(!o||!f.length||!R){v();return}for(const A of k){if((r==null?void 0:r(A))===!1)continue;const D=f.indexOf(A),z=h[D];if(!z)continue;const{direction:B,speed:F}=Dr(A,z,R,t,x);for(const P of["x","y"])p[P][B[P]]||(F[P]=0,B[P]=0);if(F.x>0||F.y>0){v(),N.current=A,C(O,d),w.current=F,S.current=B;return}}w.current={x:0,y:0},S.current={x:0,y:0},v()},[t,O,r,v,o,d,JSON.stringify(R),JSON.stringify(p),C,f,k,h,JSON.stringify(x)])}const $r={x:{[H.Backward]:!1,[H.Forward]:!1},y:{[H.Backward]:!1,[H.Forward]:!1}};function Fr(e){let{delta:t,disabled:n}=e;const r=Et(t);return pt(s=>{if(n||!r||!s)return $r;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[H.Backward]:s.x[H.Backward]||o.x===-1,[H.Forward]:s.x[H.Forward]||o.x===1},y:{[H.Backward]:s.y[H.Backward]||o.y===-1,[H.Forward]:s.y[H.Forward]||o.y===1}}},[n,t,r])}function _r(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return pt(s=>{var o;return t==null?null:(o=r??s)!=null?o:null},[r,t])}function Xr(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(d=>({eventName:d.eventName,handler:t(d.handler,r)}));return[...n,...o]},[]),[e,t])}var ht;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ht||(ht={}));var Jt;(function(e){e.Optimized="optimized"})(Jt||(Jt={}));const hn=new Map;function Yr(e,t){let{dragging:n,dependencies:r,config:s}=t;const[o,d]=c.useState(null),{frequency:a,measure:u,strategy:f}=s,h=c.useRef(e),m=w(),x=ft(m),p=c.useCallback(function(S){S===void 0&&(S=[]),!x.current&&d(R=>R===null?S:R.concat(S.filter(N=>!R.includes(N))))},[x]),C=c.useRef(null),v=pt(S=>{if(m&&!n)return hn;if(!S||S===hn||h.current!==e||o!=null){const R=new Map;for(let N of e){if(!N)continue;if(o&&o.length>0&&!o.includes(N.id)&&N.rect.current){R.set(N.id,N.rect.current);continue}const O=N.node.current,k=O?new tn(u(O),O):null;N.rect.current=k,k&&R.set(N.id,k)}return R}return S},[e,o,n,m,u]);return c.useEffect(()=>{h.current=e},[e]),c.useEffect(()=>{m||p()},[n,m]),c.useEffect(()=>{o&&o.length>0&&d(null)},[JSON.stringify(o)]),c.useEffect(()=>{m||typeof a!="number"||C.current!==null||(C.current=setTimeout(()=>{p(),C.current=null},a))},[a,m,p,...r]),{droppableRects:v,measureDroppableContainers:p,measuringScheduled:o!=null};function w(){switch(f){case ht.Always:return!1;case ht.BeforeDragging:return n;default:return!n}}}function sn(e,t){return pt(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Ur(e,t){return sn(e,t)}function Kr(e){let{callback:t,disabled:n}=e;const r=Mt(t),s=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return c.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Pt(e){let{callback:t,disabled:n}=e;const r=Mt(t),s=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return c.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Hr(e){return new tn(et(e),e)}function mn(e,t,n){t===void 0&&(t=Hr);const[r,s]=c.useState(null);function o(){s(u=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=u??n)!=null?f:null}const h=t(e);return JSON.stringify(u)===JSON.stringify(h)?u:h})}const d=Kr({callback(u){if(e)for(const f of u){const{type:h,target:m}=f;if(h==="childList"&&m instanceof HTMLElement&&m.contains(e)){o();break}}}}),a=Pt({callback:o});return Se(()=>{o(),e?(a==null||a.observe(e),d==null||d.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),d==null||d.disconnect())},[e]),r}function Wr(e){const t=sn(e);return Cn(e,t)}const gn=[];function Gr(e){const t=c.useRef(e),n=pt(r=>e?r&&r!==gn&&e&&t.current&&e.parentNode===t.current.parentNode?r:en(e):gn,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function Vr(e){const[t,n]=c.useState(null),r=c.useRef(e),s=c.useCallback(o=>{const d=Ht(o.target);d&&n(a=>a?(a.set(d,Vt(d)),new Map(a)):null)},[]);return c.useEffect(()=>{const o=r.current;if(e!==o){d(o);const a=e.map(u=>{const f=Ht(u);return f?(f.addEventListener("scroll",s,{passive:!0}),[f,Vt(f)]):null}).filter(u=>u!=null);n(a.length?new Map(a):null),r.current=e}return()=>{d(e),d(o)};function d(a){a.forEach(u=>{const f=Ht(u);f==null||f.removeEventListener("scroll",s)})}},[s,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,d)=>Je(o,d),De):In(e):De,[e,t])}function pn(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==De;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?kt(e,n.current):De}function qr(e){c.useEffect(()=>{if(!At)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Jr(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=d=>{o(d,t)},n},{}),[e,t])}function Mn(e){return c.useMemo(()=>e?jr(e):null,[e])}const xn=[];function Qr(e,t){t===void 0&&(t=et);const[n]=e,r=Mn(n?ae(n):null),[s,o]=c.useState(xn);function d(){o(()=>e.length?e.map(u=>En(u)?r:new tn(t(u),u)):xn)}const a=Pt({callback:d});return Se(()=>{a==null||a.disconnect(),d(),e.forEach(u=>a==null?void 0:a.observe(u))},[e]),s}function Ln(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return gt(t)?t:e}function Zr(e){let{measure:t}=e;const[n,r]=c.useState(null),s=c.useCallback(f=>{for(const{target:h}of f)if(gt(h)){r(m=>{const x=t(h);return m?{...m,width:x.width,height:x.height}:x});break}},[t]),o=Pt({callback:s}),d=c.useCallback(f=>{const h=Ln(f);o==null||o.disconnect(),h&&(o==null||o.observe(h)),r(h?t(h):null)},[t,o]),[a,u]=zt(d);return c.useMemo(()=>({nodeRef:a,rect:n,setRef:u}),[n,a,u])}const es=[{sensor:rn,options:{}},{sensor:An,options:{}}],ts={current:{}},Dt={draggable:{measure:cn},droppable:{measure:cn,strategy:ht.WhileDragging,frequency:Jt.Optimized},dragOverlay:{measure:et}};class ut extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const ns={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ut,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ot},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Dt,measureDroppableContainers:Ot,windowRect:null,measuringScheduled:!1},Pn={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ot,draggableNodes:new Map,over:null,measureDroppableContainers:Ot},vt=c.createContext(Pn),Bn=c.createContext(ns);function rs(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ut}}}function ss(e,t){switch(t.type){case U.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case U.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case U.DragEnd:case U.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case U.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new ut(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case U.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const d=new ut(e.droppable.containers);return d.set(n,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:d}}}case U.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new ut(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function is(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=c.useContext(vt),o=Et(r),d=Et(n==null?void 0:n.id);return c.useEffect(()=>{if(!t&&!r&&o&&d!=null){if(!Lt(o)||document.activeElement===o.target)return;const a=s.get(d);if(!a)return;const{activatorNode:u,node:f}=a;if(!u.current&&!f.current)return;requestAnimationFrame(()=>{for(const h of[u.current,f.current]){if(!h)continue;const m=Jn(h);if(m){m.focus();break}}})}},[r,t,s,d,o]),null}function $n(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,o)=>o({transform:s,...r}),n):n}function os(e){return c.useMemo(()=>({draggable:{...Dt.draggable,...e==null?void 0:e.draggable},droppable:{...Dt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Dt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function as(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const o=c.useRef(!1),{x:d,y:a}=typeof s=="boolean"?{x:s,y:s}:s;Se(()=>{if(!d&&!a||!t){o.current=!1;return}if(o.current||!r)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const h=n(f),m=Cn(h,r);if(d||(m.x=0),a||(m.y=0),o.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const x=Dn(f);x&&x.scrollBy({top:m.y,left:m.x})}},[t,d,a,r,n])}const Bt=c.createContext({...De,scaleX:1,scaleY:1});var Xe;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Xe||(Xe={}));const ls=c.memo(function(t){var n,r,s,o;let{id:d,accessibility:a,autoScroll:u=!0,children:f,sensors:h=es,collisionDetection:m=pr,measuring:x,modifiers:p,...C}=t;const v=c.useReducer(ss,void 0,rs),[w,S]=v,[R,N]=rr(),[O,k]=c.useState(Xe.Uninitialized),A=O===Xe.Initialized,{draggable:{active:D,nodes:z,translate:B},droppable:{containers:F}}=w,P=D!=null?z.get(D):null,ce=c.useRef({initial:null,translated:null}),de=c.useMemo(()=>{var K;return D!=null?{id:D,data:(K=P==null?void 0:P.data)!=null?K:ts,rect:ce}:null},[D,P]),ue=c.useRef(null),[Oe,V]=c.useState(null),[re,Te]=c.useState(null),q=ft(C,Object.values(C)),xe=xt("DndDescribedBy",d),Ke=c.useMemo(()=>F.getEnabled(),[F]),W=os(x),{droppableRects:me,measureDroppableContainers:Re,measuringScheduled:se}=Yr(Ke,{dragging:A,dependencies:[B.x,B.y],config:W.droppable}),ie=_r(z,D),I=c.useMemo(()=>re?It(re):null,[re]),_=Xt(),ve=Ur(ie,W.draggable.measure);as({activeNode:D!=null?z.get(D):null,config:_.layoutShiftCompensation,initialRect:ve,measure:W.draggable.measure});const M=mn(ie,W.draggable.measure,ve),Fe=mn(ie?ie.parentElement:null),fe=c.useRef({activatorEvent:null,active:null,activeNode:ie,collisionRect:null,collisions:null,droppableRects:me,draggableNodes:z,draggingNode:null,draggingNodeRect:null,droppableContainers:F,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),be=F.getNodeFor((n=fe.current.over)==null?void 0:n.id),ge=Zr({measure:W.dragOverlay.measure}),Ae=(r=ge.nodeRef.current)!=null?r:ie,Me=A?(s=ge.rect)!=null?s:M:null,bt=!!(ge.nodeRef.current&&ge.rect),tt=Wr(bt?null:M),He=Mn(Ae?ae(Ae):null),ye=Gr(A?be??ie:null),Ge=Qr(ye),Ve=$n(p,{transform:{x:B.x-tt.x,y:B.y-tt.y,scaleX:1,scaleY:1},activatorEvent:re,active:de,activeNodeRect:M,containerNodeRect:Fe,draggingNodeRect:Me,over:fe.current.over,overlayNodeRect:ge.rect,scrollableAncestors:ye,scrollableAncestorRects:Ge,windowRect:He}),ze=I?Je(I,B):null,Le=Vr(ye),J=pn(Le),we=pn(Le,[M]),G=Je(Ve,J),Ee=Me?br(Me,Ve):null,_e=de&&Ee?m({active:de,collisionRect:Ee,droppableRects:me,droppableContainers:Ke,pointerCoordinates:ze}):null,nt=hr(_e,"id"),[je,rt]=c.useState(null),yt=bt?Ve:Je(Ve,we),$t=xr(yt,(o=je==null?void 0:je.rect)!=null?o:null,M),st=c.useRef(null),wt=c.useCallback((K,Q)=>{let{sensor:Z,options:Ne}=Q;if(ue.current==null)return;const oe=z.get(ue.current);if(!oe)return;const ee=K.nativeEvent,he=new Z({active:ue.current,activeNode:oe,event:ee,options:Ne,context:fe,onAbort(g){if(!z.get(g))return;const{onDragAbort:b}=q.current,j={id:g};b==null||b(j),R({type:"onDragAbort",event:j})},onPending(g,y,b,j){if(!z.get(g))return;const{onDragPending:T}=q.current,X={id:g,constraint:y,initialCoordinates:b,offset:j};T==null||T(X),R({type:"onDragPending",event:X})},onStart(g){const y=ue.current;if(y==null)return;const b=z.get(y);if(!b)return;const{onDragStart:j}=q.current,E={activatorEvent:ee,active:{id:y,data:b.data,rect:ce}};lt.unstable_batchedUpdates(()=>{j==null||j(E),k(Xe.Initializing),S({type:U.DragStart,initialCoordinates:g,active:y}),R({type:"onDragStart",event:E}),V(st.current),Te(ee)})},onMove(g){S({type:U.DragMove,coordinates:g})},onEnd:l(U.DragEnd),onCancel:l(U.DragCancel)});st.current=he;function l(g){return async function(){const{active:b,collisions:j,over:E,scrollAdjustedTranslate:T}=fe.current;let X=null;if(b&&T){const{cancelDrop:te}=q.current;X={activatorEvent:ee,active:b,collisions:j,delta:T,over:E},g===U.DragEnd&&typeof te=="function"&&await Promise.resolve(te(X))&&(g=U.DragCancel)}ue.current=null,lt.unstable_batchedUpdates(()=>{S({type:g}),k(Xe.Uninitialized),rt(null),V(null),Te(null),st.current=null;const te=g===U.DragEnd?"onDragEnd":"onDragCancel";if(X){const Ce=q.current[te];Ce==null||Ce(X),R({type:te,event:X})}})}}},[z]),it=c.useCallback((K,Q)=>(Z,Ne)=>{const oe=Z.nativeEvent,ee=z.get(Ne);if(ue.current!==null||!ee||oe.dndKit||oe.defaultPrevented)return;const he={active:ee};K(Z,Q.options,he)===!0&&(oe.dndKit={capturedBy:Q.sensor},ue.current=Ne,wt(Z,Q))},[z,wt]),qe=Xr(h,it);qr(h),Se(()=>{M&&O===Xe.Initializing&&k(Xe.Initialized)},[M,O]),c.useEffect(()=>{const{onDragMove:K}=q.current,{active:Q,activatorEvent:Z,collisions:Ne,over:oe}=fe.current;if(!Q||!Z)return;const ee={active:Q,activatorEvent:Z,collisions:Ne,delta:{x:G.x,y:G.y},over:oe};lt.unstable_batchedUpdates(()=>{K==null||K(ee),R({type:"onDragMove",event:ee})})},[G.x,G.y]),c.useEffect(()=>{const{active:K,activatorEvent:Q,collisions:Z,droppableContainers:Ne,scrollAdjustedTranslate:oe}=fe.current;if(!K||ue.current==null||!Q||!oe)return;const{onDragOver:ee}=q.current,he=Ne.get(nt),l=he&&he.rect.current?{id:he.id,rect:he.rect.current,data:he.data,disabled:he.disabled}:null,g={active:K,activatorEvent:Q,collisions:Z,delta:{x:oe.x,y:oe.y},over:l};lt.unstable_batchedUpdates(()=>{rt(l),ee==null||ee(g),R({type:"onDragOver",event:g})})},[nt]),Se(()=>{fe.current={activatorEvent:re,active:de,activeNode:ie,collisionRect:Ee,collisions:_e,droppableRects:me,draggableNodes:z,draggingNode:Ae,draggingNodeRect:Me,droppableContainers:F,over:je,scrollableAncestors:ye,scrollAdjustedTranslate:G},ce.current={initial:Me,translated:Ee}},[de,ie,_e,Ee,z,Ae,Me,me,F,je,ye,G]),Br({..._,delta:B,draggingRect:Ee,pointerCoordinates:ze,scrollableAncestors:ye,scrollableAncestorRects:Ge});const Ft=c.useMemo(()=>({active:de,activeNode:ie,activeNodeRect:M,activatorEvent:re,collisions:_e,containerNodeRect:Fe,dragOverlay:ge,draggableNodes:z,droppableContainers:F,droppableRects:me,over:je,measureDroppableContainers:Re,scrollableAncestors:ye,scrollableAncestorRects:Ge,measuringConfiguration:W,measuringScheduled:se,windowRect:He}),[de,ie,M,re,_e,Fe,ge,z,F,me,je,Re,ye,Ge,W,se,He]),_t=c.useMemo(()=>({activatorEvent:re,activators:qe,active:de,activeNodeRect:M,ariaDescribedById:{draggable:xe},dispatch:S,draggableNodes:z,over:je,measureDroppableContainers:Re}),[re,qe,de,M,S,xe,z,je,Re]);return $.createElement(Nn.Provider,{value:N},$.createElement(vt.Provider,{value:_t},$.createElement(Bn.Provider,{value:Ft},$.createElement(Bt.Provider,{value:$t},f)),$.createElement(is,{disabled:(a==null?void 0:a.restoreFocus)===!1})),$.createElement(or,{...a,hiddenTextDescribedById:xe}));function Xt(){const K=(Oe==null?void 0:Oe.autoScrollEnabled)===!1,Q=typeof u=="object"?u.enabled===!1:u===!1,Z=A&&!K&&!Q;return typeof u=="object"?{...u,enabled:Z}:{enabled:Z}}}),cs=c.createContext(null),vn="button",ds="Draggable";function us(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const o=xt(ds),{activators:d,activatorEvent:a,active:u,activeNodeRect:f,ariaDescribedById:h,draggableNodes:m,over:x}=c.useContext(vt),{role:p=vn,roleDescription:C="draggable",tabIndex:v=0}=s??{},w=(u==null?void 0:u.id)===t,S=c.useContext(w?Bt:cs),[R,N]=zt(),[O,k]=zt(),A=Jr(d,t),D=ft(n);Se(()=>(m.set(t,{id:t,key:o,node:R,activatorNode:O,data:D}),()=>{const B=m.get(t);B&&B.key===o&&m.delete(t)}),[m,t]);const z=c.useMemo(()=>({role:p,tabIndex:v,"aria-disabled":r,"aria-pressed":w&&p===vn?!0:void 0,"aria-roledescription":C,"aria-describedby":h.draggable}),[r,p,v,w,C,h.draggable]);return{active:u,activatorEvent:a,activeNodeRect:f,attributes:z,isDragging:w,listeners:r?void 0:A,node:R,over:x,setNodeRef:N,setActivatorNodeRef:k,transform:S}}function Fn(){return c.useContext(Bn)}const fs="Droppable",hs={timeout:25};function ms(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const o=xt(fs),{active:d,dispatch:a,over:u,measureDroppableContainers:f}=c.useContext(vt),h=c.useRef({disabled:n}),m=c.useRef(!1),x=c.useRef(null),p=c.useRef(null),{disabled:C,updateMeasurementsFor:v,timeout:w}={...hs,...s},S=ft(v??r),R=c.useCallback(()=>{if(!m.current){m.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{f(Array.isArray(S.current)?S.current:[S.current]),p.current=null},w)},[w]),N=Pt({callback:R,disabled:C||!d}),O=c.useCallback((z,B)=>{N&&(B&&(N.unobserve(B),m.current=!1),z&&N.observe(z))},[N]),[k,A]=zt(O),D=ft(t);return c.useEffect(()=>{!N||!k.current||(N.disconnect(),m.current=!1,N.observe(k.current))},[k,N]),c.useEffect(()=>(a({type:U.RegisterDroppable,element:{id:r,key:o,disabled:n,node:k,rect:x,data:D}}),()=>a({type:U.UnregisterDroppable,key:o,id:r})),[r]),c.useEffect(()=>{n!==h.current.disabled&&(a({type:U.SetDroppableDisabled,id:r,key:o,disabled:n}),h.current.disabled=n)},[r,o,n,a]),{active:d,rect:x,isOver:(u==null?void 0:u.id)===r,node:k,over:u,setNodeRef:A}}function gs(e){let{animation:t,children:n}=e;const[r,s]=c.useState(null),[o,d]=c.useState(null),a=Et(n);return!n&&!r&&a&&s(a),Se(()=>{if(!o)return;const u=r==null?void 0:r.key,f=r==null?void 0:r.props.id;if(u==null||f==null){s(null);return}Promise.resolve(t(f,o)).then(()=>{s(null)})},[t,r,o]),$.createElement($.Fragment,null,n,r?c.cloneElement(r,{ref:d}):null)}const ps={x:0,y:0,scaleX:1,scaleY:1};function xs(e){let{children:t}=e;return $.createElement(vt.Provider,{value:Pn},$.createElement(Bt.Provider,{value:ps},t))}const vs={position:"fixed",touchAction:"none"},bs=e=>Lt(e)?"transform 250ms ease":void 0,ys=c.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:o,className:d,rect:a,style:u,transform:f,transition:h=bs}=e;if(!a)return null;const m=s?f:{...f,scaleX:1,scaleY:1},x={...vs,width:a.width,height:a.height,top:a.top,left:a.left,transform:Ue.Transform.toString(m),transformOrigin:s&&r?dr(r,a):void 0,transition:typeof h=="function"?h(r):h,...u};return $.createElement(n,{className:d,style:x,ref:t},o)}),ws=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:o,className:d}=e;if(o!=null&&o.active)for(const[a,u]of Object.entries(o.active))u!==void 0&&(s[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,u));if(o!=null&&o.dragOverlay)for(const[a,u]of Object.entries(o.dragOverlay))u!==void 0&&r.node.style.setProperty(a,u);return d!=null&&d.active&&n.node.classList.add(d.active),d!=null&&d.dragOverlay&&r.node.classList.add(d.dragOverlay),function(){for(const[u,f]of Object.entries(s))n.node.style.setProperty(u,f);d!=null&&d.active&&n.node.classList.remove(d.active)}},js=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Ue.Transform.toString(t)},{transform:Ue.Transform.toString(n)}]},Ns={duration:250,easing:"ease",keyframes:js,sideEffects:ws({styles:{active:{opacity:"0"}}})};function Cs(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return Mt((o,d)=>{if(t===null)return;const a=n.get(o);if(!a)return;const u=a.node.current;if(!u)return;const f=Ln(d);if(!f)return;const{transform:h}=ae(d).getComputedStyle(d),m=Sn(h);if(!m)return;const x=typeof t=="function"?t:Ss(t);return On(u,s.draggable.measure),x({active:{id:o,data:a.data,node:u,rect:s.draggable.measure(u)},draggableNodes:n,dragOverlay:{node:d,rect:s.dragOverlay.measure(f)},droppableContainers:r,measuringConfiguration:s,transform:m})})}function Ss(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...Ns,...e};return o=>{let{active:d,dragOverlay:a,transform:u,...f}=o;if(!t)return;const h={x:a.rect.left-d.rect.left,y:a.rect.top-d.rect.top},m={scaleX:u.scaleX!==1?d.rect.width*u.scaleX/a.rect.width:1,scaleY:u.scaleY!==1?d.rect.height*u.scaleY/a.rect.height:1},x={x:u.x-h.x,y:u.y-h.y,...m},p=s({...f,active:d,dragOverlay:a,transform:{initial:u,final:x}}),[C]=p,v=p[p.length-1];if(JSON.stringify(C)===JSON.stringify(v))return;const w=r==null?void 0:r({active:d,dragOverlay:a,...f}),S=a.node.animate(p,{duration:t,easing:n,fill:"forwards"});return new Promise(R=>{S.onfinish=()=>{w==null||w(),R()}})}}let bn=0;function Ds(e){return c.useMemo(()=>{if(e!=null)return bn++,bn},[e])}const Rs=$.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:o,modifiers:d,wrapperElement:a="div",className:u,zIndex:f=999}=e;const{activatorEvent:h,active:m,activeNodeRect:x,containerNodeRect:p,draggableNodes:C,droppableContainers:v,dragOverlay:w,over:S,measuringConfiguration:R,scrollableAncestors:N,scrollableAncestorRects:O,windowRect:k}=Fn(),A=c.useContext(Bt),D=Ds(m==null?void 0:m.id),z=$n(d,{activatorEvent:h,active:m,activeNodeRect:x,containerNodeRect:p,draggingNodeRect:w.rect,over:S,overlayNodeRect:w.rect,scrollableAncestors:N,scrollableAncestorRects:O,transform:A,windowRect:k}),B=sn(x),F=Cs({config:r,draggableNodes:C,droppableContainers:v,measuringConfiguration:R}),P=B?w.setRef:void 0;return $.createElement(xs,null,$.createElement(gs,{animation:F},m&&D?$.createElement(ys,{key:D,id:m.id,ref:P,as:a,activatorEvent:h,adjustScale:t,className:u,transition:o,rect:B,style:{zIndex:f,...s},transform:z},n):null))});function on(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function zs(e,t){return e.reduce((n,r,s)=>{const o=t.get(r);return o&&(n[s]=o),n},Array(e.length))}function Nt(e){return e!==null&&e>=0}function Es(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ks(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const _n=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const o=on(t,r,n),d=t[s],a=o[s];return!a||!d?null:{x:a.left-d.left,y:a.top-d.top,scaleX:a.width/d.width,scaleY:a.height/d.height}},Ct={scaleX:1,scaleY:1},Is=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:o,overIndex:d}=e;const a=(t=o[n])!=null?t:r;if(!a)return null;if(s===n){const f=o[d];return f?{x:0,y:n<d?f.top+f.height-(a.top+a.height):f.top-a.top,...Ct}:null}const u=Os(o,s,n);return s>n&&s<=d?{x:0,y:-a.height-u,...Ct}:s<n&&s>=d?{x:0,y:a.height+u,...Ct}:{x:0,y:0,...Ct}};function Os(e,t,n){const r=e[t],s=e[t-1],o=e[t+1];return r?n<t?s?r.top-(s.top+s.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Xn="Sortable",Yn=$.createContext({activeIndex:-1,containerId:Xn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:_n,disabled:{draggable:!1,droppable:!1}});function Ts(e){let{children:t,id:n,items:r,strategy:s=_n,disabled:o=!1}=e;const{active:d,dragOverlay:a,droppableRects:u,over:f,measureDroppableContainers:h}=Fn(),m=xt(Xn,n),x=a.rect!==null,p=c.useMemo(()=>r.map(A=>typeof A=="object"&&"id"in A?A.id:A),[r]),C=d!=null,v=d?p.indexOf(d.id):-1,w=f?p.indexOf(f.id):-1,S=c.useRef(p),R=!Es(p,S.current),N=w!==-1&&v===-1||R,O=ks(o);Se(()=>{R&&C&&h(p)},[R,p,C,h]),c.useEffect(()=>{S.current=p},[p]);const k=c.useMemo(()=>({activeIndex:v,containerId:m,disabled:O,disableTransforms:N,items:p,overIndex:w,useDragOverlay:x,sortedRects:zs(p,u),strategy:s}),[v,m,O.draggable,O.droppable,N,p,w,u,x,s]);return $.createElement(Yn.Provider,{value:k},t)}const As=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return on(n,r,s).indexOf(t)},Ms=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:o,newIndex:d,previousItems:a,previousContainerId:u,transition:f}=e;return!f||!r||a!==o&&s===d?!1:n?!0:d!==s&&t===u},Ls={duration:200,easing:"ease"},Un="transform",Ps=Ue.Transition.toString({property:Un,duration:0,easing:"linear"}),Bs={roleDescription:"sortable"};function $s(e){let{disabled:t,index:n,node:r,rect:s}=e;const[o,d]=c.useState(null),a=c.useRef(n);return Se(()=>{if(!t&&n!==a.current&&r.current){const u=s.current;if(u){const f=et(r.current,{ignoreTransform:!0}),h={x:u.left-f.left,y:u.top-f.top,scaleX:u.width/f.width,scaleY:u.height/f.height};(h.x||h.y)&&d(h)}}n!==a.current&&(a.current=n)},[t,n,r,s]),c.useEffect(()=>{o&&d(null)},[o]),o}function Fs(e){let{animateLayoutChanges:t=Ms,attributes:n,disabled:r,data:s,getNewIndex:o=As,id:d,strategy:a,resizeObserverConfig:u,transition:f=Ls}=e;const{items:h,containerId:m,activeIndex:x,disabled:p,disableTransforms:C,sortedRects:v,overIndex:w,useDragOverlay:S,strategy:R}=c.useContext(Yn),N=_s(r,p),O=h.indexOf(d),k=c.useMemo(()=>({sortable:{containerId:m,index:O,items:h},...s}),[m,s,O,h]),A=c.useMemo(()=>h.slice(h.indexOf(d)),[h,d]),{rect:D,node:z,isOver:B,setNodeRef:F}=ms({id:d,data:k,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:A,...u}}),{active:P,activatorEvent:ce,activeNodeRect:de,attributes:ue,setNodeRef:Oe,listeners:V,isDragging:re,over:Te,setActivatorNodeRef:q,transform:xe}=us({id:d,data:k,attributes:{...Bs,...n},disabled:N.draggable}),Ke=Wn(F,Oe),W=!!P,me=W&&!C&&Nt(x)&&Nt(w),Re=!S&&re,se=Re&&me?xe:null,I=me?se??(a??R)({rects:v,activeNodeRect:de,activeIndex:x,overIndex:w,index:O}):null,_=Nt(x)&&Nt(w)?o({id:d,items:h,activeIndex:x,overIndex:w}):O,ve=P==null?void 0:P.id,M=c.useRef({activeId:ve,items:h,newIndex:_,containerId:m}),Fe=h!==M.current.items,fe=t({active:P,containerId:m,isDragging:re,isSorting:W,id:d,index:O,items:h,newIndex:M.current.newIndex,previousItems:M.current.items,previousContainerId:M.current.containerId,transition:f,wasDragging:M.current.activeId!=null}),be=$s({disabled:!fe,index:O,node:z,rect:D});return c.useEffect(()=>{W&&M.current.newIndex!==_&&(M.current.newIndex=_),m!==M.current.containerId&&(M.current.containerId=m),h!==M.current.items&&(M.current.items=h)},[W,_,m,h]),c.useEffect(()=>{if(ve===M.current.activeId)return;if(ve!=null&&M.current.activeId==null){M.current.activeId=ve;return}const Ae=setTimeout(()=>{M.current.activeId=ve},50);return()=>clearTimeout(Ae)},[ve]),{active:P,activeIndex:x,attributes:ue,data:k,rect:D,index:O,newIndex:_,items:h,isOver:B,isSorting:W,isDragging:re,listeners:V,node:z,overIndex:w,over:Te,setNodeRef:Ke,setActivatorNodeRef:q,setDroppableNodeRef:F,setDraggableNodeRef:Oe,transform:be??I,transition:ge()};function ge(){if(be||Fe&&M.current.newIndex===O)return Ps;if(!(Re&&!Lt(ce)||!f)&&(W||fe))return Ue.Transition.toString({...f,property:Un})}}function _s(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}L.Down,L.Right,L.Up,L.Left;function mt(e){if(!e)return null;try{return new Intl.DateTimeFormat("nl-NL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}catch{return String(e)}}function Rt(e){return e?String(e).replace(/_/g," "):""}function Ye(e){switch(e){case"kritiek":return{label:"Kritiek",className:"bg-rose-600 text-white"};case"hoog":return{label:"Hoog",className:"bg-amber-500 text-white"};case"laag":return{label:"Laag",className:"bg-zinc-200 text-zinc-800"};default:return{label:"Normaal",className:"bg-indigo-50 text-indigo-700"}}}function Xs(e){return String(e||"").trim().split(" ").filter(Boolean).map(t=>t.slice(0,1)).join("").slice(0,2).toUpperCase()}function Ie(...e){return e.filter(Boolean).join(" ")}function We(e){const t=Number(String(e).replace(/[^\d]/g,""));return Number.isFinite(t)?t:null}function ke({tone:e="primary",className:t="",...n}){const r="inline-flex items-center justify-center rounded-md px-3 py-2 text-sm font-semibold transition",s={primary:"bg-zinc-900 text-white hover:bg-zinc-800",secondary:"bg-white text-zinc-900 ring-1 ring-zinc-200 hover:bg-zinc-50",ghost:"bg-transparent text-zinc-700 hover:bg-zinc-100",danger:"bg-rose-600 text-white hover:bg-rose-500"};return i.jsx("button",{className:Ie(r,s[e],t),...n})}function $e({children:e,className:t=""}){return i.jsx("span",{className:Ie("inline-flex items-center rounded-full bg-zinc-100 px-2 py-0.5 text-xs font-semibold text-zinc-700",t),children:e})}function Ys({task:e,onOpen:t}){var h,m,x,p,C;const n=`task-${e.id}`,{attributes:r,listeners:s,setNodeRef:o,transform:d,transition:a,isDragging:u}=Fs({id:n}),f={transform:Ue.Transform.toString(d),transition:a};return i.jsx("div",{ref:o,style:f,className:Ie("rounded-xl border bg-white p-3 shadow-sm",u?"opacity-60":"opacity-100"),...r,...s,children:i.jsxs("button",{type:"button",className:"w-full text-left",onClick:()=>t(e.id),children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"truncate text-sm font-semibold text-zinc-900",children:e.titel}),(h=e.project)!=null&&h.naam?i.jsx("div",{className:"mt-1 truncate text-xs text-zinc-500",children:e.project.naam}):null]}),i.jsx("span",{className:Ie("shrink-0 rounded-full px-2 py-0.5 text-[11px] font-semibold",Ye(e.prioriteit).className),children:Ye(e.prioriteit).label})]}),i.jsxs("div",{className:"mt-3 flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[e.deadline?i.jsx($e,{children:mt(e.deadline)}):i.jsx($e,{className:"text-zinc-400",children:"Geen deadline"}),(m=e.counts)!=null&&m.comments?i.jsxs($e,{children:[e.counts.comments," reacties"]}):null,(x=e.counts)!=null&&x.attachments?i.jsxs($e,{children:[e.counts.attachments," bijlagen"]}):null]}),i.jsxs("div",{className:"flex items-center gap-1",children:[(p=e.assignees)==null?void 0:p.slice(0,2).map(v=>i.jsx("span",{className:"grid h-7 w-7 place-items-center rounded-full bg-zinc-100 text-xs font-bold text-zinc-700",title:v.name,children:Xs(v.name)||"--"},v.id)),((C=e.assignees)==null?void 0:C.length)>2?i.jsxs("span",{className:"grid h-7 w-7 place-items-center rounded-full bg-zinc-100 text-xs font-bold text-zinc-700",title:"Meer",children:["+",e.assignees.length-2]}):null]})]})]})})}function Us({title:e,subtitle:t,count:n,children:r,footer:s}){return i.jsxs("div",{className:"flex w-[340px] flex-col rounded-2xl border border-zinc-200 bg-zinc-50/60",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-zinc-200 px-4 py-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"truncate text-sm font-semibold text-zinc-900",children:e}),t?i.jsx("div",{className:"mt-0.5 truncate text-xs text-zinc-500",children:t}):null]}),i.jsx("span",{className:"shrink-0 rounded-full bg-zinc-200 px-2 py-0.5 text-xs font-semibold text-zinc-700",children:n})]}),i.jsx("div",{className:"flex-1 space-y-3 overflow-y-auto px-4 py-3",children:r}),s?i.jsx("div",{className:"border-t border-zinc-200 px-4 py-3",children:s}):null]})}function Ks({task:e}){return e?i.jsxs("div",{className:"w-[330px] rounded-xl border bg-white p-3 shadow-lg",children:[i.jsx("div",{className:"truncate text-sm font-semibold text-zinc-900",children:e.titel}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsx("span",{className:Ie("rounded-full px-2 py-0.5 text-[11px] font-semibold",Ye(e.prioriteit).className),children:Ye(e.prioriteit).label}),e.deadline?i.jsx($e,{children:mt(e.deadline)}):i.jsx($e,{className:"text-zinc-400",children:"Geen deadline"})]})]}):null}function Hs({view:e,groupBoardBy:t,projects:n,users:r,statusOptions:s}){const o=[],d=e==="team"?"assignee":t;return d==="project"?(o.push({id:"col-project-inbox",title:"Inbox",subtitle:"Geen project",projectId:null}),n.forEach(a=>{o.push({id:`col-project-${a.id}`,title:a.naam,subtitle:a.deadline?`Deadline: ${mt(a.deadline)}`:null,projectId:a.id})})):d==="status"?s.forEach(a=>o.push({id:`col-status-${a}`,title:Rt(a),subtitle:null,status:a})):(o.push({id:"col-assignee-unassigned",title:"Niet toegewezen",subtitle:null,assigneeId:null}),r.forEach(a=>o.push({id:`col-assignee-${a.id}`,title:a.name,subtitle:null,assigneeId:a.id}))),{group:d,columns:o}}function Ws(e){var n,r;return((r=(n=e.assignees)==null?void 0:n[0])==null?void 0:r.id)??null}function Gs(e,t){if(t==="project")return e.task_project_id?`col-project-${e.task_project_id}`:"col-project-inbox";if(t==="status")return`col-status-${e.status}`;const n=Ws(e);return n?`col-assignee-${n}`:"col-assignee-unassigned"}function yn(e,t,n){const r=Object.fromEntries(t.map(s=>[s.id,[]]));return e.forEach(s=>{const o=Gs(s,n);r[o]||(r[o]=[]),r[o].push(`task-${s.id}`)}),Object.keys(r).forEach(s=>{r[s]=r[s].map(o=>({id:o,taskId:We(o)})).filter(o=>o.taskId).sort((o,d)=>{const a=e.find(m=>m.id===o.taskId),u=e.find(m=>m.id===d.taskId),f=(a==null?void 0:a.sort_order)??0,h=(u==null?void 0:u.sort_order)??0;return f!==h?f-h:o.taskId-d.taskId}).map(o=>o.id)}),r}function St(e,t){return t?Object.prototype.hasOwnProperty.call(e,t)?t:Object.keys(e).find(n=>e[n].includes(t))??null:null}function Js({initial:e,filters:t,urls:n}){var Ne,oe,ee,he;const[r,s]=c.useState((e==null?void 0:e.tasks)??[]),[o,d]=c.useState((e==null?void 0:e.projects)??[]),[a,u]=c.useState((e==null?void 0:e.users)??[]),[f,h]=c.useState((e==null?void 0:e.statusOptions)??[]),[m,x]=c.useState((e==null?void 0:e.priorityOptions)??[]),[p,C]=c.useState("board"),[v,w]=c.useState("project"),[S,R]=c.useState((t==null?void 0:t.sort)??"deadline"),[N,O]=c.useState((t==null?void 0:t.project)??""),[k,A]=c.useState((t==null?void 0:t.assignee)??""),[D,z]=c.useState((t==null?void 0:t.status)??""),[B,F]=c.useState((t==null?void 0:t.priority)??""),[P,ce]=c.useState((t==null?void 0:t.search)??""),[de,ue]=c.useState(!1),[Oe,V]=c.useState(null),[re,Te]=c.useState(!1),[q,xe]=c.useState({naam:"",omschrijving:"",deadline:"",kleur:""}),[Ke,W]=c.useState({}),[me,Re]=c.useState(!1),[se,ie]=c.useState(null),[I,_]=c.useState(null),[ve,M]=c.useState(!1),[Fe,fe]=c.useState(!1),[be,ge]=c.useState(""),[Ae,Me]=c.useState(!1),[bt,tt]=c.useState(!1),[He,ye]=c.useState({}),Ge=c.useRef(null),Ve=lr(ar(rn,{activationConstraint:{distance:6}})),ze=c.useCallback(async()=>{ue(!0);try{const l=await Be.get("/taken/data",{params:{project:N||void 0,assignee:k||void 0,status:D||void 0,priority:B||void 0,search:P||void 0,sort:S||void 0}});s(l.data.tasks??[]),d(l.data.projects??[]),u(l.data.users??[]),h(l.data.statusOptions??[]),x(l.data.priorityOptions??[])}catch{V({tone:"error",text:"Taken laden mislukt. Probeer opnieuw."})}finally{ue(!1)}},[N,k,D,B,P,S]);c.useEffect(()=>{const l=setTimeout(()=>ze(),250);return()=>clearTimeout(l)},[ze]);const Le=c.useMemo(()=>Object.fromEntries(r.map(l=>[l.id,l])),[r]),{group:J,columns:we}=c.useMemo(()=>Hs({view:p,groupBoardBy:v,projects:o,users:a,statusOptions:f}),[p,v,o,a,f]),[G,Ee]=c.useState(()=>yn(r,we,J)),[_e,nt]=c.useState(null);c.useEffect(()=>{Ee(yn(r,we,J))},[r,we,J]);const je=c.useMemo(()=>{const l=We(_e);return l?Le[l]:null},[_e,Le]),rt=c.useCallback(async l=>{ie(l),_(null),M(!0);try{const g=await Be.get(`/taken/${l}`);_(g.data.task??null)}catch{V({tone:"error",text:"Taak laden mislukt."})}finally{M(!1)}},[]),yt=c.useCallback(()=>{ie(null),_(null)},[]),$t=c.useCallback(async l=>{if(l.preventDefault(),!!I){fe(!0);try{const y=(await Be.patch(`/taken/tasks/${I.id}`,{titel:I.titel,omschrijving:I.omschrijving??null,labels:I.labels??null,prioriteit:I.prioriteit??"normaal",task_project_id:I.task_project_id??null,deadline:I.deadline?new Date(I.deadline).toISOString():null,status:I.status??"open",assignees:(I.assignees??[]).map(b=>b.id)})).data.task;s(b=>b.map(j=>j.id===y.id?{...j,...y}:j)),V({tone:"success",text:"Taak opgeslagen."})}catch{V({tone:"error",text:"Opslaan mislukt."})}finally{fe(!1)}}},[I]),st=c.useCallback(async l=>{if(l.preventDefault(),!(!se||!be.trim())){Me(!0);try{const g=await Be.post(`/taken/tasks/${se}/comments`,{body:be.trim()});_(y=>y&&{...y,comments:[...y.comments??[],g.data.comment]}),ge(""),s(y=>y.map(b=>{var j;return b.id===se?{...b,counts:{...b.counts??{},comments:(((j=b.counts)==null?void 0:j.comments)??0)+1}}:b}))}catch{V({tone:"error",text:"Reactie plaatsen mislukt."})}finally{Me(!1)}}},[be,se]),wt=c.useCallback(async l=>{if(!(!se||!l||l.length===0)){tt(!0);try{for(const g of l){const y=new FormData;y.append("file",g);const b=await Be.post(`/taken/tasks/${se}/attachments`,y,{headers:{"Content-Type":"multipart/form-data"}});_(j=>j&&{...j,attachments:[...j.attachments??[],b.data.attachment]}),s(j=>j.map(E=>{var T;return E.id===se?{...E,counts:{...E.counts??{},attachments:(((T=E.counts)==null?void 0:T.attachments)??0)+1}}:E}))}}catch{V({tone:"error",text:"Bijlage uploaden mislukt."})}finally{tt(!1)}}},[se]),it=c.useCallback(async l=>{if(!(!l||l.length===0))try{await Be.patch("/taken/tasks/reorder",{changes:l})}catch{V({tone:"error",text:"Opslaan van volgorde mislukt. Pagina vernieuwen helpt meestal."}),ze()}},[ze]),qe=c.useCallback(({nextItems:l,movedTaskIdForTeam:g=null,movedToAssigneeId:y=null})=>{Ee(l),s(b=>{const j=b.map(T=>({...T})),E=Object.fromEntries(j.map(T=>[T.id,T]));return we.forEach(T=>{(l[T.id]??[]).forEach((te,Ce)=>{var ne;const le=We(te);if(!(!le||!E[le])){if(E[le].sort_order=(Ce+1)*10,J==="project")E[le].task_project_id=T.projectId??null,E[le].project=T.projectId?{id:T.projectId,naam:T.title,kleur:((ne=o.find(Y=>Y.id===T.projectId))==null?void 0:ne.kleur)??null}:null;else if(J==="status")E[le].status=T.status??E[le].status;else if(J==="assignee"&&g&&y!==null&&le===g){const Y=a.find(Pe=>Pe.id===y);E[le].assignees=Y?[{id:Y.id,name:Y.name}]:[]}}})}),j})},[we,J,o,a]),Ft=c.useCallback(({active:l})=>nt((l==null?void 0:l.id)??null),[]),_t=c.useCallback(({active:l,over:g})=>{const y=l==null?void 0:l.id,b=g==null?void 0:g.id;if(!y||!b)return;const j=St(G,y),E=St(G,b);!j||!E||j!==E&&Ee(T=>{const X={...T},te=[...X[j]??[]],Ce=[...X[E]??[]],le=te.indexOf(y);if(le===-1)return T;te.splice(le,1);const ne=Ce.indexOf(b),Y=ne===-1?Ce.length:ne;return Ce.splice(Y,0,y),X[j]=te,X[E]=Ce,X})},[G]),Xt=c.useCallback(async({active:l,over:g})=>{const y=l==null?void 0:l.id,b=g==null?void 0:g.id;if(nt(null),!y||!b)return;const j=St(G,y),E=St(G,b);if(!j||!E)return;if(j===E){const ne=G[j]??[],Y=ne.indexOf(y),Pe=ne.indexOf(b);if(Y===-1||Pe===-1||Y===Pe)return;const jt={...G,[j]:on(ne,Y,Pe)};qe({nextItems:jt});const ot=(jt[j]??[]).map((at,Kn)=>{const Yt=We(at);if(!Yt)return null;const Ut=Le[Yt];return Ut?{id:Yt,task_project_id:Ut.task_project_id??null,status:Ut.status??null,sort_order:(Kn+1)*10}:null}).filter(Boolean);await it(ot);return}const T=G;let X=null,te=null;if(J==="assignee"){X=We(y);const ne=we.find(Y=>Y.id===E);if(te=(ne==null?void 0:ne.assigneeId)??null,X!==null)try{await Be.patch(`/taken/tasks/${X}`,{assignees:te?[te]:[]})}catch{V({tone:"error",text:"Toewijzen mislukt. Probeer opnieuw."}),ze();return}}qe({nextItems:T,movedTaskIdForTeam:X,movedToAssigneeId:te});const le=Array.from(new Set([j,E])).flatMap(ne=>{const Y=we.find(Pe=>Pe.id===ne);return(T[ne]??[]).map((Pe,jt)=>{const ot=We(Pe);if(!ot)return null;const at=Le[ot]??{};return{id:ot,task_project_id:J==="project"?(Y==null?void 0:Y.projectId)??null:at.task_project_id??null,status:J==="status"?(Y==null?void 0:Y.status)??at.status??null:at.status??null,sort_order:(jt+1)*10}}).filter(Boolean)}).filter(Boolean);await it(le)},[qe,we,ze,J,G,it,Le]),K=c.useCallback(async l=>{var g,y;l.preventDefault(),Re(!0),W({});try{const b=await Be.post("/taken/projects",q);d(j=>[...j,b.data.project].sort((E,T)=>String(E.naam).localeCompare(String(T.naam)))),xe({naam:"",omschrijving:"",deadline:"",kleur:""}),Te(!1),V({tone:"success",text:"Project toegevoegd."})}catch(b){W(((y=(g=b==null?void 0:b.response)==null?void 0:g.data)==null?void 0:y.errors)??{})}finally{Re(!1)}},[q]),Q=c.useCallback(async({column:l,title:g})=>{const y=String(g||"").trim();if(y)try{const b={titel:y,omschrijving:null,task_project_id:J==="project"?l.projectId:N?Number(N):null,status:J==="status"?l.status:"open",prioriteit:"normaal",deadline:null,labels:null,assignees:p==="team"?l.assigneeId?[l.assigneeId]:[]:[]},E=(await Be.post("/taken/tasks",b)).data.task;s(T=>[E,...T]),ye(T=>({...T,[l.id]:""}))}catch{V({tone:"error",text:"Taak aanmaken mislukt."})}},[N,J,p]),Z=c.useMemo(()=>[...r].sort((l,g)=>(l.deadline??"").localeCompare(g.deadline??"")),[r]);return i.jsxs(i.Fragment,{children:[i.jsx(Hn,{title:"Taken"}),i.jsxs("div",{className:"mx-auto max-w-7xl px-4 pb-16 pt-10 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-zinc-900",children:"Taken"}),i.jsx("p",{className:"mt-1 text-sm text-zinc-500",children:"Overzicht per taak, project en team."})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("div",{className:"flex items-center rounded-lg bg-white p-1 ring-1 ring-zinc-200",children:[i.jsx("button",{type:"button",className:Ie("rounded-md px-3 py-2 text-sm font-semibold",p==="list"?"bg-zinc-900 text-white":"text-zinc-700"),onClick:()=>C("list"),children:"Lijst"}),i.jsx("button",{type:"button",className:Ie("rounded-md px-3 py-2 text-sm font-semibold",p==="board"?"bg-zinc-900 text-white":"text-zinc-700"),onClick:()=>C("board"),children:"Board"}),i.jsx("button",{type:"button",className:Ie("rounded-md px-3 py-2 text-sm font-semibold",p==="team"?"bg-zinc-900 text-white":"text-zinc-700"),onClick:()=>C("team"),children:"Team"})]}),i.jsx(ke,{tone:"secondary",onClick:()=>Te(!0),children:"Nieuw project"}),i.jsx("a",{className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-zinc-700 ring-1 ring-zinc-200 hover:bg-zinc-50",href:n==null?void 0:n.tasks_old,children:"Taken (old)"})]})]}),Oe?i.jsx("div",{className:Ie("mt-6 rounded-xl border p-4 text-sm",Oe.tone==="error"?"border-rose-200 bg-rose-50 text-rose-900":"border-emerald-200 bg-emerald-50 text-emerald-900"),children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsx("div",{children:Oe.text}),i.jsx("button",{type:"button",className:"text-xs font-semibold",onClick:()=>V(null),children:"Sluiten"})]})}):null,i.jsxs("div",{className:"mt-6 rounded-2xl border border-zinc-200 bg-white p-4",children:[i.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Zoeken"}),i.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:P,onChange:l=>ce(l.target.value),placeholder:"Zoek op titel, omschrijving, labels"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Project"}),i.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:N,onChange:l=>O(l.target.value),children:[i.jsx("option",{value:"",children:"Alle projecten"}),o.map(l=>i.jsx("option",{value:l.id,children:l.naam},l.id))]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Status"}),i.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:D,onChange:l=>z(l.target.value),children:[i.jsx("option",{value:"",children:"Alle statussen"}),f.map(l=>i.jsx("option",{value:l,children:Rt(l)},l))]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Prioriteit"}),i.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:B,onChange:l=>F(l.target.value),children:[i.jsx("option",{value:"",children:"Alle prioriteiten"}),m.map(l=>i.jsx("option",{value:l,children:Ye(l).label},l))]})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-2",children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Assignee"}),i.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:k,onChange:l=>A(l.target.value),children:[i.jsx("option",{value:"",children:"Iedereen"}),a.map(l=>i.jsx("option",{value:l.id,children:l.name},l.id))]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Sorteren"}),i.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:S,onChange:l=>R(l.target.value),children:[i.jsx("option",{value:"deadline",children:"Deadline"}),i.jsx("option",{value:"prioriteit",children:"Prioriteit"}),i.jsx("option",{value:"nieuwste",children:"Nieuwste"})]})]}),p==="board"?i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Groepeer"}),i.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:v,onChange:l=>w(l.target.value),children:[i.jsx("option",{value:"project",children:"Project"}),i.jsx("option",{value:"status",children:"Status"})]})]}):null]}),i.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-zinc-500",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[de?i.jsx("span",{className:"font-semibold text-zinc-700",children:"Laden..."}):null,i.jsxs("span",{children:[r.length," taken"]})]}),i.jsx(ke,{tone:"ghost",onClick:()=>ze(),children:"Ververs"})]})]}),p==="list"?i.jsx("div",{className:"mt-6 overflow-hidden rounded-2xl border border-zinc-200 bg-white",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-zinc-200 text-sm",children:[i.jsx("thead",{className:"bg-zinc-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Taak"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Project"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Status"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Prioriteit"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Deadline"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Assignees"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Info"})]})}),i.jsx("tbody",{className:"divide-y divide-zinc-200",children:Z.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-4 py-10 text-center text-sm text-zinc-500",children:"Geen taken gevonden."})}):Z.map(l=>{var g,y,b,j;return i.jsxs("tr",{className:"hover:bg-zinc-50",children:[i.jsx("td",{className:"px-4 py-3",children:i.jsx("button",{type:"button",className:"font-semibold text-zinc-900 hover:underline",onClick:()=>rt(l.id),children:l.titel})}),i.jsx("td",{className:"px-4 py-3 text-zinc-600",children:((g=l.project)==null?void 0:g.naam)??"-"}),i.jsx("td",{className:"px-4 py-3 text-zinc-600",children:Rt(l.status)}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:Ie("rounded-full px-2 py-0.5 text-xs font-semibold",Ye(l.prioriteit).className),children:Ye(l.prioriteit).label})}),i.jsx("td",{className:"px-4 py-3 text-zinc-600",children:l.deadline?mt(l.deadline):"-"}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("div",{className:"flex flex-wrap gap-2",children:(y=l.assignees)!=null&&y.length?l.assignees.map(E=>i.jsx($e,{children:E.name},E.id)):i.jsx("span",{className:"text-zinc-400",children:"-"})})}),i.jsx("td",{className:"px-4 py-3 text-zinc-600",children:i.jsxs("div",{className:"flex items-center gap-2",children:[(b=l.counts)!=null&&b.comments?i.jsxs($e,{children:[l.counts.comments," reacties"]}):null,(j=l.counts)!=null&&j.attachments?i.jsxs($e,{children:[l.counts.attachments," bijlagen"]}):null]})})]},l.id)})})]})})}):i.jsx("div",{className:"mt-6",children:i.jsxs(ls,{sensors:Ve,collisionDetection:mr,onDragStart:Ft,onDragOver:_t,onDragEnd:Xt,children:[i.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:we.map(l=>{const g=G[l.id]??[];return i.jsx("div",{className:"shrink-0",children:i.jsx(Us,{title:l.title,subtitle:l.subtitle,count:g.length,footer:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{ref:Ge,className:"w-full rounded-md border-zinc-300 bg-white text-sm",placeholder:"Taak toevoegen...",value:He[l.id]??"",onChange:y=>ye(b=>({...b,[l.id]:y.target.value})),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),Q({column:l,title:He[l.id]??""}))}}),i.jsx(ke,{tone:"secondary",onClick:()=>Q({column:l,title:He[l.id]??""}),children:"+"})]}),children:i.jsxs(Ts,{items:g,strategy:Is,children:[g.length===0?i.jsx("div",{className:"rounded-lg border border-dashed border-zinc-200 bg-white px-4 py-6 text-center text-sm text-zinc-500",children:"Geen taken."}):null,g.map(y=>{const b=We(y),j=b?Le[b]:null;return j?i.jsx(Ys,{task:j,onOpen:rt},y):null})]})})},l.id)})}),i.jsx(Rs,{children:je?i.jsx(Ks,{task:je}):null})]})})]}),re?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-zinc-900/40 p-4",role:"dialog","aria-modal":"true",children:i.jsxs("div",{className:"w-full max-w-xl rounded-2xl bg-white p-6 shadow-xl",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-bold text-zinc-900",children:"Nieuw project"}),i.jsx("div",{className:"mt-1 text-sm text-zinc-500",children:"Maak een nieuwe projectkolom voor je board."})]}),i.jsx(ke,{tone:"ghost",type:"button",onClick:()=>Te(!1),children:"Sluiten"})]}),i.jsxs("form",{className:"mt-6 space-y-4",onSubmit:K,children:[i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Naam"}),i.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:q.naam,onChange:l=>xe(g=>({...g,naam:l.target.value}))}),Ke.naam?i.jsx("div",{className:"mt-1 text-xs text-rose-600",children:(Ne=Ke.naam)==null?void 0:Ne[0]}):null]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Omschrijving"}),i.jsx("textarea",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",rows:3,value:q.omschrijving,onChange:l=>xe(g=>({...g,omschrijving:l.target.value}))})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Deadline"}),i.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:q.deadline,onChange:l=>xe(g=>({...g,deadline:l.target.value}))})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Kleur (optioneel)"}),i.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",placeholder:"#aabbcc",value:q.kleur,onChange:l=>xe(g=>({...g,kleur:l.target.value}))})]})]}),i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx(ke,{tone:"secondary",type:"button",onClick:()=>Te(!1),children:"Annuleren"}),i.jsx(ke,{type:"submit",disabled:me,children:me?"Opslaan...":"Opslaan"})]})]})]})}):null,se?i.jsx("div",{className:"fixed inset-0 z-50 flex justify-end bg-zinc-900/40",role:"dialog","aria-modal":"true",children:i.jsxs("div",{className:"h-full w-full max-w-xl overflow-y-auto bg-white shadow-2xl",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 border-b border-zinc-200 p-6",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-bold text-zinc-900",children:"Taak"}),i.jsx("div",{className:"mt-1 text-sm text-zinc-500",children:((oe=I==null?void 0:I.project)==null?void 0:oe.naam)??"Geen project"})]}),i.jsx(ke,{tone:"ghost",onClick:yt,children:"Sluiten"})]}),ve?i.jsx("div",{className:"p-6 text-sm text-zinc-600",children:"Laden..."}):I?i.jsxs("div",{className:"p-6",children:[i.jsxs("form",{className:"space-y-6",onSubmit:$t,children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Titel"}),i.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:I.titel??"",onChange:l=>_(g=>({...g,titel:l.target.value}))})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Omschrijving"}),i.jsx("textarea",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",rows:4,value:I.omschrijving??"",onChange:l=>_(g=>({...g,omschrijving:l.target.value}))})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Project"}),i.jsxs("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:I.task_project_id??"",onChange:l=>_(g=>({...g,task_project_id:l.target.value?Number(l.target.value):null})),children:[i.jsx("option",{value:"",children:"Geen"}),o.map(l=>i.jsx("option",{value:l.id,children:l.naam},l.id))]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Status"}),i.jsx("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:I.status??"open",onChange:l=>_(g=>({...g,status:l.target.value})),children:f.map(l=>i.jsx("option",{value:l,children:Rt(l)},l))})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Prioriteit"}),i.jsx("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:I.prioriteit??"normaal",onChange:l=>_(g=>({...g,prioriteit:l.target.value})),children:m.map(l=>i.jsx("option",{value:l,children:Ye(l).label},l))})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Deadline"}),i.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-md border-zinc-300 text-sm",value:I.deadline?new Date(I.deadline).toISOString().slice(0,16):"",onChange:l=>_(g=>({...g,deadline:l.target.value?new Date(l.target.value).toISOString():null}))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Labels"}),i.jsx("input",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",placeholder:"bijv. lead, demo, urgent",value:I.labels??"",onChange:l=>_(g=>({...g,labels:l.target.value}))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:"Assignees"}),i.jsx("select",{className:"mt-1 w-full rounded-md border-zinc-300 text-sm",multiple:!0,value:(I.assignees??[]).map(l=>String(l.id)),onChange:l=>{const g=Array.from(l.target.selectedOptions).map(b=>Number(b.value)),y=a.filter(b=>g.includes(b.id)).map(b=>({id:b.id,name:b.name}));_(b=>({...b,assignees:y}))},children:a.map(l=>i.jsx("option",{value:l.id,children:l.name},l.id))}),i.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:"Tip: houd Ctrl ingedrukt om meerdere te kiezen."})]})]}),i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx(ke,{tone:"secondary",type:"button",onClick:yt,children:"Sluiten"}),i.jsx(ke,{type:"submit",disabled:Fe,children:Fe?"Opslaan...":"Opslaan"})]})]}),i.jsxs("div",{className:"mt-10 border-t border-zinc-200 pt-6",children:[i.jsx("div",{className:"text-sm font-bold text-zinc-900",children:"Reacties"}),i.jsx("ul",{className:"mt-4 space-y-3",children:(ee=I.comments)!=null&&ee.length?I.comments.map(l=>{var g;return i.jsxs("li",{className:"rounded-xl border border-zinc-200 bg-white p-4",children:[i.jsxs("div",{className:"text-xs font-semibold text-zinc-500",children:[((g=l.author)==null?void 0:g.name)??"Onbekend","  ",l.created_at?mt(l.created_at):"-"]}),i.jsx("div",{className:"mt-2 whitespace-pre-wrap text-sm text-zinc-700",children:l.body})]},l.id)}):i.jsx("li",{className:"text-sm text-zinc-500",children:"Nog geen reacties."})}),i.jsxs("form",{className:"mt-4 space-y-2",onSubmit:st,children:[i.jsx("textarea",{className:"w-full rounded-md border-zinc-300 text-sm",rows:3,value:be,onChange:l=>ge(l.target.value),placeholder:"Schrijf een reactie en tag met @naam"}),i.jsx("div",{className:"flex justify-end",children:i.jsx(ke,{type:"submit",disabled:Ae,children:Ae?"Plaatsen...":"Plaatsen"})})]})]}),i.jsxs("div",{className:"mt-10 border-t border-zinc-200 pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsx("div",{className:"text-sm font-bold text-zinc-900",children:"Bijlagen"}),i.jsxs("label",{className:"inline-flex cursor-pointer items-center gap-2 rounded-md bg-white px-3 py-2 text-sm font-semibold text-zinc-700 ring-1 ring-zinc-200 hover:bg-zinc-50",children:[i.jsx("input",{type:"file",className:"hidden",multiple:!0,onChange:l=>{const g=Array.from(l.target.files??[]);l.target.value="",wt(g)}}),bt?"Uploaden...":"Upload"]})]}),(he=I.attachments)!=null&&he.length?i.jsx("ul",{className:"mt-4 space-y-2",children:I.attachments.map(l=>i.jsxs("li",{className:"flex items-center justify-between gap-3 rounded-xl border border-zinc-200 bg-white px-4 py-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"truncate text-sm font-semibold text-zinc-900",children:l.original_name}),i.jsx("div",{className:"mt-1 text-xs text-zinc-500",children:l.mime??"bestand"})]}),i.jsx("a",{className:"text-sm font-semibold text-indigo-700 hover:text-indigo-900",href:l.url,target:"_blank",rel:"noopener",children:"Open"})]},l.id))}):i.jsx("div",{className:"mt-4 text-sm text-zinc-500",children:"Nog geen bijlagen."})]})]}):i.jsx("div",{className:"p-6 text-sm text-zinc-600",children:"Taak niet gevonden."})]})}):null]})}export{Js as default};
